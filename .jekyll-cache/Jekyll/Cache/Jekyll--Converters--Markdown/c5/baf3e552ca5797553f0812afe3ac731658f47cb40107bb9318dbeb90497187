I"Ü!<p>Title: PEG  <br />
Author:</p>

<p>Comparison â€” REGEX vs PEG</p>

<p>(enough to get started)</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">REGEX</th>
      <th style="text-align: left">PEG (Ohm-JS)</th>
      <th style="text-align: left">Racket (#lang peg)</th>
      <th style="text-align: left">Â </th>
      <th>Â </th>
      <th>Â </th>
      <th>Â </th>
      <th>Â </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">/a/</td>
      <td style="text-align: left">â€œaâ€</td>
      <td style="text-align: left">â€˜aâ€™</td>
      <td style="text-align: left">Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: left">/abc/</td>
      <td style="text-align: left">â€œabcâ€</td>
      <td style="text-align: left">â€˜abcâ€™</td>
      <td style="text-align: left">Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: left">/a*/</td>
      <td style="text-align: left">â€œaâ€ *</td>
      <td style="text-align: left">â€˜aâ€™ *</td>
      <td style="text-align: left">0 or more</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: left">/a?/</td>
      <td style="text-align: left">â€œaâ€?</td>
      <td style="text-align: left">â€˜aâ€™?</td>
      <td style="text-align: left">optional (0  or 1)</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: left">/a+/</td>
      <td style="text-align: left">â€œaâ€+</td>
      <td style="text-align: left">â€˜aâ€™+</td>
      <td style="text-align: left">1 or more</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: left">/(a)(bc)/</td>
      <td style="text-align: left">(â€œaâ€) (â€œbcâ€)</td>
      <td style="text-align: left">(â€˜aâ€™) (â€˜bcâ€™)</td>
      <td style="text-align: left">grouping / memo</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: left">\1\2</td>
      <td style="text-align: left">rule: function (v1, v2) { â€¦ }</td>
      <td style="text-align: left">v1:(â€˜aâ€™) v2:(â€˜bcâ€™)</td>
      <td style="text-align: left">naming matches</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: left">/[a-z]/</td>
      <td style="text-align: left">â€œaâ€ .. â€œzâ€</td>
      <td style="text-align: left">[a-z]</td>
      <td style="text-align: left">character class</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: left">/./</td>
      <td style="text-align: left">any</td>
      <td style="text-align: left">.</td>
      <td style="text-align: left">any</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: left">/(a</td>
      <td style="text-align: left">b</td>
      <td style="text-align: left">c)/</td>
      <td style="text-align: left">â€œaâ€</td>
      <td>â€œbâ€</td>
      <td>â€œcâ€</td>
      <td>(â€˜aâ€™ / â€˜bâ€™ / â€˜câ€™)</td>
      <td>alternates (original thesis used â€œ/â€)</td>
    </tr>
    <tr>
      <td style="text-align: left">Â </td>
      <td style="text-align: left">â€œaâ€ rule</td>
      <td style="text-align: left">v1:(â€˜aâ€™) v2:rule</td>
      <td style="text-align: left">call rule (in context)</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: left">Â </td>
      <td style="text-align: left">!â€aâ€</td>
      <td style="text-align: left">~â€™aâ€™</td>
      <td style="text-align: left">not</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: left">Â </td>
      <td style="text-align: left">rule = â€¦</td>
      <td style="text-align: left">rule &lt;â€” â€¦ ;</td>
      <td style="text-align: left">define callable rule</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: left">Â </td>
      <td style="text-align: left">Â </td>
      <td style="text-align: left">_</td>
      <td style="text-align: left">whitespace (convention)</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: left">Â </td>
      <td style="text-align: left">&amp;â€aâ€</td>
      <td style="text-align: left">Â </td>
      <td style="text-align: left">Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: left">Â </td>
      <td style="text-align: left">addOperation (â€˜â€¦â€™,{ â€¦})</td>
      <td style="text-align: left">-&gt; lisp</td>
      <td style="text-align: left">Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: left">Â </td>
      <td style="text-align: left">â€{â€œ â€¦ â€œ{â€œ â€¦ â€œ}â€ â€¦ â€œ}â€</td>
      <td style="text-align: left">â€™{â€˜ â€¦ â€˜{â€˜ â€¦ â€˜}â€™ â€¦ â€˜}â€™</td>
      <td style="text-align: left">nesting</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td style="text-align: left">Â </td>
      <td style="text-align: left">Â </td>
      <td style="text-align: left">Â </td>
      <td style="text-align: left">Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
  </tbody>
</table>

<p>The most interesting differences between PEG and REGEX are</p>

<ul>
  <li>not</li>
  <li>nested rules</li>
</ul>

<p>The most interesting difference between Racket #lang peg and Ohm-JS is in the naming of matches.  In Racket (most PEGs) matches are explicitly tagged with variable names in the PEG grammar.  In Ohm, all matches are tagged as parameters to rules in the semantics section.</p>

<p>[In my opinion, the Ohm idea is better.  It leaves the grammar intact and more readable.  One of the problems with REGEX syntax is that it has collected noise over the years, making it even less readable than it originally was.]</p>

<p>PEG vs. YACC</p>

<p>YACC was built from LR(k) theory.  It matches CFG languages.</p>

<p>PEG builds recursive-descent parsers.</p>

<p>PEG can match balanced brackets.  YACC cannot.</p>

<p>YACC is theoretically â€œmore soundâ€.</p>

<p>PEG is more practical.</p>

<p>The main breakthrough in PEG was the idea of using backtracking during the pattern matching.  This used to be a verbotten concept in the late 1900â€™s, but with advances in hardware, the use of backtracking has become practical.</p>

<p>REGEX is also based on theory and is also â€œsoundâ€.</p>

<p>YACC and REGEX produce state machines.</p>

<p>PEG produces a TDPL (top down parser, recursive descent).</p>

<p>Pattern Macthing DSLs</p>

<p>REGEX and PEG are DSLs for pattern matching.</p>

<p>There is little reason to use REGEX instead of PEG, if both are equally available.</p>

<p>For simple, one-line matches, REGEX might be preferred because</p>

<ul>
  <li>it is available in many tools (e.g. sed, awk)</li>
  <li>it is available in many languages (e.g. JavaScript)</li>
  <li>it has a more succinct syntax for small matches.</li>
</ul>

<p>REGEX syntax often results in unreadable patterns.</p>

<p>REGEX cannot match nested constructs,<sup id="fnref:fn1" role="doc-noteref"><a href="#fn:fn1" class="footnote">1</a></sup> for example when matching text in programming languages.</p>

<p>PEG rules are like multiple REGEX patterns that can call each other.  If only one rule is required, REGEX might be a good choice.</p>

<p>In general, though, it is better to use PEG, which allows for later expansion.  When REGEX is grown through maintenance and fixing edge-cases, it usually results in unreadable code.</p>

<p>Racket PEG Documentation</p>

<p>https://docs.racket-lang.org/peg/index.html</p>

<p>Ohm-JS PEG Documentation</p>

<p>https://github.com/harc/ohm</p>

<p>PEG Thesis</p>

<p>You donâ€™t need to read this â€¦</p>

<p>https://bford.info/pub/lang/peg.pdf</p>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:fn1" role="doc-endnote">
      <p>REGEX probably can be made to match nested constructs, but requires more effort.Â <a href="#fnref:fn1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>
:ET