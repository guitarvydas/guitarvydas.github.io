<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>Factbases</title>
  <meta name="CreationTime" content="2021-01-17T09:53:51Z">
  <meta name="ModificationTime" content="2021-01-17T09:53:51Z">
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1894.6">
  <style type="text/css">
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; text-indent: 18.0px; font: 13.0px Palatino}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; text-indent: 18.0px; font: 13.0px Palatino; min-height: 18.0px}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; text-indent: 18.0px; font: 11.0px Menlo}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; text-indent: 18.0px; font: 11.0px Menlo; min-height: 13.0px}
    p.p6 {margin: 0.0px 0.0px 0.0px 36.0px; font: 11.0px Menlo}
    p.p7 {margin: 0.0px 0.0px 0.0px 36.0px; font: 11.0px Menlo; min-height: 13.0px}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    span.s1 {font: 9.0px Palatino}
    span.s2 {text-decoration: underline}
    span.s3 {font: 11.0px Menlo}
    span.s4 {font: 13.0px Palatino}
  </style>
</head>
<body>
<div style="width: 600px; margin: 0 auto">

<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Factbases</b></h2>
<p class="p2">The <i>trick</i> to automating anything in software is to find a way to <i>normalize </i>the information.</p>
<p class="p3"><br></p>
<p class="p2">We discovered how to normalize code very early on - we used a notation called <i>assembler</i>.</p>
<p class="p3"><br></p>
<p class="p2">Assembler is code represented as triples - relation, subject, object.</p>
<p class="p3"><br></p>
<p class="p2">For example</p>
<p class="p3"><br></p>
<p class="p4">MOV R0, R1</p>
<p class="p5"><br></p>
<p class="p2">is a triple.<span class="Apple-converted-space">  </span>The relation is MOV.<span class="Apple-converted-space">  </span>The subject is R0.<span class="Apple-converted-space">  </span>The object is R1.</p>
<p class="p3"><br></p>
<p class="p2">If the idea of <i>triples</i> sounds familiar, it's because you've already heard of it.</p>
<p class="p3"><br></p>
<p class="p2">XML is triples<a id="fnlink1"></a><a href="#fn1"><sup>[1]</sup></a>.<span class="Apple-converted-space">  </span>The Semantic Web is triples.</p>
<p class="p3"><br></p>
<p class="p2">So, what is the <i>normalized</i> format of data?</p>
<p class="p3"><br></p>
<p class="p2">Triples!</p>
<p class="p3"><br></p>
<p class="p2">We want to put data into the form: relation, subject, object.</p>
<p class="p3"><br></p>
<p class="p2">Conveniently, this already exists.<span class="Apple-converted-space">  </span>It is a function of two parameters:</p>
<p class="p3"><br></p>
<p class="p6">relation(subject,object);</p>
<p class="p7"><br></p>
<p class="p2">or,<span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
<p class="p6">fn(id,x);</p>
<p class="p7"><br></p>
<p class="p2">Why is this a <i>Good Thing</i>? <span class="Apple-converted-space"> </span></p>
<p class="p3"><br></p>
<p class="p2">Well, because we impose <b>no</b> structure on the data. <span class="Apple-converted-space"> </span></p>
<p class="p3"><br></p>
<p class="p2">If the data has no structure, then it is easy to parse (in an automatic manner). <span class="Apple-converted-space"> </span></p>
<p class="p3"><br></p>
<p class="p2">If the data has no structure, then it can be used for other kinds of things.<span class="Apple-converted-space">  </span>Things that the original programmer never thought of.</p>
<p class="p3"><br></p>
<p class="p2">Note that organizing data into a data structure at compile time is just an optimization.<span class="Apple-converted-space">  </span>In the 1950's, it seemed like a good idea to preserve CPU power by pre-compiling data into data structures.</p>
<p class="p3"><br></p>
<p class="p2">Today, CPUs are cheap and abundant, we can waste CPU time building data structures at runtime.<span class="Apple-converted-space">  </span>We don't have to worry about pre-compiling things.</p>
<p class="p3"><br></p>
<p class="p2">How shall we waste CPU time? <span class="Apple-converted-space"> </span></p>
<p class="p3"><br></p>
<p class="p2">By performing exhaustive search.</p>
<p class="p3"><br></p>
<p class="p2">By using backtracking.<span class="Apple-converted-space">  </span>Backtracking was <i>verbotten</i> in the 1900's, but no more.</p>
<p class="p3"><br></p>
<p class="p2">I know, from experience, that I will be using PROLOG for doing exhaustive search.<span class="Apple-converted-space">  </span>So, I will put a period ('.') at the end of each function and call this a <i>fact</i>.</p>
<p class="p3"><br></p>
<p class="p6">fn(id,x).</p>
<p class="p7"><br></p>
<p class="p2">Caution: use the principles of Shuhari here.</p>
<p class="p3"><br></p>
<p class="p2">Shu: don't expand the definition of "x" in the above.<span class="Apple-converted-space">  </span>It is one thing and one thing only.</p>
<p class="p3"><br></p>
<p class="p2">For example, imagine that I have a rectangle R, with top-left (<i>x,y</i>) and a width, <i>w</i>, and a height, <i>h</i>.</p>
<p class="p3"><br></p>
<p class="p2">In factbase notation, this becomes</p>
<p class="p3"><br></p>
<p class="p6">rectangle(<i>R</i>,<i>nil</i>).</p>
<p class="p6">top_x(<i>R</i>,<i>x</i>).</p>
<p class="p6">top_y(<i>R</i>,<i>y</i>).</p>
<p class="p6">width(<i>R</i>,<i>w</i>).</p>
<p class="p6">height(<i>R</i>,<i>h</i>).</p>
<p class="p3"><br></p>
<p class="p2">Resist the urge to do something like:</p>
<p class="p3"><br></p>
<p class="p6">rectangle(<i>R</i>,[<i>x,y,w,h</i>]).</p>
<p class="p3"><br></p>
<p class="p2">or</p>
<p class="p3"><br></p>
<p class="p6">rectangle(<i>R</i>,nil).</p>
<p class="p6">top(<i>R</i>,[<i>x,y</i>]).</p>
<p class="p6">wh(<i>R</i>,[<i>w,h</i>]).</p>
<p class="p3"><br></p>
<p class="p2">We will use CPU power<a id="fnlink2"></a><a href="#fn2"><sup>[2]</sup></a> to glean various relationships about the data.<span class="Apple-converted-space">  </span>In fact, one of the first relationships will be to create a <i>bounding box</i> for each rectangle (we will see this later).</p>
<p class="p3"><br></p>
<p class="p2">CPU power is cheap.</p>
<p class="p3"><br></p>
<p class="p2">Memory is cheap.</p>
<p class="p3"><br></p>
<p class="p2">Don't waste brain power.</p>
<p class="p3"><br></p>
<p class="p2">Don't try to predict the various ways in which data will be structured.<a id="fnlink3"></a><a href="#fn3"><sup>[3]</sup></a></p>
<p class="p3"><br></p>
<p class="p2">PROLOG already knows how to deal with triples of the above form. <span class="Apple-converted-space"> </span></p>
<p class="p3"><br></p>
<p class="p2">PROLOG knows how to search triples. <span class="Apple-converted-space"> </span></p>
<p class="p3"><br></p>
<p class="p2">You know how to search triples (loops within loops within …). <span class="Apple-converted-space"> </span></p>
<p class="p3"><br></p>
<p class="p2">It gets boring after a while. <span class="Apple-converted-space"> </span></p>
<p class="p3"><br></p>
<p class="p2">When it gets boring, automate.</p>
<p class="p3"><br></p>
<p class="p2">Automation done before you know what you're doing is called <i>premature optimization</i>.</p>
<p class="p3"><br></p>
<p class="p2">You can't know what you're doing unless you've done it manually several times<a id="fnlink4"></a><a href="#fn4"><sup>[4]</sup></a>.</p>
<p class="p3"><br></p>
<p class="p2">Corollary: premature optimization happens in anything that is built before the 3<span class="s1"><sup>rd</sup></span> version.</p>
<p class="p3"><br></p>
<p class="p2">Code is cheap, thinking is hard.</p>
<p class="p3"><br></p>
<p class="p2">Code is cheap, experience is hard.</p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p2">It is best to grow the factbase with new facts, rather than culling facts from the factbase.<span class="Apple-converted-space">  </span>This allows maximum flexibility during design.<span class="Apple-converted-space">  </span>Culling is just an optimization and should be left to Optimization Engineering.</p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p2"><span class="s2">Recap:</span></p>
<p class="p3"><br></p>
<p class="p2">Code is normalized into triples, e.g. <span class="s3">MOV R0,R1</span>.</p>
<p class="p3"><br></p>
<p class="p2">Data is normalized into triples, e.g. <span class="s3">top_x(<i>R,x</i>)</span><i>.</i></p>
<p class="p3"><i></i><br></p>
<p class="p2"><i>Factbases </i>are the normalized (triple-ified) form of data.</p>
<p class="p3"><br></p>
<p class="p2"><span class="s2">Further Reading:</span></p>
<p class="p2">see the Appendix for tools like gprolog, JS prolog, miniKanren, AWK.</p>
<p class="p8"><br></p>
<hr>
<p class="p9"><a id="fn1"></a><a href="#fnlink1"><span class="s4">[1]</span></a><span class="s4"> </span>XML has too much syntax to be easily readable.</p>
<p class="p9"><a id="fn2"></a><a href="#fnlink2"><span class="s4">[2]</span></a><span class="s4"> exhaustive search</span></p>
<p class="p9"><span class="s4"><a id="fn3"></a><a href="#fnlink3">[3]</a> </span>Only tyrants tell you what to think.<span class="Apple-converted-space">  </span>Be free.<span class="Apple-converted-space">  </span>Let others be free.</p>
<p class="p9"><a id="fn4"></a><a href="#fnlink4"><span class="s4">[4]</span></a><span class="s4"> </span>Fred Brooks says that you need to build something 2 times (and throw the results away).<span class="Apple-converted-space">  </span>Then, knowing what you are doing, you build it a 3rd time.</p>
</div>
</body>
</html>
