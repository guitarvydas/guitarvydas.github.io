# Overview

Arrowgrams is a diagram transpiler.

A diagram is drawn using Draw.io then,

1. transpiled into a JSON graph
2. run as an app.

Arrowgrams diagrams are box-and-arrow diagrams that use a small subset of SVG.  The diagrams are exported to SVG format.

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="631px" height="81px" viewBox="-0.5 -0.5 631 81" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2021-07-09T04:31:35.088Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_16_0) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.4.2 Chrome/78.0.3904.130 Electron/7.1.4 Safari/537.36&quot; etag=&quot;dSH49W4auhsghhVGGz5B&quot; version=&quot;12.4.2&quot; type=&quot;device&quot; pages=&quot;6&quot;&gt;&lt;diagram id=&quot;iV1_iCQHRfuDkGOBecUP&quot; name=&quot;overview&quot;&gt;1ZfBcpswEIafxjPtIR1AgMmxddx2Omly8KFuLx4ZCVAjECOEbfz0lcxiILipnYnjFB+s/bUSYnc/CUZokm6+SJwn3wWhfORYZDNCNyPHsW3L139GqWrFD8a1EEtGwKkVZmxLQbRALRmhRc9RCcEVy/tiKLKMhqqnYSnFuu8WCd6/a45jOhBmIeZD9QcjKtk/l9V2fKUsTuDWgQcdKW6cQSgSTMS6I6HpCE2kEKpupZsJ5SZ4TVx8ZN/Nfy0WxZW9sFahm2y34VU92edThuwfQdJMvezUHjyaqpp4UaLDB6aQKhGxyDCftuqnsJQraia1tdG63AqRg/ibKlVBKeBSCS0lKuXQSzdMzTvtn7ptffDAujGVZzVGBUa9TLO2R1n9R0jArxClDOkTfg5UJpYxfWo+tM+7BoaKlCpZ6XGScqzYqr84DJUb7/3a7OgGJOiEZMEiV5iXcCfCcCxxOkiiLtXcNMOKs4xQqSO4FKVukdtlk4YlDh9iadT7Umk3CnrEOJ8ILuRuKkQ8GhBX64WS4oF2egJniXx/n5wVlYpunpGeYThhlgDAg53HvgZ73XLsg5R0CbbOFH//P4FFx1xW867RGWXMdtjOasY9ynzkmd+hzPu76xWwREdi6V4SS/R3LPWpluaMawAdXTzINlF+99Gcaqa/eD8oKFlTehjFIxISiUx19Po6I6IO6jPqWENGbecApP65IA0uAekzgTs3Pu6R+IwviY87wOfb7P6uC0xs3kyHrLzgIfcGyXLRGzv9xoM8yTJTLKUnbmJR5IThoVATf+l753yf8K5fb7PSZvtlsOvrfF+h6R8=&lt;/diagram&gt;&lt;diagram name=&quot;layer 1&quot; id=&quot;aGRshp2EHKMNtcRc9eTF&quot;&gt;3VjLctsgFP0az7SLdvSwZHUZO047nSRux2keSyywRIOEBiNH6tf3IqFX5cZ1GiVu7YW55wKCcziAPLJnUfZRoCS84JiwkWXgbGSfjizLNA0XfhSSl4jrTUogEBTrSg2wpD+IBg2NphSTTaei5JxJmnRBn8cx8WUHQ0Lwh261NWfdpyYoID1g6SPWR28olmE9L6NJfCI0CPWjPUcnIlRV1sAmRJg/tCB7PrJngnNZlqJsRpgir+LlerO9wt/W0ca5vluMV1+yr2eX78rOzg5pUk9BkFg+b9dayy1iqeZLpLGkEdFTlnnFo+BpjInqyxzZ0zVlbMYZF0XSXq/Xlu8DvpGC35NWBrsr13EhsyVCUpDlhNEghpzkCaD68ZAj2S967ZmsWSsAS5fwiEiRQzvdi2s6ZT961Zq2FvGhWQPWRGNhS/5abaTXXVD33XALBU3vISo6Pa7ny5Mez7DKElX0c0aBcKBxuiqpP18xzf4K+fdBIcgilVCN/EYVR313qeIWH9WCx7KFl58BdZl4RkcXy+jr4u6QxRtMFbenygz2QEAuUJwixtTgbwSVksRDaoUd4uHxLq08a2UXWg3mlYlzZJr0d6Ue9QTDLq9DLmTIAx4jNm/QqZ+Kbb1fNVXOudp4CvA7kTLXJxZKJQeIZFTe6rQq30HZeO/o6FQxZlRBroNybGpAT1AFJsVT4ZPH6nn62EQiII912DqVOjoLwpCk2+7wnl81r6capigQKPpPfWNax7aXffinfAPci/y2HbRaqbBpVkRVu8NPuaEdWi2E/Q61XtOh1TB3ORTu31FCGXjxsIvf8V0x6mtdZUuzb8vaum1fukP5sprY3/nyj634RFs1Or/EoVZRsNcyk1d1jNVT7vNycQnIm0C9Lr8d8mg7Qm+NX+76DmHzal3kWn9Q2POf&lt;/diagram&gt;&lt;diagram name=&quot;layer 2&quot; id=&quot;UahebIe5ObPOA1C7e0kw&quot;&gt;3VnbcpswEP0az7QP9XAxlzwmjtOkkzSd8UzTPMoggxKBqBCOyddXAgHCkNR2g53GfjB7VhJoj452kUfmNFp/pSAJb4gP8cjQ/PXIPB8Zhq5rNv8RSF4ituuUQECRLxs1wBw9QwlqEs2QD9NWQ0YIZihpgx6JY+ixFgYoJU/tZkuC23dNQAA7wNwDuIveIZ+F9by0xnEJURDKW7uWdESgaiyBNAQ+eVIgczYyp5QQVl5F6ynEInhVXB7m0Q/04+r5593F4vIq+23h4PxLOdjFLl3qKVAYs7cd2iiHXgGcyXjRLGYognLKLK/iSEkW+1CMpY/MsyXCeEowoYXTXC6XhudxPGWUPELF49sL27K5ZwUpQ5yWU4yCmPsYSTgqb899cL3B118mq9cM8KULSQQZzXk/OYpdkSZXrV7ZT80aMByrxEKF/pptINddUI/dxJZfyPDuEGqrE1Lo85UqTUJZSAISAzxr0LMm6Bq3mjbXRESvYOIBMpZL2YGMEQ6FLMLSC9eI/RLdx5a07uVg4vp8rRp5ZcR8ukonYd5X4wmj6VZYVb9yfmJSezDJA0My6sFX2smNiAEawNfGM8z+pUEhBgyt2k/35jTbHUUxCuI0QRjSkcG9pi6C9QmmYOynuNgORdi4iVGafN5ReJb49gnPLj6iB4mZgpefgwvS0Z2x1ZKk6XQlqds9ktRPhpJkuVJaZM3mpx0G+MafiEsvx4hTwQN5tihJuV5UQlsA7zEoqLrNGG8G35yvwZhxNrbKky4vttalxR2MlUmHlSkvSxTx3IA4AxjnCnRHEWMwHpI734KuP+njzjUWZsHdYOnMfW8c7ZPNvIyu6o3sH5KZrqayOrH1J7Ohk5KxdVZyj5mVjG5a8hEIKIg+qGL0zQLw6Ipx/hPFNOWfWvwpteAL5d/umW5wbbpbatPU+tfSgbTpvqxN/locdUrHU/FaLPzp4arFoXRqbFQfhtZTFRo9QrUHE+rJHkLdR5t76qz9Tji0hkxt2/x2TAlVT6lI6Nv89rsqmkAcb3X18rFr+8l7qxtNvcPAIU5B9pTa4OIythSXfVRxdQ8J68OLD1k7Wk77pGJSve0cSzVOt0KA60StCXzAAMsTmCrY+CElw74QA+gue099bc+Fi2XxXGlYVyND8bV5gjGZDMYXN5sD/8Kn/G1izv4A&lt;/diagram&gt;&lt;diagram name=&quot;layer 3&quot; id=&quot;97wTBWnFWhrEvEt8tOlR&quot;&gt;7VvRcps4FP0az3QfNgMICfy4drPbhzbtTGY27aMMMmYjECPk2N6vX4GFDYgkZFuM4sGZSdAFydY9OtI998YzsEz2f3Gcbb6wkNCZY4X7Gfg4c+TLduSfwnI4WqDjHg0Rj8OjyT4b7uN/iTJayrqNQ5I3HhSMURFnTWPA0pQEomHDnLNd87E1o813zXBENMN9gKlufYhDsVFW27LONz6RONqot/ahupHg6mFlyDc4ZLuaCdzOwJIzJo5XyX5JaOG8yi9337jFH8TfX5ZRnq/v8h93D/e/Hwf78y1dTlPgJBW/dmiF5ROmW+WvDOe5tFRzFofKkZxt05AUg9kzsAhxvjk1nggXsXT5HzSOUmkTLJPWdUzpklHGy/5gvV47QSDtueDskdTuhGiFIJJ31IeRo5F9C71Xpm6f8JALmbCECH6Q/dQorpqNWsLzCtFdbUHMlW1TWwunjlgtwug09NnR8kL5+g1+B0BzvOA4zbOYEj5zkPSKJBBYfCA5vglzWrJG/iqaNM6z316Bp+17WPx0+R6Vr6IHS0XNfny1gR4KIMeyWxDNoQ6R0wHRfDCEdGpIHKwbyY9Ec77cGrLiMjjQWKIgfbhYHfH4vKLKdyscPEYlSl+3Qj5GuqEKIfFDtwsq31kBNCRNUAsDpNMEdUDgDwYB1CAg+6xOjxALLA6ZPF/OtpIfgyKEib/u3MhQ4JPV+lKksUETL3mkjQ0Y0gBLcLrFtDzfQzIkKqZvcagNFhwbLE+Dg4QydFJNxsWGRSzF9PZsXZxPmYJq52c+s+LILx34DxHioOJAvJWnFlhsRFKhSfax+F67/lEMdQNV6+NejVw2DlUjlfP9Xm/UehXNc7eyVfU7zq+Y1P8AUjqGbXlAXvKgf3xQYB6RlwZ03e6lwQnFIn5qfrxfD7TfFeQltS2TpFHBqzdEfC3yEVseW14X+ebIA3jIQ8ux28SyO6K7rtABDcUsF7wXZg3NENftyxA4JkNcPdaLU0F4QsIYC9IKOAw9xYYiGPB6hBneJU8uV48LlWq1NWyae9huEwtyn+Fy0e44zpoUel+idm6cqnX1+E9qJvuaNRNsC9exRZPraRhMoqmGl2+aaHL18GwSTc+wa3zV5M7fS2xnqmqqEHw1JoTOmDFh9TGvUzUhLR0xumqCevB2AWYNvtqdvqsdjLraHW21TwqoIovvmKaAoF4+UgrIect+ZLrEmZtXuIOdZSHnmiXO3LS6EJzqQi/hZVvGFYbgVBjqTa/xNQ6cKkM/G/X1rQwhq3ttXCjqu+rKkG2bVxqC46QPDKUJ6psKQM8gfRmaID0VMImjE8sc4+pDyO7a1gp1pBdm37E6soF5FSCk5xGkPALXLI9s17QSENKzA5M+qgNmXA0I6VmFSR89x6/xBRKCo0RxVySQEOob+fmjRn563uKaBBI0rwqExsk9mEqTvnkEb9Q8AtLzCJNAOrHMM658hKZ/YvhJYnp9Mxdg1LKup2cuBCekWHqYPhbfNOt/bg3GD18rVwx4Csnm+Rub5b3a917B7X8=&lt;/diagram&gt;&lt;diagram name=&quot;types&quot; id=&quot;MBVU_OYnusstwsUWe-6x&quot;&gt;7VnZctowFP0aHmFsy+tjy9JOQ9p0MtMsLxlhC1uJjFxZBtyvr4xlvBGSQCA06RO+R1frPef6WnRAP1x+YTAKzqmHSEdTvGUHDDqapqqKKX4yJM2RrmqCHPEZ9qRXCVziP0iCikQT7KG45sgpJRxHddClsxlyeQ2DjNFF3W1KSX3WCPqoBVy6kLTRK+zxYL0xpWz4irAfyKltQzaEsHCWQBxAjy4qEBh2QJ9RyvOncNlHJDu94lzCZDied5PR3RlUHBqHA1PH3Xyw0Uu6rLfA0Iy/7tDAkXvjaXFgyBPnJ03KeEB9OoNkWKKfGU1mHsqGVYRV+owpjQSoCvAecZ5KMsCEUwEFPCSyFS0xv8669wxp3cjBsufBsmqk0vBgHKzmzAbIF52ttBHkJ05I+sU0YS7a4qdr6/gKZSAaIs5S0ZEhAjme12eFkqH+2m/d9YJisR5NkXLSLSPvIsXkFCIphuCQ+YjLXmUsPzEG04pblDnEj89jKI15jAY1nlpX3V885CsorMqZlNCKbi+gnq68BfXeA40M9TRp1FrXUWik/qfRjjQCJ0qj5rqOQiMtn3MOSVLQaBmxjibqH6DmLyAOeRqJWqbEegTHUYt/olCIskc3JVjQjAnHSU648aQg0AS6D/6Khj8SLtyQxKeYkD4llK2GAh5E9tQVeMwZfUCVFtO10WS6Zt8cMY6WO/CvTavHXgqWpMeiLKNMCQXVAqrBoioRKzHcGqLbb/2rBRje4gGC5zc4uhmxX903eV8UpYpaLVTWZcsJlCrWYZKDWdTHaVHON+P6StmhNZGqHUHu1m5yv4/p7IPIvQz4EfQ+/TkeXQxC5Y/z/S54WJz99hP739E7jaCLeWYZyjEULz/AcwFuczT3TA3PDd/WZTYkttJUz4vJQXVkINvTN+nI1ibANA+oI1VtJk6trSP7QDraHAj9dISkbVeSOHiWXleNiv4ys+y2sop+B5ec+UzJ7V2q7xdp43Qibb3zSO9dd+0XabOVXLPEWqlVOIOzOMJE5NEmJ8qIb0idSBXJ09qUOh3TAvCQqVMDzRIEtFNnUR7Wcqd5sNxpvaWiPtz9qLPbjcSGmyi9Z9i2IJTm6Kpq2fVhLadXtpm6U58k3/3xL2Gbm3+pv7rXd5Mwy78ycvfyHyEw/As=&lt;/diagram&gt;&lt;diagram name=&quot;ASC Exsmple&quot; id=&quot;85zO9aYcwFrSI-2Ip35K&quot;&gt;7VnLcpswFP0aL+MB8TAsUydNppM2ncmiTncCZFAiIypEAv36SkaYZ5w4jh+ZemXp6OoK6Z57uBYjY7rIrxhMou80QGQEtCAfGRcjAHRds8WPRIoSOdNto0RChgNlVQN3+C9SoKbQDAcobRlySgnHSRv0aRwjn7cwyBh9bpvNKWmvmsAQ9YA7H5I++gsHPFptTKsHrhEOI7W0Y6mBBayMFZBGMKDPDci4HBlTRikvW4t8iog8vepc8HXye2rBb7ehNiPmlUOsWX5WOvu6yZTVFhiK+ce6BmprvKjOCwXi+FSXMh7RkMaQXNboF0azOEDSqyZ6tc0NpYkAdQE+IM4LxQWYcSqgiC+IGkU55jM5fWyp3r1yJtsXebNTqE4A02i5pnRAE+hjLoeA9MBRzm/bULktuZcOC145QmWX0oz5aI2dtYq/yBxEF4izQsxjiECOn9qLQsXgcGW3mvqTYvE4QFPpZk6scopKNrdKosoFhyxEXM2qY33OGCwaZok0SF9ex9I661gd6rz2XG170SifoOo1zqSGlnTcgJrGIaj5X9DM0o+TZr3n2gfNzBPNdkUz40hp1n2ufdBMLfkESVbRLE/YCIjyytDLFxyHvEhEqVRjY4LTpMdPUYcksukXBAsaMmHolYS88SqCedB/DJc0vc24MEMKn2NCppRQtnRlBBA5c1/gKWf0ETVGbN9B3nwDdj4hJsbewc8+715660wUf57rOs5WUNSs4Do0azK1EeTNY2gfsliq2vetwulTFEuTnciLXVXwRfWHoxv4D9KX3kI62INgTN4lGA8pjU+C0WPEoRTD+SyKMRClTuTnjo/8wch7jmVa2h50xC3tyrRe5w9sKThbxdwdTNxlpo6DlOw0Oy3kBOZQjBzgGbZ90OzU9a5eg352OvvMzuqBjiE9wfr8FAfPilmz08hq2a2nLXufKq918MbE3vZ/ynZs0Y+HLZMTW15ny7Zl53ZsAb3XgHwFNGo1zmCcJpgIxe/yqmbNgMi/OQQfL+HA6BZYRl/Cq+q4peH2zjT8INeEpxvsl26K3ffd+QzcBZpjy3EE44Br6vrEabuduON6zDbd9iLl5vd/Td7d/Kb2+h7+V+pmT5iuKBQuzpfR9zJMgpFM4ZVQieafTH7k+lIqmNZUrmpIwFmK47A99W76Q4oDZY8eiv1ojdBJ69UHNn2XGgY6Gga0AQ0zBzTM3VzDRLf+PlhGsP7Malz+Aw==&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 60 40 Q 60 40 143.63 40" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 148.88 40 L 141.88 43.5 L 143.63 40 L 141.88 36.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 0 16 C 0 -5.33 60 -5.33 60 16 L 60 64 C 60 85.33 0 85.33 0 64 Z" fill="#d5e8d4" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><path d="M 0 16 C 0 32 60 32 60 16" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="29.5" y="55">diagram</text></g><path d="M 270 40 Q 270 40 343.63 40" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 348.88 40 L 341.88 43.5 L 343.63 40 L 341.88 36.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><rect x="150" y="10" width="120" height="60" rx="9" ry="9" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="209.5" y="36.5">diagram compiler</text><text x="209.5" y="50.5">(Arrowgrams)</text></g><path d="M 410 40 Q 410 40 503.63 40" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 508.88 40 L 501.88 43.5 L 503.63 40 L 501.88 36.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 350 16 C 350 -5.33 410 -5.33 410 16 L 410 64 C 410 85.33 350 85.33 350 64 Z" fill="#f5f5f5" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><path d="M 350 16 C 350 32 410 32 410 16" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="379.5" y="48">JSON</text><text x="379.5" y="62">(graph)</text></g><rect x="510" y="10" width="120" height="60" rx="9" ry="9" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-
size="12px"><text x="569.5" y="43.5">runtime</text></g></g></svg>
An example diagram can be found in 
[helloworld](https://github.com/bmfbp/bmfbp/blob/main/parts/diagram/helloworld.drawio).

This essay is intended to document the rewrite of the type transpiler using the SCN Workbench.  I skip (elide) the details of the Arrowgrams system.

The type transpiler is used for building the Arrowgrams runtime.

I will drill down into the runtime (only) in this essay:

# Layer 1

The runtime consists of two portions

1. code that was written manually
2. code that was generated automatically.

ESA means "encapsulated software assets", i.e. software components.

An ESA is either 

1. a leaf node consisting of code (in some language)
2. a recursive graph of ESA components.

In the current version of Arrowgrams, ESA leaves are written in CL (Common Lisp) and recursive graphs are saved as JSON files.

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="766px" height="221px" viewBox="-0.5 -0.5 766 221" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2021-07-09T04:32:41.112Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_16_0) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.4.2 Chrome/78.0.3904.130 Electron/7.1.4 Safari/537.36&quot; etag=&quot;qo9_kaq05GcMCL2EW88t&quot; version=&quot;12.4.2&quot; type=&quot;device&quot; pages=&quot;6&quot;&gt;&lt;diagram id=&quot;iV1_iCQHRfuDkGOBecUP&quot; name=&quot;overview&quot;&gt;1ZfBcpswEIafxjPtIR1AgMmxddx2Omly8KFuLx4ZCVAjECOEbfz0lcxiILipnYnjFB+s/bUSYnc/CUZokm6+SJwn3wWhfORYZDNCNyPHsW3L139GqWrFD8a1EEtGwKkVZmxLQbRALRmhRc9RCcEVy/tiKLKMhqqnYSnFuu8WCd6/a45jOhBmIeZD9QcjKtk/l9V2fKUsTuDWgQcdKW6cQSgSTMS6I6HpCE2kEKpupZsJ5SZ4TVx8ZN/Nfy0WxZW9sFahm2y34VU92edThuwfQdJMvezUHjyaqpp4UaLDB6aQKhGxyDCftuqnsJQraia1tdG63AqRg/ibKlVBKeBSCS0lKuXQSzdMzTvtn7ptffDAujGVZzVGBUa9TLO2R1n9R0jArxClDOkTfg5UJpYxfWo+tM+7BoaKlCpZ6XGScqzYqr84DJUb7/3a7OgGJOiEZMEiV5iXcCfCcCxxOkiiLtXcNMOKs4xQqSO4FKVukdtlk4YlDh9iadT7Umk3CnrEOJ8ILuRuKkQ8GhBX64WS4oF2egJniXx/n5wVlYpunpGeYThhlgDAg53HvgZ73XLsg5R0CbbOFH//P4FFx1xW867RGWXMdtjOasY9ynzkmd+hzPu76xWwREdi6V4SS/R3LPWpluaMawAdXTzINlF+99Gcaqa/eD8oKFlTehjFIxISiUx19Po6I6IO6jPqWENGbecApP65IA0uAekzgTs3Pu6R+IwviY87wOfb7P6uC0xs3kyHrLzgIfcGyXLRGzv9xoM8yTJTLKUnbmJR5IThoVATf+l753yf8K5fb7PSZvtlsOvrfF+h6R8=&lt;/diagram&gt;&lt;diagram name=&quot;layer 1&quot; id=&quot;aGRshp2EHKMNtcRc9eTF&quot;&gt;3VjLctowFP0az7SLdvzAxl0CIe10ktAObR5LYclGjWx5hAy4X98rW37VNJQ0JDSwQPdcSZbO0ZFkDGcSbz8KlC4vOSbMsE28NZwzw7Yty/TgRyF5iXj+sAQiQbGu1ABz+pNo0NRoRjFZdSpKzpmkaRcMeJKQQHYwJATfdKuFnHWfmqKI9IB5gFgfvaFYLut5mU3iE6HRUj/ad3UiRlVlDayWCPNNC3KmhjMRnMuyFG8nhCnyKl6uV+tv+HsYr9zru9lg8WX79fzqXdnZ+SFN6ikIksin7VpruUYs03yJLJE0JnrKMq94FDxLMFF9WYYzDiljE864KJJOGIZ2EAC+koLfk1YGewvP9SCzJkJSkGXEaJRATvIUUP14yJHtb3rtmaxVKwBLl/CYSJFDO92LZ7llP3rVWo4WcdOsAXuosWVL/lptpNddVPfdcAsFTe8hKro9rqfzUY9nWGWpKgY5o0A40DhelNRfLJhmf4GC+6gQZJZJqEb+oIqrvrtU8YqPasET2cLLzxF1GfpmRxfb7Ovi7ZDFP5oqXk+VCeyBhg24A3uYM75ESYYYy1vQjaBSkuSY2mGX+HiwSzvfXjiFdkfzztA9MY36u1SPeoJh19chF3LJI54gNm3QcZCJdb1/NVUuuNqICvAHkTLXJxjKJAeIbKm81WlVvoOy+d7V0ZlizKyCXAfl2NSAHqEKTIpnIiAP1fP1MYpERB7qsHVKdXQWhCFJ193hPb1qfk81TFEkUPxKfWPZp7a3ffivfAPci/y2HbRaqbBpVkRVu8NPvWM7tFoI+x1qv6RDq2Hucijcx+OUMvBic+y9Gan7uMqv3h54Pzy9m0h9+6vcavXdWju6bVfvWHatJvZvdv1rhz7SbY3Oz3HWVRTsddLwRY1k95T7PJ9dta0Tqbfrvmte921/8Hy3fQibN/Ei1/o/w5n+Ag==&lt;/diagram&gt;&lt;diagram name=&quot;layer 2&quot; id=&quot;UahebIe5ObPOA1C7e0kw&quot;&gt;3VnbcpswEP0az7QP9XAxlzwmjtOkkzSd8UzTPMoggxKBqBCOyddXAgHCkNR2g53GfjB7VhJoj452kUfmNFp/pSAJb4gP8cjQ/PXIPB8Zhq5rNv8RSF4ituuUQECRLxs1wBw9QwlqEs2QD9NWQ0YIZihpgx6JY+ixFgYoJU/tZkuC23dNQAA7wNwDuIveIZ+F9by0xnEJURDKW7uWdESgaiyBNAQ+eVIgczYyp5QQVl5F6ynEInhVXB7m0Q/04+r5593F4vIq+23h4PxLOdjFLl3qKVAYs7cd2iiHXgGcyXjRLGYognLKLK/iSEkW+1CMpY/MsyXCeEowoYXTXC6XhudxPGWUPELF49sL27K5ZwUpQ5yWU4yCmPsYSTgqb899cL3B118mq9cM8KULSQQZzXk/OYpdkSZXrV7ZT80aMByrxEKF/pptINddUI/dxJZfyPDuEGqrE1Lo85UqTUJZSAISAzxr0LMm6Bq3mjbXRESvYOIBMpZL2YGMEQ6FLMLSC9eI/RLdx5a07uVg4vp8rRp5ZcR8ukonYd5X4wmj6VZYVb9yfmJSezDJA0My6sFX2smNiAEawNfGM8z+pUEhBgyt2k/35jTbHUUxCuI0QRjSkcG9pi6C9QmmYOynuNgORdi4iVGafN5ReJb49gnPLj6iB4mZgpefgwvS0Z2x1ZKk6XQlqds9ktRPhpJkuVJaZM3mpx0G+MafiEsvx4hTwQN5tihJuV5UQlsA7zEoqLrNGG8G35yvwZhxNrbKky4vttalxR2MlUmHlSkvSxTx3IA4AxjnCnRHEWMwHpI734KuP+njzjUWZsHdYOnMfW8c7ZPNvIyu6o3sH5KZrqayOrH1J7Ohk5KxdVZyj5mVjG5a8hEIKIg+qGL0zQLw6Ipx/hPFNOWfWvwpteAL5d/umW5wbbpbatPU+tfSgbTpvqxN/locdUrHU/FaLPzp4arFoXRqbFQfhtZTFRo9QrUHE+rJHkLdR5t76qz9Tji0hkxt2/x2TAlVT6lI6Nv89rsqmkAcb3X18rFr+8l7qxtNvcPAIU5B9pTa4OIythSXfVRxdQ8J68OLD1k7Wk77pGJSve0cSzVOt0KA60StCXzAAMsTmCrY+CElw74QA+gue099bc+Fi2XxXGlYVyND8bV5gjGZDMYXN5sD/8Kn/G1izv4A&lt;/diagram&gt;&lt;diagram name=&quot;layer 3&quot; id=&quot;97wTBWnFWhrEvEt8tOlR&quot;&gt;7VvRcps4FP0az3QfNgMICfy4drPbhzbtTGY27aMMMmYjECPk2N6vX4GFDYgkZFuM4sGZSdAFydY9OtI998YzsEz2f3Gcbb6wkNCZY4X7Gfg4c+TLduSfwnI4WqDjHg0Rj8OjyT4b7uN/iTJayrqNQ5I3HhSMURFnTWPA0pQEomHDnLNd87E1o813zXBENMN9gKlufYhDsVFW27LONz6RONqot/ahupHg6mFlyDc4ZLuaCdzOwJIzJo5XyX5JaOG8yi9337jFH8TfX5ZRnq/v8h93D/e/Hwf78y1dTlPgJBW/dmiF5ROmW+WvDOe5tFRzFofKkZxt05AUg9kzsAhxvjk1nggXsXT5HzSOUmkTLJPWdUzpklHGy/5gvV47QSDtueDskdTuhGiFIJJ31IeRo5F9C71Xpm6f8JALmbCECH6Q/dQorpqNWsLzCtFdbUHMlW1TWwunjlgtwug09NnR8kL5+g1+B0BzvOA4zbOYEj5zkPSKJBBYfCA5vglzWrJG/iqaNM6z316Bp+17WPx0+R6Vr6IHS0XNfny1gR4KIMeyWxDNoQ6R0wHRfDCEdGpIHKwbyY9Ec77cGrLiMjjQWKIgfbhYHfH4vKLKdyscPEYlSl+3Qj5GuqEKIfFDtwsq31kBNCRNUAsDpNMEdUDgDwYB1CAg+6xOjxALLA6ZPF/OtpIfgyKEib/u3MhQ4JPV+lKksUETL3mkjQ0Y0gBLcLrFtDzfQzIkKqZvcagNFhwbLE+Dg4QydFJNxsWGRSzF9PZsXZxPmYJq52c+s+LILx34DxHioOJAvJWnFlhsRFKhSfax+F67/lEMdQNV6+NejVw2DlUjlfP9Xm/UehXNc7eyVfU7zq+Y1P8AUjqGbXlAXvKgf3xQYB6RlwZ03e6lwQnFIn5qfrxfD7TfFeQltS2TpFHBqzdEfC3yEVseW14X+ebIA3jIQ8ux28SyO6K7rtABDcUsF7wXZg3NENftyxA4JkNcPdaLU0F4QsIYC9IKOAw9xYYiGPB6hBneJU8uV48LlWq1NWyae9huEwtyn+Fy0e44zpoUel+idm6cqnX1+E9qJvuaNRNsC9exRZPraRhMoqmGl2+aaHL18GwSTc+wa3zV5M7fS2xnqmqqEHw1JoTOmDFh9TGvUzUhLR0xumqCevB2AWYNvtqdvqsdjLraHW21TwqoIovvmKaAoF4+UgrIect+ZLrEmZtXuIOdZSHnmiXO3LS6EJzqQi/hZVvGFYbgVBjqTa/xNQ6cKkM/G/X1rQwhq3ttXCjqu+rKkG2bVxqC46QPDKUJ6psKQM8gfRmaID0VMImjE8sc4+pDyO7a1gp1pBdm37E6soF5FSCk5xGkPALXLI9s17QSENKzA5M+qgNmXA0I6VmFSR89x6/xBRKCo0RxVySQEOob+fmjRn563uKaBBI0rwqExsk9mEqTvnkEb9Q8AtLzCJNAOrHMM658hKZ/YvhJYnp9Mxdg1LKup2cuBCekWHqYPhbfNOt/bg3GD18rVwx4Csnm+Rub5b3a917B7X8=&lt;/diagram&gt;&lt;diagram name=&quot;types&quot; id=&quot;MBVU_OYnusstwsUWe-6x&quot;&gt;7VnZctowFP0aHmFsy+tjy9JOQ9p0MtMsLxlhC1uJjFxZBtyvr4xlvBGSQCA06RO+R1frPef6WnRAP1x+YTAKzqmHSEdTvGUHDDqapqqKKX4yJM2RrmqCHPEZ9qRXCVziP0iCikQT7KG45sgpJRxHddClsxlyeQ2DjNFF3W1KSX3WCPqoBVy6kLTRK+zxYL0xpWz4irAfyKltQzaEsHCWQBxAjy4qEBh2QJ9RyvOncNlHJDu94lzCZDied5PR3RlUHBqHA1PH3Xyw0Uu6rLfA0Iy/7tDAkXvjaXFgyBPnJ03KeEB9OoNkWKKfGU1mHsqGVYRV+owpjQSoCvAecZ5KMsCEUwEFPCSyFS0xv8669wxp3cjBsufBsmqk0vBgHKzmzAbIF52ttBHkJ05I+sU0YS7a4qdr6/gKZSAaIs5S0ZEhAjme12eFkqH+2m/d9YJisR5NkXLSLSPvIsXkFCIphuCQ+YjLXmUsPzEG04pblDnEj89jKI15jAY1nlpX3V885CsorMqZlNCKbi+gnq68BfXeA40M9TRp1FrXUWik/qfRjjQCJ0qj5rqOQiMtn3MOSVLQaBmxjibqH6DmLyAOeRqJWqbEegTHUYt/olCIskc3JVjQjAnHSU648aQg0AS6D/6Khj8SLtyQxKeYkD4llK2GAh5E9tQVeMwZfUCVFtO10WS6Zt8cMY6WO/CvTavHXgqWpMeiLKNMCQXVAqrBoioRKzHcGqLbb/2rBRje4gGC5zc4uhmxX903eV8UpYpaLVTWZcsJlCrWYZKDWdTHaVHON+P6StmhNZGqHUHu1m5yv4/p7IPIvQz4EfQ+/TkeXQxC5Y/z/S54WJz99hP739E7jaCLeWYZyjEULz/AcwFuczT3TA3PDd/WZTYkttJUz4vJQXVkINvTN+nI1ibANA+oI1VtJk6trSP7QDraHAj9dISkbVeSOHiWXleNiv4ys+y2sop+B5ec+UzJ7V2q7xdp43Qibb3zSO9dd+0XabOVXLPEWqlVOIOzOMJE5NEmJ8qIb0idSBXJ09qUOh3TAvCQqVMDzRIEtFNnUR7Wcqd5sNxpvaWiPtz9qLPbjcSGmyi9Z9i2IJTm6Kpq2fVhLadXtpm6U58k3/3xL2Gbm3+pv7rXd5Mwy78ycvfyHyEw/As=&lt;/diagram&gt;&lt;diagram name=&quot;ASC Exsmple&quot; id=&quot;85zO9aYcwFrSI-2Ip35K&quot;&gt;7VnLcpswFP0aL+MB8TAsUydNppM2ncmiTncCZFAiIypEAv36SkaYZ5w4jh+ZemXp6OoK6Z57uBYjY7rIrxhMou80QGQEtCAfGRcjAHRds8WPRIoSOdNto0RChgNlVQN3+C9SoKbQDAcobRlySgnHSRv0aRwjn7cwyBh9bpvNKWmvmsAQ9YA7H5I++gsHPFptTKsHrhEOI7W0Y6mBBayMFZBGMKDPDci4HBlTRikvW4t8iog8vepc8HXye2rBb7ehNiPmlUOsWX5WOvu6yZTVFhiK+ce6BmprvKjOCwXi+FSXMh7RkMaQXNboF0azOEDSqyZ6tc0NpYkAdQE+IM4LxQWYcSqgiC+IGkU55jM5fWyp3r1yJtsXebNTqE4A02i5pnRAE+hjLoeA9MBRzm/bULktuZcOC145QmWX0oz5aI2dtYq/yBxEF4izQsxjiECOn9qLQsXgcGW3mvqTYvE4QFPpZk6scopKNrdKosoFhyxEXM2qY33OGCwaZok0SF9ex9I661gd6rz2XG170SifoOo1zqSGlnTcgJrGIaj5X9DM0o+TZr3n2gfNzBPNdkUz40hp1n2ufdBMLfkESVbRLE/YCIjyytDLFxyHvEhEqVRjY4LTpMdPUYcksukXBAsaMmHolYS88SqCedB/DJc0vc24MEMKn2NCppRQtnRlBBA5c1/gKWf0ETVGbN9B3nwDdj4hJsbewc8+715660wUf57rOs5WUNSs4Do0azK1EeTNY2gfsliq2vetwulTFEuTnciLXVXwRfWHoxv4D9KX3kI62INgTN4lGA8pjU+C0WPEoRTD+SyKMRClTuTnjo/8wch7jmVa2h50xC3tyrRe5w9sKThbxdwdTNxlpo6DlOw0Oy3kBOZQjBzgGbZ90OzU9a5eg352OvvMzuqBjiE9wfr8FAfPilmz08hq2a2nLXufKq918MbE3vZ/ynZs0Y+HLZMTW15ny7Zl53ZsAb3XgHwFNGo1zmCcJpgIxe/yqmbNgMi/OQQfL+HA6BZYRl/Cq+q4peH2zjT8INeEpxvsl26K3ffd+QzcBZpjy3EE44Br6vrEabuduON6zDbd9iLl5vd/Td7d/Kb2+h7+V+pmT5iuKBQuzpfR9zJMgpFM4ZVQieafTH7k+lIqmNZUrmpIwFmK47A99W76Q4oDZY8eiv1ojdBJ69UHNn2XGgY6Gga0AQ0zBzTM3VzDRLf+PlhGsP7Malz+Aw==&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="495" y="0" width="270" height="220" rx="33" ry="33" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="629.5" y="18.5">runtime</text></g><path d="M 660 86 C 660 64.67 720 64.67 720 86 L 720 134 C 720 155.33 660 155.33 660 134 Z" fill="#f5f5f5" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><path d="M 660 86 C 660 102 720 102 720 86" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="689.5" y="125">ESA</text></g><path d="M 555 86 C 555 64.67 615 64.67 615 86 L 615 134 C 615 155.33 555 155.33 555 134 Z" fill="#d5e8d4" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><path d="M 555 86 C 555 102 615 102 615 86" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="584.5" y="111">Code</text><text x="584.5" y="125">Manually</text><text x="584.5" y="139">Written</text></g><path d="M 60 110 Q 60 110 143.63 110" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 148.88 110 L 141.88 113.5 L 143.63 110 L 141.88 106.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 0 86 C 0 64.67 60 64.67 60 86 L 60 134 C 60 155.33 0 155.33 0 134 Z" fill="#d5e8d4" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><path d="M 0 86 C 0 102 60 102 60 86" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="29.5" y="125">diagram</text></g><path d="M 270 110 Q 270 110 353.63 110" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 358.88 110 L 351.88 113.5 L 353.63 110 L 351.88 106.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><rect x="150" y="80" width="120" height="60" rx="9" ry="9" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="209.5" y="106.5">diagram compiler</text><text x="209.5" y="120.5">(Arrowgrams)</text></g><path d="M 420 110 L 488.63 110" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 493.88 110 L 486.88 113.5 L 488.63 110 L 486.88 106.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 360 86 C 360 64.67 420 64.67 420 86 L 420 134 C 420 155.33 360 155.33 360 134 Z" fill="#f5f5f5" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><path d="M 360 86 C 360 102 420 102 420 86" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="389.5" y="118">JSON</text><text x="389.5" y="132">(graph)</text></g></g></svg>

# Layer 2

The automatically generated code portion of the runtime is transpiled using

1. A specification of the runtime, [esa.dasl](https://github.com/bmfbp/bmfbp/blob/main/build_process/esa/esa.dsl)
2. A specification of the types used within the runtime [exprtypes.dsl](https://github.com/bmfbp/bmfbp/blob/main/build_process/esa-transpiler/exprtypes.dsl)

This note drills down onto (2) exprtypes.dsl and shows how to replace it using the [SCN workbench](https://github.com/guitarvydas/seml/tree/master/examples/esa-transpiler.)

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="776px" height="441px" viewBox="-0.5 -0.5 776 441" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2021-07-09T04:22:32.452Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_16_0) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.4.2 Chrome/78.0.3904.130 Electron/7.1.4 Safari/537.36&quot; etag=&quot;jvgC4_fCsQMT_A9MFQ62&quot; version=&quot;12.4.2&quot; type=&quot;device&quot; pages=&quot;6&quot;&gt;&lt;diagram id=&quot;iV1_iCQHRfuDkGOBecUP&quot; name=&quot;overview&quot;&gt;1VdNc9owEP01zLSHdGzLNuRaQtvppMmBQ9NeGGGtbTWy5REyYH59Zbz4A9NAMgVac0D7tFpJ+/ZJ9oCMk/VnRbP4m2QgBo7F1gNyN3Ac27Z881ciRYUMfbcCIsUZOjXAlG8AQQvRnDNYdBy1lELzrAsGMk0h0B2MKiVXXbdQiu6sGY2gB0wDKvrod850XO/Lajq+AI9inHrkYUdCd84ILGLK5KoFkcmAjJWUumol6zGIMnm7vPjEfnj6OZstbuyZtQzceLMJbqpgn14zpN6CglT/3dAebk0Xu3wBM+lDUyody0imVEwa9GOQqyWUQW1jNC73UmYI/gKtCywFmmtpoFgnAnthzfVTq/3DtK0PHlp3ZeVZO6NAo1pmubY9Vo+kBP0WMlcBvODnYGVSFcFL8UjNuxEMyAS0Ksw4BYJqvuwujmLlRrVfw45pIEGvIAsXuaQix5kYp5GiSY9EU6pZ2QwKwVMGymRwFXMN04xu07AyWu+SMpe5cWT38xqgwXOkSvQx1yYKIB5yIcZSSLWdiTAPRsw1+EIr+QytnpEzJ75fc7cEpWH9Bvb62cYoI9QlHkz2LdqrRuY+QnFb4NaZ6PH/Ey2ZnKviqW20RpVmM2xr7cbtMR965e8Q8/72uYBqyYmqda+pWvJn1ZpLL8m4MPrcrxxVyfGw5k7IfChT3cKr54xadEhXjI7VF6PtHFCjfy41jq6hxjcq69w6cU/UyfCaOnF7Ovk6fXx4F5Wvpe+veMP9g2pzyfGrb3TJq2/Y407lqeYJHDnYjlC2z0QYOkFwiAnmz33vnO8a3u3lzjdjNh8V277WpxmZ/AY=&lt;/diagram&gt;&lt;diagram name=&quot;layer 1&quot; id=&quot;aGRshp2EHKMNtcRc9eTF&quot;&gt;3VjLctsgFP0az7SLdvSwZHUZO047nSRux2keSyywRIOEBiNH6tf3IqFX5cZ1GiVu7YW55wKCcziAPLJnUfZRoCS84JiwkWXgbGSfjizLNA0XfhSSl4jrTUogEBTrSg2wpD+IBg2NphSTTaei5JxJmnRBn8cx8WUHQ0Lwh261NWfdpyYoID1g6SPWR28olmE9L6NJfCI0CPWjPUcnIlRV1sAmRJg/tCB7PrJngnNZlqJsRpgir+LlerO9wt/W0ca5vluMV1+yr2eX78rOzg5pUk9BkFg+b9dayy1iqeZLpLGkEdFTlnnFo+BpjInqyxzZ0zVlbMYZF0XSXq/Xlu8DvpGC35NWBrsr13EhsyVCUpDlhNEghpzkCaD68ZAj2S967ZmsWSsAS5fwiEiRQzvdi2s6ZT961Zq2FvGhWQPWRGNhS/5abaTXXVD33XALBU3vISo6Pa7ny5Mez7DKElX0c0aBcKBxuiqpP18xzf4K+fdBIcgilVCN/EYVR313qeIWH9WCx7KFl58BdZl4RkcXy+jr4u6QxRtMFbenygz2QEAuUJwixtTgbwSVksRDaoUd4uHxLq08a2UXWg3mlYlzZJr0d6Ue9QTDLq9DLmTIAx4jNm/QqZ+Kbb1fNVXOudp4CvA7kTLXJxZKJQeIZFTe6rQq30HZeO/o6FQxZlRBroNybGpAT1AFJsVT4ZPH6nn62EQiII912DqVOjoLwpCk2+7wnl81r6capigQKPpPfWNax7aXffinfAPci/y2HbRaqbBpVkRVu8NPuaEdWi2E/Q61XtOh1TB3ORTu31FCGXjxsIvf8V0x6mtdZUuzb8vaum1fukP5sprY3/nyj634RFs1Or/EoVZRsNcyk1d1jNVT7vNycQnIm0C9Lr8d8mg7Qm+NX+76DmHzal3kWn9Q2POf&lt;/diagram&gt;&lt;diagram name=&quot;layer 2&quot; id=&quot;UahebIe5ObPOA1C7e0kw&quot;&gt;3VnbcpswEP0az7QP9XAxlzwmjtOkkzSd8UzTPMoggxKBqBCOyddXAgHCkNR2g53GfjB7VhJoj452kUfmNFp/pSAJb4gP8cjQ/PXIPB8Zhq5rNv8RSF4ituuUQECRLxs1wBw9QwlqEs2QD9NWQ0YIZihpgx6JY+ixFgYoJU/tZkuC23dNQAA7wNwDuIveIZ+F9by0xnEJURDKW7uWdESgaiyBNAQ+eVIgczYyp5QQVl5F6ynEInhVXB7m0Q/04+r5593F4vIq+23h4PxLOdjFLl3qKVAYs7cd2iiHXgGcyXjRLGYognLKLK/iSEkW+1CMpY/MsyXCeEowoYXTXC6XhudxPGWUPELF49sL27K5ZwUpQ5yWU4yCmPsYSTgqb899cL3B118mq9cM8KULSQQZzXk/OYpdkSZXrV7ZT80aMByrxEKF/pptINddUI/dxJZfyPDuEGqrE1Lo85UqTUJZSAISAzxr0LMm6Bq3mjbXRESvYOIBMpZL2YGMEQ6FLMLSC9eI/RLdx5a07uVg4vp8rRp5ZcR8ukonYd5X4wmj6VZYVb9yfmJSezDJA0My6sFX2smNiAEawNfGM8z+pUEhBgyt2k/35jTbHUUxCuI0QRjSkcG9pi6C9QmmYOynuNgORdi4iVGafN5ReJb49gnPLj6iB4mZgpefgwvS0Z2x1ZKk6XQlqds9ktRPhpJkuVJaZM3mpx0G+MafiEsvx4hTwQN5tihJuV5UQlsA7zEoqLrNGG8G35yvwZhxNrbKky4vttalxR2MlUmHlSkvSxTx3IA4AxjnCnRHEWMwHpI734KuP+njzjUWZsHdYOnMfW8c7ZPNvIyu6o3sH5KZrqayOrH1J7Ohk5KxdVZyj5mVjG5a8hEIKIg+qGL0zQLw6Ipx/hPFNOWfWvwpteAL5d/umW5wbbpbatPU+tfSgbTpvqxN/locdUrHU/FaLPzp4arFoXRqbFQfhtZTFRo9QrUHE+rJHkLdR5t76qz9Tji0hkxt2/x2TAlVT6lI6Nv89rsqmkAcb3X18rFr+8l7qxtNvcPAIU5B9pTa4OIythSXfVRxdQ8J68OLD1k7Wk77pGJSve0cSzVOt0KA60StCXzAAMsTmCrY+CElw74QA+gue099bc+Fi2XxXGlYVyND8bV5gjGZDMYXN5sD/8Kn/G1izv4A&lt;/diagram&gt;&lt;diagram name=&quot;layer 3&quot; id=&quot;97wTBWnFWhrEvEt8tOlR&quot;&gt;7Vtdc5s4FP01ntl9aIYvCXjcuNndhzbtTGY27aMMMtAIxAg5tvvrK2FhY8Q2tmMMiSEzCbr6MOjoSPfcG0/sabr6h6E8/kxDTCaWEa4m9seJJS7TEn+kZb2xQNfbGCKWhBuTuTM8JD+xMhrKukhCXOw15JQSnuT7xoBmGQ74ng0xRpf7zeaU7H9qjiKsGR4CRHTrYxLyWFlNw9hV/IuTKFYf7QFVkaKqsTIUMQrpsmay7yb2lFHKN3fpaoqJnLxqXu6/MoM98v8+T6OimN8X3+8fHz5sBvv7mC7bV2A44+cd2tkM/YzIQs1XjopCWKp35utqIhldZCGWg5kT+3YZJxw/5CiQtUuxdIQt5ilR1SEq4m3bZ8x4IhD5iyRRJmycytbzhJApJZSVw9vz+dwKAmEvOKNPuFYTwhkEUNSoZxWj4VUD3BdmxtzCJdY5pinmbC36qVEc9bJqhfsV4MvaevGVLa4tlW1HpNZotB16h4O4UVAcAYtta7hwhrIiTwhmEwsS8QS3M3kXybs/cIFuwoKU3BK/ZJEkRf7n60BsIgTkTxtCsLxkD5rxmn1zNZdDVzBahtkA0gc6kFYLkH5nOOr8EjAZN4JkqYaN2F9yeRusSSJAYi8DNNug+Wm2NaDgKSox/rLgYhTcjmQIsBc6bUh61syGXXINNiCCOtdgC0JeZwgBDSG8yls4FiKO+DoXR5lWVXKtTzgR9uatWycMPDybX4qApr0Prjhj+0YXauimKFsgUjocIe4RtKHvprCJJegbS1dDC4fC1VNFynhMI5ohcrez3u7OO0OUdm0+UemDlBP4A3O+Vn4rWojzcw9evEr4t9r9dznUDVCljys1cllYV4VMvO+3eqHWSxZ33cpS1W/zfvKlTgBSTAxdsAD/bgaV584Ri/DvBnSc9qXBMEE8ed5/vPMD7bU5pam+7+IskvQ6n6PaoCg2xUHptlHUh66NujwmLbNJP7PFKW3zZWBX/HPst8K/rnnkOIfyCPTJI0d3PpOMY5biMEEct7s4b/NE7IqGtnuAR+Ne8hR0dH9VKXZTg+4dK3Z/cJLd0V1NIfXMK5Z6oCnH+9Z6jqtBNGq9U8H1hqb1HN1tHLXeaUztX+w5/ltxNocq9ioEX3RSgdWnk1o95jWLPajFWnoXe0D3Ji/Av845YR3KCbtXTlgaJ0bhdhylPGtowg3oKT0l3KwzbmpDF27+8HKtoDVHZ12xcPOHlqQDY5LubOCaxuCydGDM0p2Lqv0rNzCm6V7rpR6apoNG+9q4kJc6puks0xxeng70EzoZKJngoWEQ+D9IX4ZMUA+DjJLvSC5ag0vWQbNti5SaT8+lv1/NZ9rDy9ZBPcQiRJ99xaLPdIaWroN6xGRUfSejO7h8HdTjLqPqO5Gr/cs+CHrxOt+R7IPwUE/V69VT1YM11yf7wPAydrCfuMtQyXRoDMXtNYYC9RjKKPuO5KI7uFQfHP955ZX0dQ+N2ti9JupdPWrDGcZy6SHyJL+pebbDrzP6eFo6qMOjTBR335cu62rfOrfvfgE=&lt;/diagram&gt;&lt;diagram name=&quot;types&quot; id=&quot;MBVU_OYnusstwsUWe-6x&quot;&gt;7VlZc9owEP41PML4Ph4bjnYa0qaTmSbkJSNsYSuRkSvLgPPrK9syvgg5CEfTPKH9tNLK2m8/FtNR+8HqKwWhf0FciDuK5K466qCjKLIsGfwjRZIc6VoC8ChyhVMJXKFHKEBJoDFyYVRzZIRghsI66JD5HDqshgFKybLuNiO4HjUEHmwBVw7AbfQaucxfP5dUTnyDyPNFaEsXEwEonAUQ+cAlywqkDjtqnxLC8lGw6kOcXl5xL0E8HC+68ejuHEg2iYKBoaFuvtnoNUvWj0DhnL3v1qotno0lxYVBl9+fMAllPvHIHOBhiZ5REs9dmG4rcav0GRMSclDm4D1kLBFkADEjHPJZgMUsXCF2ky7v6cKaiM3S8WBVNRJhuCDys5jpBvmh05M2kvzMDQm/iMTUgVv8NGWdX14YkASQ0YQvpBADhhb1qEAw1Fv7rZdeEsTPo0iimjRTz5eIWrKLIim2YIB6kIlVZS6/UAqSiluYOkRPx9GlRhy9QY3nzlX354P8BIVVuZMSyuj2Cupp0jGo9xFopMunSaPWuQ5CI/mTRm+kkXqiNGqe6yA0UvKYC4DjgkarkHYUA/MUnk3TkceyzDPAkpC3NK2pHkZR2GIjbxvCdOgkGHHSUe649BGDVyHIsr7kfVedXNOcnePpGgDOg5dx9mfM+C5Q4DOEcZ9gQrNIqgugNXM4HjFKHmBlxnAsOJ2tqbqAlMHVG8ja5uBT3yCm4NKy7LkMAfnVbqtBuSprKwnfms/b7/3rpTq8RQMILiYonIzo7+5RvlyKvqYYT2o9zgn0NeZ+lMQomumk6P2beX0nKWkFkpUDaIP5HtpwH5H5pzbU2XEAcZj9Go8uB4H0aP+48x+W53+82Pp3xIFwHiCWWrp0CHlQc8e8Wrc5GjvqyEvTt/WYjXrMKq/nRviYZaZDy9U2lZmlTFXD2GOZyXJThJV2mVl7KrPNedJOp86U7YXGL54mN1WjUp6pWS7LrGLd3ivSeGFF7vwbYbdM66eTafODZ3rnHm63TBst7U11t93wMArmUYgwV9smNcrEy88rcUNgocwl1twksLZhqmCfAquozT5GbQts0ZDWFNbYm8Kax6y7/+71rf22FyYbXpRpPd2yOKEUW5Nl06pva9q9cs7Q7HqQ/OkP/464+fCv9Zd3+qXGzfKflty9/L9KHf4F&lt;/diagram&gt;&lt;diagram name=&quot;ASC Exsmple&quot; id=&quot;85zO9aYcwFrSI-2Ip35K&quot;&gt;7VnLcpswFP0aL+MB8TBepk6aTCdtOuNFne4EyKBERlSI2PTrK4EwL8eO42emXiEdXT3vuYeL6Bmj2eKOwTj8Tn1EekDzFz3jpgeArmu2eEgkK5ArRwEBw74yqoAx/osUqCk0xT5KGoacUsJx3AQ9GkXI4w0MMkbnTbMpJc1ZYxigDjD2IOmiv7DPw+W+tKrhHuEgVFM7lmqYwdJYAUkIfTqvQcZtzxgxSnlRmi1GiMjDK88F38e/Rxb89hhoE2LeOcSaLK6Kwb5u02W5BYYivt+hgdoaz8rzQr44PlWljIc0oBEktxX6hdE08pEcVRO1yuaB0liAugCfEeeZ4gJMORVQyGdEtaIF5hPZvW+p2pMaTJZvFvVKpio+TMJ8TjkAjaGHuWwCcgSOFvyxCRXbkntpsWDDESq7hKbMQ2vsrKX/ReAgOkOcZaIfQwRy/NqcFCoGB0u7ZdefFIvlAE1Fmzmwii4q1oZlEJVDcMgCxFWvytfXjMGsZhZLg+TteSytNY/Vos6mdTXtRaFYQVmrnUkF5XTcgprGKaj5X9DM0s+TZp11HYNm5oVmh6KZcaY0a6/rGDRTU75CkpY0W8SsB2wiHPjFlaWA58zgkGexyJg6TX2Ck7jDVpGVxLLoZQQLUjJhOA8xR2NBIYnPRVrXJJ9bsPfBXQLQewlyTj+mXIyCFD7FhIwooSyfyfAhcqaewBPO6Auqtdieg9zpFlR+RUy0fYDMXZK+9YoaKLLNq6TPVlBYT/danKzTusaI7R1unzKzKstPjSzrU2RWg4NokV2m+1n5ddJ2/J7EqDORDo6gLoM9qMtzQqOLurxPXSr6nEpenM8iLyu81PL81PGQt9LzrmOZlnYE0RkWdoUGrBsP7KhOO/l8uDLK83ju+wk5ZfBayPHNVS50gGvY9kmDV9fb2g+6wescM3jLBZ1D9IL14SsOnmWTeqUW9LJadctrnyrsdfDOuN/1A2k3tujnw5bBhS2b2bJrCrsbW0DnLSHfEN2EjzMYJTEm4r3QpldFHn3zO+Ojjtq/0AOjnaUZXaEv8/GG0tsHU/qT3GJeLtjfusgefuxKasVVpdm3HEcwDgxNXR84zWEHw37VZpvD5iTF5o9/i9/e/Lb2+hG+ZHWzI193FIohrnPvuykmfk+GsP0npbmM5eKm1dWsbBJwmuAoEM/x6IeUAcpeXBR54RrF0zYr3vJHoH5QMWtlrUBbIWbmCjEbbi9molr9xyxcWf0NNm7/AQ==&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="500" y="0" width="275" height="220" rx="33" ry="33" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="637" y="18.5">runtime</text></g><path d="M 680 250 L 680 156.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 680 151.12 L 683.5 158.12 L 680 156.37 L 676.5 158.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="597.5" y="250" width="165" height="190" rx="24.75" ry="24.75" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="679.5" y="268.5">transpiler</text><text x="679.5" y="282.5">(esa.dsl to esa.lisp)</text></g><path d="M 650 86 C 650 64.67 710 64.67 710 86 L 710 134 C 710 155.33 650 155.33 650 134 Z" fill="#f5f5f5" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><path d="M 650 86 C 650 102 710 102 710 86" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="679.5" y="125">ESA</text></g><path d="M 560 86 C 560 64.67 620 64.67 620 86 L 620 134 C 620 155.33 560 155.33 560 134 Z" fill="#d5e8d4" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><path d="M 560 86 C 560 102 620 102 620 86" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="589.5" y="111">Code</text><text x="589.5" y="125">Manually</text><text x="589.5" y="139">Written</text></g><path d="M 60 110 Q 60 110 143.63 110" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 148.88 110 L 141.88 113.5 L 143.63 110 L 141.88 106.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 0 86 C 0 64.67 60 64.67 60 86 L 60 134 C 60 155.33 0 155.33 0 134 Z" fill="#d5e8d4" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><path d="M 0 86 C 0 102 60 102 60 86" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="29.5" y="125">diagram</text></g><path d="M 270 110 Q 270 110 353.63 110" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 358.88 110 L 351.88 113.5 L 353.63 110 L 351.88 106.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><rect x="150" y="80" width="120" height="60" rx="9" ry="9" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="209.5" y="106.5">diagram compiler</text><text x="209.5" y="120.5">(Arrowgrams)</text></g><path d="M 420 110 L 493.63 110" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 498.88 110 L 491.88 113.5 L 493.63 110 L 491.88 106.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 360 86 C 360 64.67 420 64.67 420 86 L 420 134 C 420 155.33 360 155.33 360 134 Z" fill="#f5f5f5" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><path d="M 360 86 C 360 102 420 102 420 86" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="389.5" y="118">JSON</text><text x="389.5" y="132">(graph)</text></g><path d="M 515 345 L 591.63 345" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 596.88 345 L 589.88 348.5 L 591.63 345 L 589.88 341.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 455 321 C 455 299.67 515 299.67 515 321 L 515 369 C 515 390.33 455 390.33 455 369 Z" fill="#d5e8d4" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><path d="M 455 321 C 455 337 515 337 515 321" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="484.5" y="360">esa.dsl</text></g><path d="M 650 341 C 650 319.67 710 319.67 710 341 L 710 389 C 710 410.33 650 410.33 650 389 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><path d="M 650 341 C 650 357 710 357 710 341" fill="none" stroke="#6c8ebf" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="679.5" y="366">expr</text><text x="679.5" y="380">datatypes</text><text x="679.5" y="394">.json</text></g></g></svg>

# Layer 3

The [exprtypes transpiler](https://github.com/bmfbp/bmfbp/tree/main/build_process/esa-transpiler) is built using

1. A type specification
2. A pipeline of 4 passes of code (written in [PASM](https://github.com/guitarvydas/parsing-assembler)) 
3. A tree walker.

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="2091px" height="241px" viewBox="-0.5 -0.5 2091 241" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2021-07-09T04:25:35.917Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_16_0) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.4.2 Chrome/78.0.3904.130 Electron/7.1.4 Safari/537.36&quot; etag=&quot;aLPFysF7nrSzX35yLbHe&quot; version=&quot;12.4.2&quot; type=&quot;device&quot; pages=&quot;6&quot;&gt;&lt;diagram id=&quot;iV1_iCQHRfuDkGOBecUP&quot; name=&quot;overview&quot;&gt;1VdNc9owEP01zLSHdGzLNuRaQtvppMmBQ9NeGGGtbTWy5REyYH59Zbz4A9NAMgVac0D7tFpJ+/ZJ9oCMk/VnRbP4m2QgBo7F1gNyN3Ac27Z881ciRYUMfbcCIsUZOjXAlG8AQQvRnDNYdBy1lELzrAsGMk0h0B2MKiVXXbdQiu6sGY2gB0wDKvrod850XO/Lajq+AI9inHrkYUdCd84ILGLK5KoFkcmAjJWUumol6zGIMnm7vPjEfnj6OZstbuyZtQzceLMJbqpgn14zpN6CglT/3dAebk0Xu3wBM+lDUyody0imVEwa9GOQqyWUQW1jNC73UmYI/gKtCywFmmtpoFgnAnthzfVTq/3DtK0PHlp3ZeVZO6NAo1pmubY9Vo+kBP0WMlcBvODnYGVSFcFL8UjNuxEMyAS0Ksw4BYJqvuwujmLlRrVfw45pIEGvIAsXuaQix5kYp5GiSY9EU6pZ2QwKwVMGymRwFXMN04xu07AyWu+SMpe5cWT38xqgwXOkSvQx1yYKIB5yIcZSSLWdiTAPRsw1+EIr+QytnpEzJ75fc7cEpWH9Bvb62cYoI9QlHkz2LdqrRuY+QnFb4NaZ6PH/Ey2ZnKviqW20RpVmM2xr7cbtMR965e8Q8/72uYBqyYmqda+pWvJn1ZpLL8m4MPrcrxxVyfGw5k7IfChT3cKr54xadEhXjI7VF6PtHFCjfy41jq6hxjcq69w6cU/UyfCaOnF7Ovk6fXx4F5Wvpe+veMP9g2pzyfGrb3TJq2/Y407lqeYJHDnYjlC2z0QYOkFwiAnmz33vnO8a3u3lzjdjNh8V277WpxmZ/AY=&lt;/diagram&gt;&lt;diagram name=&quot;layer 1&quot; id=&quot;aGRshp2EHKMNtcRc9eTF&quot;&gt;3VjLctsgFP0az7SLdvSwZHUZO047nSRux2keSyywRIOEBiNH6tf3IqFX5cZ1GiVu7YW55wKCcziAPLJnUfZRoCS84JiwkWXgbGSfjizLNA0XfhSSl4jrTUogEBTrSg2wpD+IBg2NphSTTaei5JxJmnRBn8cx8WUHQ0Lwh261NWfdpyYoID1g6SPWR28olmE9L6NJfCI0CPWjPUcnIlRV1sAmRJg/tCB7PrJngnNZlqJsRpgir+LlerO9wt/W0ca5vluMV1+yr2eX78rOzg5pUk9BkFg+b9dayy1iqeZLpLGkEdFTlnnFo+BpjInqyxzZ0zVlbMYZF0XSXq/Xlu8DvpGC35NWBrsr13EhsyVCUpDlhNEghpzkCaD68ZAj2S967ZmsWSsAS5fwiEiRQzvdi2s6ZT961Zq2FvGhWQPWRGNhS/5abaTXXVD33XALBU3vISo6Pa7ny5Mez7DKElX0c0aBcKBxuiqpP18xzf4K+fdBIcgilVCN/EYVR313qeIWH9WCx7KFl58BdZl4RkcXy+jr4u6QxRtMFbenygz2QEAuUJwixtTgbwSVksRDaoUd4uHxLq08a2UXWg3mlYlzZJr0d6Ue9QTDLq9DLmTIAx4jNm/QqZ+Kbb1fNVXOudp4CvA7kTLXJxZKJQeIZFTe6rQq30HZeO/o6FQxZlRBroNybGpAT1AFJsVT4ZPH6nn62EQiII912DqVOjoLwpCk2+7wnl81r6capigQKPpPfWNax7aXffinfAPci/y2HbRaqbBpVkRVu8NPuaEdWi2E/Q61XtOh1TB3ORTu31FCGXjxsIvf8V0x6mtdZUuzb8vaum1fukP5sprY3/nyj634RFs1Or/EoVZRsNcyk1d1jNVT7vNycQnIm0C9Lr8d8mg7Qm+NX+76DmHzal3kWn9Q2POf&lt;/diagram&gt;&lt;diagram name=&quot;layer 2&quot; id=&quot;UahebIe5ObPOA1C7e0kw&quot;&gt;3VnbcpswEP0az7QP9XAxlzwmjtOkkzSd8UzTPMoggxKBqBCOyddXAgHCkNR2g53GfjB7VhJoj452kUfmNFp/pSAJb4gP8cjQ/PXIPB8Zhq5rNv8RSF4ituuUQECRLxs1wBw9QwlqEs2QD9NWQ0YIZihpgx6JY+ixFgYoJU/tZkuC23dNQAA7wNwDuIveIZ+F9by0xnEJURDKW7uWdESgaiyBNAQ+eVIgczYyp5QQVl5F6ynEInhVXB7m0Q/04+r5593F4vIq+23h4PxLOdjFLl3qKVAYs7cd2iiHXgGcyXjRLGYognLKLK/iSEkW+1CMpY/MsyXCeEowoYXTXC6XhudxPGWUPELF49sL27K5ZwUpQ5yWU4yCmPsYSTgqb899cL3B118mq9cM8KULSQQZzXk/OYpdkSZXrV7ZT80aMByrxEKF/pptINddUI/dxJZfyPDuEGqrE1Lo85UqTUJZSAISAzxr0LMm6Bq3mjbXRESvYOIBMpZL2YGMEQ6FLMLSC9eI/RLdx5a07uVg4vp8rRp5ZcR8ukonYd5X4wmj6VZYVb9yfmJSezDJA0My6sFX2smNiAEawNfGM8z+pUEhBgyt2k/35jTbHUUxCuI0QRjSkcG9pi6C9QmmYOynuNgORdi4iVGafN5ReJb49gnPLj6iB4mZgpefgwvS0Z2x1ZKk6XQlqds9ktRPhpJkuVJaZM3mpx0G+MafiEsvx4hTwQN5tihJuV5UQlsA7zEoqLrNGG8G35yvwZhxNrbKky4vttalxR2MlUmHlSkvSxTx3IA4AxjnCnRHEWMwHpI734KuP+njzjUWZsHdYOnMfW8c7ZPNvIyu6o3sH5KZrqayOrH1J7Ohk5KxdVZyj5mVjG5a8hEIKIg+qGL0zQLw6Ipx/hPFNOWfWvwpteAL5d/umW5wbbpbatPU+tfSgbTpvqxN/locdUrHU/FaLPzp4arFoXRqbFQfhtZTFRo9QrUHE+rJHkLdR5t76qz9Tji0hkxt2/x2TAlVT6lI6Nv89rsqmkAcb3X18rFr+8l7qxtNvcPAIU5B9pTa4OIythSXfVRxdQ8J68OLD1k7Wk77pGJSve0cSzVOt0KA60StCXzAAMsTmCrY+CElw74QA+gue099bc+Fi2XxXGlYVyND8bV5gjGZDMYXN5sD/8Kn/G1izv4A&lt;/diagram&gt;&lt;diagram name=&quot;layer 3&quot; id=&quot;97wTBWnFWhrEvEt8tOlR&quot;&gt;7VvRcps4FP0az3QfNgMICfy4drPbhzbtTGY27aMMMmYjECPk2N6vX4GFDYgkZFuM4sGZSdAFydY9OtI998YzsEz2f3Gcbb6wkNCZY4X7Gfg4c+TLduSfwnI4WqDjHg0Rj8OjyT4b7uN/iTJayrqNQ5I3HhSMURFnTWPA0pQEomHDnLNd87E1o813zXBENMN9gKlufYhDsVFW27LONz6RONqot/ahupHg6mFlyDc4ZLuaCdzOwJIzJo5XyX5JaOG8yi9337jFH8TfX5ZRnq/v8h93D/e/Hwf78y1dTlPgJBW/dmiF5ROmW+WvDOe5tFRzFofKkZxt05AUg9kzsAhxvjk1nggXsXT5HzSOUmkTLJPWdUzpklHGy/5gvV47QSDtueDskdTuhGiFIJJ31IeRo5F9C71Xpm6f8JALmbCECH6Q/dQorpqNWsLzCtFdbUHMlW1TWwunjlgtwug09NnR8kL5+g1+B0BzvOA4zbOYEj5zkPSKJBBYfCA5vglzWrJG/iqaNM6z316Bp+17WPx0+R6Vr6IHS0XNfny1gR4KIMeyWxDNoQ6R0wHRfDCEdGpIHKwbyY9Ec77cGrLiMjjQWKIgfbhYHfH4vKLKdyscPEYlSl+3Qj5GuqEKIfFDtwsq31kBNCRNUAsDpNMEdUDgDwYB1CAg+6xOjxALLA6ZPF/OtpIfgyKEib/u3MhQ4JPV+lKksUETL3mkjQ0Y0gBLcLrFtDzfQzIkKqZvcagNFhwbLE+Dg4QydFJNxsWGRSzF9PZsXZxPmYJq52c+s+LILx34DxHioOJAvJWnFlhsRFKhSfax+F67/lEMdQNV6+NejVw2DlUjlfP9Xm/UehXNc7eyVfU7zq+Y1P8AUjqGbXlAXvKgf3xQYB6RlwZ03e6lwQnFIn5qfrxfD7TfFeQltS2TpFHBqzdEfC3yEVseW14X+ebIA3jIQ8ux28SyO6K7rtABDcUsF7wXZg3NENftyxA4JkNcPdaLU0F4QsIYC9IKOAw9xYYiGPB6hBneJU8uV48LlWq1NWyae9huEwtyn+Fy0e44zpoUel+idm6cqnX1+E9qJvuaNRNsC9exRZPraRhMoqmGl2+aaHL18GwSTc+wa3zV5M7fS2xnqmqqEHw1JoTOmDFh9TGvUzUhLR0xumqCevB2AWYNvtqdvqsdjLraHW21TwqoIovvmKaAoF4+UgrIect+ZLrEmZtXuIOdZSHnmiXO3LS6EJzqQi/hZVvGFYbgVBjqTa/xNQ6cKkM/G/X1rQwhq3ttXCjqu+rKkG2bVxqC46QPDKUJ6psKQM8gfRmaID0VMImjE8sc4+pDyO7a1gp1pBdm37E6soF5FSCk5xGkPALXLI9s17QSENKzA5M+qgNmXA0I6VmFSR89x6/xBRKCo0RxVySQEOob+fmjRn563uKaBBI0rwqExsk9mEqTvnkEb9Q8AtLzCJNAOrHMM658hKZ/YvhJYnp9Mxdg1LKup2cuBCekWHqYPhbfNOt/bg3GD18rVwx4Csnm+Rub5b3a917B7X8=&lt;/diagram&gt;&lt;diagram name=&quot;types&quot; id=&quot;MBVU_OYnusstwsUWe-6x&quot;&gt;7VlZc9owEP41PML4Ph4bjnYa0qaTmSbkJSNsYSuRkSvLgPPrK9syvgg5CEfTPKH9tNLK2m8/FtNR+8HqKwWhf0FciDuK5K466qCjKLIsGfwjRZIc6VoC8ChyhVMJXKFHKEBJoDFyYVRzZIRghsI66JD5HDqshgFKybLuNiO4HjUEHmwBVw7AbfQaucxfP5dUTnyDyPNFaEsXEwEonAUQ+cAlywqkDjtqnxLC8lGw6kOcXl5xL0E8HC+68ejuHEg2iYKBoaFuvtnoNUvWj0DhnL3v1qotno0lxYVBl9+fMAllPvHIHOBhiZ5REs9dmG4rcav0GRMSclDm4D1kLBFkADEjHPJZgMUsXCF2ky7v6cKaiM3S8WBVNRJhuCDys5jpBvmh05M2kvzMDQm/iMTUgVv8NGWdX14YkASQ0YQvpBADhhb1qEAw1Fv7rZdeEsTPo0iimjRTz5eIWrKLIim2YIB6kIlVZS6/UAqSiluYOkRPx9GlRhy9QY3nzlX354P8BIVVuZMSyuj2Cupp0jGo9xFopMunSaPWuQ5CI/mTRm+kkXqiNGqe6yA0UvKYC4DjgkarkHYUA/MUnk3TkceyzDPAkpC3NK2pHkZR2GIjbxvCdOgkGHHSUe649BGDVyHIsr7kfVedXNOcnePpGgDOg5dx9mfM+C5Q4DOEcZ9gQrNIqgugNXM4HjFKHmBlxnAsOJ2tqbqAlMHVG8ja5uBT3yCm4NKy7LkMAfnVbqtBuSprKwnfms/b7/3rpTq8RQMILiYonIzo7+5RvlyKvqYYT2o9zgn0NeZ+lMQomumk6P2beX0nKWkFkpUDaIP5HtpwH5H5pzbU2XEAcZj9Go8uB4H0aP+48x+W53+82Pp3xIFwHiCWWrp0CHlQc8e8Wrc5GjvqyEvTt/WYjXrMKq/nRviYZaZDy9U2lZmlTFXD2GOZyXJThJV2mVl7KrPNedJOp86U7YXGL54mN1WjUp6pWS7LrGLd3ivSeGFF7vwbYbdM66eTafODZ3rnHm63TBst7U11t93wMArmUYgwV9smNcrEy88rcUNgocwl1twksLZhqmCfAquozT5GbQts0ZDWFNbYm8Kax6y7/+71rf22FyYbXpRpPd2yOKEUW5Nl06pva9q9cs7Q7HqQ/OkP/464+fCv9Zd3+qXGzfKflty9/L9KHf4F&lt;/diagram&gt;&lt;diagram name=&quot;ASC Exsmple&quot; id=&quot;85zO9aYcwFrSI-2Ip35K&quot;&gt;7VnLcpswFP0aL+MB8TBepk6aTCdtOuNFne4EyKBERlSI2PTrK4EwL8eO42emXiEdXT3vuYeL6Bmj2eKOwTj8Tn1EekDzFz3jpgeArmu2eEgkK5ArRwEBw74yqoAx/osUqCk0xT5KGoacUsJx3AQ9GkXI4w0MMkbnTbMpJc1ZYxigDjD2IOmiv7DPw+W+tKrhHuEgVFM7lmqYwdJYAUkIfTqvQcZtzxgxSnlRmi1GiMjDK88F38e/Rxb89hhoE2LeOcSaLK6Kwb5u02W5BYYivt+hgdoaz8rzQr44PlWljIc0oBEktxX6hdE08pEcVRO1yuaB0liAugCfEeeZ4gJMORVQyGdEtaIF5hPZvW+p2pMaTJZvFvVKpio+TMJ8TjkAjaGHuWwCcgSOFvyxCRXbkntpsWDDESq7hKbMQ2vsrKX/ReAgOkOcZaIfQwRy/NqcFCoGB0u7ZdefFIvlAE1Fmzmwii4q1oZlEJVDcMgCxFWvytfXjMGsZhZLg+TteSytNY/Vos6mdTXtRaFYQVmrnUkF5XTcgprGKaj5X9DM0s+TZp11HYNm5oVmh6KZcaY0a6/rGDRTU75CkpY0W8SsB2wiHPjFlaWA58zgkGexyJg6TX2Ck7jDVpGVxLLoZQQLUjJhOA8xR2NBIYnPRVrXJJ9bsPfBXQLQewlyTj+mXIyCFD7FhIwooSyfyfAhcqaewBPO6Auqtdieg9zpFlR+RUy0fYDMXZK+9YoaKLLNq6TPVlBYT/danKzTusaI7R1unzKzKstPjSzrU2RWg4NokV2m+1n5ddJ2/J7EqDORDo6gLoM9qMtzQqOLurxPXSr6nEpenM8iLyu81PL81PGQt9LzrmOZlnYE0RkWdoUGrBsP7KhOO/l8uDLK83ju+wk5ZfBayPHNVS50gGvY9kmDV9fb2g+6wescM3jLBZ1D9IL14SsOnmWTeqUW9LJadctrnyrsdfDOuN/1A2k3tujnw5bBhS2b2bJrCrsbW0DnLSHfEN2EjzMYJTEm4r3QpldFHn3zO+Ojjtq/0AOjnaUZXaEv8/GG0tsHU/qT3GJeLtjfusgefuxKasVVpdm3HEcwDgxNXR84zWEHw37VZpvD5iTF5o9/i9/e/Lb2+hG+ZHWzI193FIohrnPvuykmfk+GsP0npbmM5eKm1dWsbBJwmuAoEM/x6IeUAcpeXBR54RrF0zYr3vJHoH5QMWtlrUBbIWbmCjEbbi9molr9xyxcWf0NNm7/AQ==&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="0" y="0" width="190" height="240" rx="28.5" ry="28.5" fill="#fff2cc" stroke="#d6b656" stroke-dasharray="3 3" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="93.5" y="17.5">pass 0</text></g><rect x="1970" y="75" width="120" height="90" rx="13.5" ry="13.5" fill="#f5f5f5" stroke="#666666" stroke-dasharray="3 3" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="2028.5" y="115.5">transpiler</text><text x="2028.5" y="129.5">(esa.dsl to esa.lisp)</text></g><path d="M 20 56 C 20 34.67 80 34.67 80 56 L 80 104 C 80 125.33 20 125.33 20 104 Z" fill="#d5e8d4" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><path d="M 20 56 C 20 72 80 72 80 56" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="48.5" y="94.5">dsl0.pasm</text></g><path d="M 90 96 C 90 74.67 150 74.67 150 96 L 150 144 C 150 165.33 90 165.33 90 144 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><path d="M 90 96 C 90 112 150 112 150 96" fill="none" stroke="#6c8ebf" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="118.5" y="120.5">expr</text><text x="118.5" y="134.5">datatypes</text><text x="118.5" y="148.5">.lisp</text></g><path d="M 20 146 C 20 124.67 80 124.67 80 146 L 80 194 C 80 215.33 20 215.33 20 194 Z" fill="#f5f5f5" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><path d="M 20 146 C 20 162 80 162 80 146" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="48.5" y="184.5">manual code</text></g><path d="M 290 120 L 323.63 120" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 328.88 120 L 321.88 123.5 L 323.63 120 L 321.88 116.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="170" y="90" width="120" height="60" rx="9" ry="9" fill="#e1d5e7" stroke="#9673a6" stroke-dasharray="3 3" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="228.5" y="115.5">pasm</text><text x="228.5" y="129.5">engine</text></g><path d="M 400 120 L 443.63 120" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 448.88 120 L 441.88 123.5 L 443.63 120 L 441.88 116.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 330 96 C 330 74.67 400 74.67 400 96 L 400 144 C 400 165.33 330 165.33 330 144 Z" fill="#f5f5f5" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><path d="M 330 96 C 330 112 400 112 400 96" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="363.5" y="127.5">intermediate</text><text x="363.5" y="141.5">data</text></g><rect x="450" y="0" width="190" height="240" rx="28.5" ry="28.5" fill="#fff2cc" stroke="#d6b656" stroke-dasharray="3 3" pointer-events="all"/><g transform="translate(525.5,6.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="36" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 36px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">pass 1</div></div></foreignObject><text x="18" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">pass 1</text></switch></g><path d="M 470 56 C 470 34.67 530 34.67 530 56 L 530 104 C 530 125.33 470 125.33 470 104 Z" fill="#d5e8d4" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><path d="M 470 56 C 470 72 530 72 530 56" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="498.5" y="94.5">dsl1.pasm</text></g><path d="M 540 96 C 540 74.67 600 74.67 600 96 L 600 144 C 600 165.33 540 165.33 540 144 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><path d="M 540 96 C 540 112 600 112 600 96" fill="none" stroke="#6c8ebf" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="568.5" y="120.5">expr</text><text x="568.5" y="134.5">datatypes</text><text x="568.5" y="148.5">.lisp</text></g><path d="M 470 146 C 470 124.67 530 124.67 530 146 L 530 194 C 530 215.33 470 215.33 470 194 Z" fill="#f5f5f5" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><path d="M 470 146 C 470 162 530 162 530 146" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="498.5" y="184.5">manual code</text></g><path d="M 740 120 L 773.63 120" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 778.88 120 L 771.88 123.5 L 773.63 120 L 771.88 116.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="620" y="90" width="120" height="60" rx="9" ry="9" fill="#e1d5e7" stroke="#9673a6" stroke-dasharray="3 3" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="678.5" y="115.5">pasm</text><text x="678.5" y="129.5">engine</text></g><path d="M 850 120 L 893.63 120" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 898.88 120 L 891.88 123.5 L 893.63 120 L 891.88 116.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 780 96 C 780 74.67 850 74.67 850 96 L 850 144 C 850 165.33 780 165.33 780 144 Z" fill="#f5f5f5" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><path d="M 780 96 C 780 112 850 112 850 96" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="813.5" y="127.5">intermediate</text><text x="813.5" y="141.5">data</text></g><rect x="900" y="0" width="190" height="240" rx="28.5" ry="28.5" fill="#fff2cc" stroke="#d6b656" stroke-dasharray="3 3" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="993.5" y="17.5">pass 2</text></g><path d="M 920 56 C 920 34.67 980 34.67 980 56 L 980 104 C 980 125.33 920 125.33 920 104 Z" fill="#d5e8d4" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><path d="M 920 56 C 920 72 980 72 980 56" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="948.5" y="94.5">dsl2.pasm</text></g><path d="M 990 96 C 990 74.67 1050 74.67 1050 96 L 1050 144 C 1050 165.33 990 165.33 990 144 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><path d="M 990 96 C 990 112 1050 112 1050 96" fill="none" stroke="#6c8ebf" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="1018.5" y="120.5">expr</text><text x="1018.5" y="134.5">datatypes</text><text x="1018.5" y="148.5">.lisp</text></g><path d="M 920 146 C 920 124.67 980 124.67 980 146 L 980 194 C 980 215.33 920 215.33 920 194 Z" fill="#f5f5f5" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><path d="M 920 146 C 920 162 980 162 980 146" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="948.5" y="184.5">manual code</text></g><path d="M 1190 120 L 1223.63 120" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1228.88 120 L 1221.88 123.5 L 1223.63 120 L 1221.88 116.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1070" y="90" width="120" height="60" rx="9" ry="9" fill="#e1d5e7" stroke="#9673a6" stroke-dasharray="3 3" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="1128.5" y="115.5">pasm</text><text x="1128.5" y="129.5">engine</text></g><path d="M 1300 120 L 1343.63 120" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1348.88 120 L 1341.88 123.5 L 1343.63 120 L 1341.88 116.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1230 96 C 1230 74.67 1300 74.67 1300 96 L 1300 144 C 1300 165.33 1230 165.33 1230 144 Z" fill="#f5f5f5" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><path d="M 1230 96 C 1230 112 1300 112 1300 96" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="1263.5" y="127.5">intermediate</text><text x="1263.5" y="141.5">data</text></g><rect x="1350" y="0" width="190" height="240" rx="28.5" ry="28.5" fill="#fff2cc" stroke="#d6b656" stroke-dasharray="3 3" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="1443.5" y="17.5">pass 3</text></g><path d="M 1370 56 C 1370 34.67 1430 34.67 1430 56 L 1430 104 C 1430 125.33 1370 125.33 1370 104 Z" fill="#d5e8d4" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><path d="M 1370 56 C 1370 72 1430 72 1430 56" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="1398.5" y="94.5">dsl3.pasm</text></g><path d="M 1440 96 C 1440 74.67 1500 74.67 1500 96 L 1500 144 C 1500 165.33 1440 165.33 1440 144 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><path d="M 1440 96 C 1440 112 1500 112 1500 96" fill="none" stroke="#6c8ebf" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="1468.5" y="120.5">expr</text><text x="1468.5" y="134.5">datatypes</text><text x="1468.5" y="148.5">.lisp</text></g><path d="M 1370 146 C 1370 124.67 1430 124.67 1430 146 L 1430 194 C 1430 215.33 1370 215.33 1370 194 Z" fill="#f5f5f5" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><path d="M 1370 146 C 1370 162 1430 162 1430 146" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="1398.5" y="184.5">manual code</text></g><path d="M 1640 120 L 1673.63 120" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1678.88 120 L 1671.88 123.5 L 1673.63 120 L 1671.88 116.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1520" y="90" width="120" height="60" rx="9" ry="9" fill="#e1d5e7" stroke="#9673a6" stroke-dasharray="3 3" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="1578.5" y="115.5">pasm</text><text x="1578.5" y="129.5">engine</text></g><path d="M 1750 120 L 1783.63 120" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1788.88 120 L 1781.88 123.5 L 1783.63 120 L 1781.88 116.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1680 96 C 1680 74.67 1750 74.67 1750 96 L 1750 144 C 1750 165.33 1680 165.33 1680 144 Z" fill="#f5f5f5" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><path d="M 1680 96 C 1680 112 1750 112 1750 96" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="all"/><g fill="#333333" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="1713.5" y="127.5">intermediate</text><text x="1713.5" y="141.5">data</text></g><path d="M 1910 120 L 1963.63 120" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1968.88 120 L 1961.88 123.5 L 1963.63 120 L 1961.88 116.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1790" y="90" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" stroke-dasharray="3 3" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="1848.5" y="122.5">tree walker</text></g></g></svg>

# Types

The type system used by the transpiler is written as a specification [exprtypes.dsl](https://github.com/bmfbp/bmfbp/blob/main/build_process/esa-transpiler/exprtypes.dsl).

The type specification produces two files

1. [exprtypes.lisp](https://github.com/bmfbp/bmfbp/blob/main/build_process/esa-transpiler/exprtypes.lisp)
2. [exprtypes.json](https://github.com/bmfbp/bmfbp/blob/main/build_process/esa-transpiler/exprtypes.json)

The JSON file is used to initialized the runtime system, while the lisp file is used as part of the code.


<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="499px" height="258px" viewBox="-0.5 -0.5 499 258" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2021-07-09T04:26:44.689Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_16_0) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.4.2 Chrome/78.0.3904.130 Electron/7.1.4 Safari/537.36&quot; etag=&quot;YHKT49x9-U8GmsB3qmBC&quot; version=&quot;12.4.2&quot; type=&quot;device&quot; pages=&quot;6&quot;&gt;&lt;diagram id=&quot;iV1_iCQHRfuDkGOBecUP&quot; name=&quot;overview&quot;&gt;1VdNc9owEP01zLSHdGzLNuRaQtvppMmBQ9NeGGGtbTWy5REyYH59Zbz4A9NAMgVac0D7tFpJ+/ZJ9oCMk/VnRbP4m2QgBo7F1gNyN3Ac27Z881ciRYUMfbcCIsUZOjXAlG8AQQvRnDNYdBy1lELzrAsGMk0h0B2MKiVXXbdQiu6sGY2gB0wDKvrod850XO/Lajq+AI9inHrkYUdCd84ILGLK5KoFkcmAjJWUumol6zGIMnm7vPjEfnj6OZstbuyZtQzceLMJbqpgn14zpN6CglT/3dAebk0Xu3wBM+lDUyody0imVEwa9GOQqyWUQW1jNC73UmYI/gKtCywFmmtpoFgnAnthzfVTq/3DtK0PHlp3ZeVZO6NAo1pmubY9Vo+kBP0WMlcBvODnYGVSFcFL8UjNuxEMyAS0Ksw4BYJqvuwujmLlRrVfw45pIEGvIAsXuaQix5kYp5GiSY9EU6pZ2QwKwVMGymRwFXMN04xu07AyWu+SMpe5cWT38xqgwXOkSvQx1yYKIB5yIcZSSLWdiTAPRsw1+EIr+QytnpEzJ75fc7cEpWH9Bvb62cYoI9QlHkz2LdqrRuY+QnFb4NaZ6PH/Ey2ZnKviqW20RpVmM2xr7cbtMR965e8Q8/72uYBqyYmqda+pWvJn1ZpLL8m4MPrcrxxVyfGw5k7IfChT3cKr54xadEhXjI7VF6PtHFCjfy41jq6hxjcq69w6cU/UyfCaOnF7Ovk6fXx4F5Wvpe+veMP9g2pzyfGrb3TJq2/Y407lqeYJHDnYjlC2z0QYOkFwiAnmz33vnO8a3u3lzjdjNh8V277WpxmZ/AY=&lt;/diagram&gt;&lt;diagram name=&quot;layer 1&quot; id=&quot;aGRshp2EHKMNtcRc9eTF&quot;&gt;3VjLctsgFP0az7SLdvSwZHUZO047nSRux2keSyywRIOEBiNH6tf3IqFX5cZ1GiVu7YW55wKCcziAPLJnUfZRoCS84JiwkWXgbGSfjizLNA0XfhSSl4jrTUogEBTrSg2wpD+IBg2NphSTTaei5JxJmnRBn8cx8WUHQ0Lwh261NWfdpyYoID1g6SPWR28olmE9L6NJfCI0CPWjPUcnIlRV1sAmRJg/tCB7PrJngnNZlqJsRpgir+LlerO9wt/W0ca5vluMV1+yr2eX78rOzg5pUk9BkFg+b9dayy1iqeZLpLGkEdFTlnnFo+BpjInqyxzZ0zVlbMYZF0XSXq/Xlu8DvpGC35NWBrsr13EhsyVCUpDlhNEghpzkCaD68ZAj2S967ZmsWSsAS5fwiEiRQzvdi2s6ZT961Zq2FvGhWQPWRGNhS/5abaTXXVD33XALBU3vISo6Pa7ny5Mez7DKElX0c0aBcKBxuiqpP18xzf4K+fdBIcgilVCN/EYVR313qeIWH9WCx7KFl58BdZl4RkcXy+jr4u6QxRtMFbenygz2QEAuUJwixtTgbwSVksRDaoUd4uHxLq08a2UXWg3mlYlzZJr0d6Ue9QTDLq9DLmTIAx4jNm/QqZ+Kbb1fNVXOudp4CvA7kTLXJxZKJQeIZFTe6rQq30HZeO/o6FQxZlRBroNybGpAT1AFJsVT4ZPH6nn62EQiII912DqVOjoLwpCk2+7wnl81r6capigQKPpPfWNax7aXffinfAPci/y2HbRaqbBpVkRVu8NPuaEdWi2E/Q61XtOh1TB3ORTu31FCGXjxsIvf8V0x6mtdZUuzb8vaum1fukP5sprY3/nyj634RFs1Or/EoVZRsNcyk1d1jNVT7vNycQnIm0C9Lr8d8mg7Qm+NX+76DmHzal3kWn9Q2POf&lt;/diagram&gt;&lt;diagram name=&quot;layer 2&quot; id=&quot;UahebIe5ObPOA1C7e0kw&quot;&gt;3VnbcpswEP0az7QP9XAxlzwmjtOkkzSd8UzTPMoggxKBqBCOyddXAgHCkNR2g53GfjB7VhJoj452kUfmNFp/pSAJb4gP8cjQ/PXIPB8Zhq5rNv8RSF4ituuUQECRLxs1wBw9QwlqEs2QD9NWQ0YIZihpgx6JY+ixFgYoJU/tZkuC23dNQAA7wNwDuIveIZ+F9by0xnEJURDKW7uWdESgaiyBNAQ+eVIgczYyp5QQVl5F6ynEInhVXB7m0Q/04+r5593F4vIq+23h4PxLOdjFLl3qKVAYs7cd2iiHXgGcyXjRLGYognLKLK/iSEkW+1CMpY/MsyXCeEowoYXTXC6XhudxPGWUPELF49sL27K5ZwUpQ5yWU4yCmPsYSTgqb899cL3B118mq9cM8KULSQQZzXk/OYpdkSZXrV7ZT80aMByrxEKF/pptINddUI/dxJZfyPDuEGqrE1Lo85UqTUJZSAISAzxr0LMm6Bq3mjbXRESvYOIBMpZL2YGMEQ6FLMLSC9eI/RLdx5a07uVg4vp8rRp5ZcR8ukonYd5X4wmj6VZYVb9yfmJSezDJA0My6sFX2smNiAEawNfGM8z+pUEhBgyt2k/35jTbHUUxCuI0QRjSkcG9pi6C9QmmYOynuNgORdi4iVGafN5ReJb49gnPLj6iB4mZgpefgwvS0Z2x1ZKk6XQlqds9ktRPhpJkuVJaZM3mpx0G+MafiEsvx4hTwQN5tihJuV5UQlsA7zEoqLrNGG8G35yvwZhxNrbKky4vttalxR2MlUmHlSkvSxTx3IA4AxjnCnRHEWMwHpI734KuP+njzjUWZsHdYOnMfW8c7ZPNvIyu6o3sH5KZrqayOrH1J7Ohk5KxdVZyj5mVjG5a8hEIKIg+qGL0zQLw6Ipx/hPFNOWfWvwpteAL5d/umW5wbbpbatPU+tfSgbTpvqxN/locdUrHU/FaLPzp4arFoXRqbFQfhtZTFRo9QrUHE+rJHkLdR5t76qz9Tji0hkxt2/x2TAlVT6lI6Nv89rsqmkAcb3X18rFr+8l7qxtNvcPAIU5B9pTa4OIythSXfVRxdQ8J68OLD1k7Wk77pGJSve0cSzVOt0KA60StCXzAAMsTmCrY+CElw74QA+gue099bc+Fi2XxXGlYVyND8bV5gjGZDMYXN5sD/8Kn/G1izv4A&lt;/diagram&gt;&lt;diagram name=&quot;layer 3&quot; id=&quot;97wTBWnFWhrEvEt8tOlR&quot;&gt;7VvRcps4FP0az3QfNgMICfy4drPbhzbtTGY27aMMMmYjECPk2N6vX4GFDYgkZFuM4sGZSdAFydY9OtI998YzsEz2f3Gcbb6wkNCZY4X7Gfg4c+TLduSfwnI4WqDjHg0Rj8OjyT4b7uN/iTJayrqNQ5I3HhSMURFnTWPA0pQEomHDnLNd87E1o813zXBENMN9gKlufYhDsVFW27LONz6RONqot/ahupHg6mFlyDc4ZLuaCdzOwJIzJo5XyX5JaOG8yi9337jFH8TfX5ZRnq/v8h93D/e/Hwf78y1dTlPgJBW/dmiF5ROmW+WvDOe5tFRzFofKkZxt05AUg9kzsAhxvjk1nggXsXT5HzSOUmkTLJPWdUzpklHGy/5gvV47QSDtueDskdTuhGiFIJJ31IeRo5F9C71Xpm6f8JALmbCECH6Q/dQorpqNWsLzCtFdbUHMlW1TWwunjlgtwug09NnR8kL5+g1+B0BzvOA4zbOYEj5zkPSKJBBYfCA5vglzWrJG/iqaNM6z316Bp+17WPx0+R6Vr6IHS0XNfny1gR4KIMeyWxDNoQ6R0wHRfDCEdGpIHKwbyY9Ec77cGrLiMjjQWKIgfbhYHfH4vKLKdyscPEYlSl+3Qj5GuqEKIfFDtwsq31kBNCRNUAsDpNMEdUDgDwYB1CAg+6xOjxALLA6ZPF/OtpIfgyKEib/u3MhQ4JPV+lKksUETL3mkjQ0Y0gBLcLrFtDzfQzIkKqZvcagNFhwbLE+Dg4QydFJNxsWGRSzF9PZsXZxPmYJq52c+s+LILx34DxHioOJAvJWnFlhsRFKhSfax+F67/lEMdQNV6+NejVw2DlUjlfP9Xm/UehXNc7eyVfU7zq+Y1P8AUjqGbXlAXvKgf3xQYB6RlwZ03e6lwQnFIn5qfrxfD7TfFeQltS2TpFHBqzdEfC3yEVseW14X+ebIA3jIQ8ux28SyO6K7rtABDcUsF7wXZg3NENftyxA4JkNcPdaLU0F4QsIYC9IKOAw9xYYiGPB6hBneJU8uV48LlWq1NWyae9huEwtyn+Fy0e44zpoUel+idm6cqnX1+E9qJvuaNRNsC9exRZPraRhMoqmGl2+aaHL18GwSTc+wa3zV5M7fS2xnqmqqEHw1JoTOmDFh9TGvUzUhLR0xumqCevB2AWYNvtqdvqsdjLraHW21TwqoIovvmKaAoF4+UgrIect+ZLrEmZtXuIOdZSHnmiXO3LS6EJzqQi/hZVvGFYbgVBjqTa/xNQ6cKkM/G/X1rQwhq3ttXCjqu+rKkG2bVxqC46QPDKUJ6psKQM8gfRmaID0VMImjE8sc4+pDyO7a1gp1pBdm37E6soF5FSCk5xGkPALXLI9s17QSENKzA5M+qgNmXA0I6VmFSR89x6/xBRKCo0RxVySQEOob+fmjRn563uKaBBI0rwqExsk9mEqTvnkEb9Q8AtLzCJNAOrHMM658hKZ/YvhJYnp9Mxdg1LKup2cuBCekWHqYPhbfNOt/bg3GD18rVwx4Csnm+Rub5b3a917B7X8=&lt;/diagram&gt;&lt;diagram name=&quot;types&quot; id=&quot;MBVU_OYnusstwsUWe-6x&quot;&gt;7VnZctowFP0aHmFsy+tjy9JOQ9p0MtMsLxlhC1uJjFxZBtyvr4xlvBGSQCA06RO+R1frPef6WnRAP1x+YTAKzqmHSEdTvGUHDDqapqqKKX4yJM2RrmqCHPEZ9qRXCVziP0iCikQT7KG45sgpJRxHddClsxlyeQ2DjNFF3W1KSX3WCPqoBVy6kLTRK+zxYL0xpWz4irAfyKltQzaEsHCWQBxAjy4qEBh2QJ9RyvOncNlHJDu94lzCZDied5PR3RlUHBqHA1PH3Xyw0Uu6rLfA0Iy/7tDAkXvjaXFgyBPnJ03KeEB9OoNkWKKfGU1mHsqGVYRV+owpjQSoCvAecZ5KMsCEUwEFPCSyFS0xv8669wxp3cjBsufBsmqk0vBgHKzmzAbIF52ttBHkJ05I+sU0YS7a4qdr6/gKZSAaIs5S0ZEhAjme12eFkqH+2m/d9YJisR5NkXLSLSPvIsXkFCIphuCQ+YjLXmUsPzEG04pblDnEj89jKI15jAY1nlpX3V885CsorMqZlNCKbi+gnq68BfXeA40M9TRp1FrXUWik/qfRjjQCJ0qj5rqOQiMtn3MOSVLQaBmxjibqH6DmLyAOeRqJWqbEegTHUYt/olCIskc3JVjQjAnHSU648aQg0AS6D/6Khj8SLtyQxKeYkD4llK2GAh5E9tQVeMwZfUCVFtO10WS6Zt8cMY6WO/CvTavHXgqWpMeiLKNMCQXVAqrBoioRKzHcGqLbb/2rBRje4gGC5zc4uhmxX903eV8UpYpaLVTWZcsJlCrWYZKDWdTHaVHON+P6StmhNZGqHUHu1m5yv4/p7IPIvQz4EfQ+/TkeXQxC5Y/z/S54WJz99hP739E7jaCLeWYZyjEULz/AcwFuczT3TA3PDd/WZTYkttJUz4vJQXVkINvTN+nI1ibANA+oI1VtJk6trSP7QDraHAj9dISkbVeSOHiWXleNiv4ys+y2sop+B5ec+UzJ7V2q7xdp43Qibb3zSO9dd+0XabOVXLPEWqlVOIOzOMJE5NEmJ8qIb0idSBXJ09qUOh3TAvCQqVMDzRIEtFNnUR7Wcqd5sNxpvaWiPtz9qLPbjcSGmyi9Z9i2IJTm6Kpq2fVhLadXtpm6U58k3/3xL2Gbm3+pv7rXd5Mwy78ycvfyHyEw/As=&lt;/diagram&gt;&lt;diagram name=&quot;ASC Exsmple&quot; id=&quot;85zO9aYcwFrSI-2Ip35K&quot;&gt;7VnLcpswFP0aL+MB8TBepk6aTCdtOuNFne4EyKBERlSI2PTrK4EwL8eO42emXiEdXT3vuYeL6Bmj2eKOwTj8Tn1EekDzFz3jpgeArmu2eEgkK5ArRwEBw74yqoAx/osUqCk0xT5KGoacUsJx3AQ9GkXI4w0MMkbnTbMpJc1ZYxigDjD2IOmiv7DPw+W+tKrhHuEgVFM7lmqYwdJYAUkIfTqvQcZtzxgxSnlRmi1GiMjDK88F38e/Rxb89hhoE2LeOcSaLK6Kwb5u02W5BYYivt+hgdoaz8rzQr44PlWljIc0oBEktxX6hdE08pEcVRO1yuaB0liAugCfEeeZ4gJMORVQyGdEtaIF5hPZvW+p2pMaTJZvFvVKpio+TMJ8TjkAjaGHuWwCcgSOFvyxCRXbkntpsWDDESq7hKbMQ2vsrKX/ReAgOkOcZaIfQwRy/NqcFCoGB0u7ZdefFIvlAE1Fmzmwii4q1oZlEJVDcMgCxFWvytfXjMGsZhZLg+TteSytNY/Vos6mdTXtRaFYQVmrnUkF5XTcgprGKaj5X9DM0s+TZp11HYNm5oVmh6KZcaY0a6/rGDRTU75CkpY0W8SsB2wiHPjFlaWA58zgkGexyJg6TX2Ck7jDVpGVxLLoZQQLUjJhOA8xR2NBIYnPRVrXJJ9bsPfBXQLQewlyTj+mXIyCFD7FhIwooSyfyfAhcqaewBPO6Auqtdieg9zpFlR+RUy0fYDMXZK+9YoaKLLNq6TPVlBYT/danKzTusaI7R1unzKzKstPjSzrU2RWg4NokV2m+1n5ddJ2/J7EqDORDo6gLoM9qMtzQqOLurxPXSr6nEpenM8iLyu81PL81PGQt9LzrmOZlnYE0RkWdoUGrBsP7KhOO/l8uDLK83ju+wk5ZfBayPHNVS50gGvY9kmDV9fb2g+6wescM3jLBZ1D9IL14SsOnmWTeqUW9LJadctrnyrsdfDOuN/1A2k3tujnw5bBhS2b2bJrCrsbW0DnLSHfEN2EjzMYJTEm4r3QpldFHn3zO+Ojjtq/0AOjnaUZXaEv8/GG0tsHU/qT3GJeLtjfusgefuxKasVVpdm3HEcwDgxNXR84zWEHw37VZpvD5iTF5o9/i9/e/Lb2+hG+ZHWzI193FIohrnPvuykmfk+GsP0npbmM5eKm1dWsbBJwmuAoEM/x6IeUAcpeXBR54RrF0zYr3vJHoH5QMWtlrUBbIWbmCjEbbi9molr9xyxcWf0NNm7/AQ==&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 395 67 L 395 47 L 365 47 L 365 13.37" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 365 8.12 L 368.5 15.12 L 365 13.37 L 361.5 15.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 395 67 L 395 47 L 405 47 L 405 13.37" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 405 8.12 L 408.5 15.12 L 405 13.37 L 401.5 15.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 395 67 L 395 47 L 425 47 L 425 13.37" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 425 8.12 L 428.5 15.12 L 425 13.37 L 421.5 15.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 365 83 C 365 61.67 425 61.67 425 83 L 425 131 C 425 152.33 365 152.33 365 131 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><path d="M 365 83 C 365 99 425 99 425 83" fill="none" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="394.5" y="108">expr</text><text x="394.5" y="122">datatypes</text><text x="394.5" y="136">.lisp</text></g><path d="M 425 217 L 490 217 L 490 183.37" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 490 178.12 L 493.5 185.12 L 490 183.37 L 486.5 185.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 365 193 C 365 171.67 425 171.67 425 193 L 425 241 C 425 262.33 365 262.33 365 241 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><path d="M 365 193 C 365 209 425 209 425 193" fill="none" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="394.5" y="218">expr</text><text x="394.5" y="232">datatypes</text><text x="394.5" y="246">.json</text></g><path d="M 80 157 L 118.63 157" fill="none" stroke="#000000" stroke-opacity="0.5" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 123.88 157 L 116.88 160.5 L 118.63 157 L 116.88 153.5 Z" fill-opacity="0.5" fill="#000000" stroke="#000000" stroke-opacity="0.5" stroke-miterlimit="10" pointer-events="all"/><path d="M 0 133 C 0 111.67 80 111.67 80 133 L 80 181 C 80 202.33 0 202.33 0 181 Z" fill="#d5e8d4" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><path d="M 0 133 C 0 149 80 149 80 133" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="39.5" y="172">exprtypes.dsl</text></g><path d="M 245 142 L 305 142 L 305 107 L 358.63 107" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 363.88 107 L 356.88 110.5 L 358.63 107 L 356.88 103.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 245 172 L 305 172 L 305 217 L 358.63 217" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 363.88 217 L 356.88 220.5 L 358.63 217 L 356.88 213.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="125" y="127" width="120" height="60" rx="9" ry="9" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="184.5" y="153.5">type</text><text x="184.5" y="167.5">transpiler</text></g><path d="M 395 67 L 395 47 L 385 47 L 385 13.37" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 385 8.12 L 388.5 15.12 L 385 13.37 L 381.5 15.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/></g></svg>

# ASC Example

An alternate version of the type transpiler is found in [exprtypeslisp.html](https://github.com/bmfbp/bmfbp/blob/main/build_process/esa-transpiler2/exprtypeslisp.html).

The type specification (aka a type SCN, aka a type DSL) is discussed elsewhere.

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="499px" height="391px" viewBox="-0.5 -0.5 499 391" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2021-07-09T04:28:18.087Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_16_0) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.4.2 Chrome/78.0.3904.130 Electron/7.1.4 Safari/537.36&quot; etag=&quot;L_mopwPhvJeWIK_MCynB&quot; version=&quot;12.4.2&quot; type=&quot;device&quot; pages=&quot;6&quot;&gt;&lt;diagram id=&quot;iV1_iCQHRfuDkGOBecUP&quot; name=&quot;overview&quot;&gt;1VdNc9owEP01zLSHdGzLNuRaQtvppMmBQ9NeGGGtbTWy5REyYH59Zbz4A9NAMgVac0D7tFpJ+/ZJ9oCMk/VnRbP4m2QgBo7F1gNyN3Ac27Z881ciRYUMfbcCIsUZOjXAlG8AQQvRnDNYdBy1lELzrAsGMk0h0B2MKiVXXbdQiu6sGY2gB0wDKvrod850XO/Lajq+AI9inHrkYUdCd84ILGLK5KoFkcmAjJWUumol6zGIMnm7vPjEfnj6OZstbuyZtQzceLMJbqpgn14zpN6CglT/3dAebk0Xu3wBM+lDUyody0imVEwa9GOQqyWUQW1jNC73UmYI/gKtCywFmmtpoFgnAnthzfVTq/3DtK0PHlp3ZeVZO6NAo1pmubY9Vo+kBP0WMlcBvODnYGVSFcFL8UjNuxEMyAS0Ksw4BYJqvuwujmLlRrVfw45pIEGvIAsXuaQix5kYp5GiSY9EU6pZ2QwKwVMGymRwFXMN04xu07AyWu+SMpe5cWT38xqgwXOkSvQx1yYKIB5yIcZSSLWdiTAPRsw1+EIr+QytnpEzJ75fc7cEpWH9Bvb62cYoI9QlHkz2LdqrRuY+QnFb4NaZ6PH/Ey2ZnKviqW20RpVmM2xr7cbtMR965e8Q8/72uYBqyYmqda+pWvJn1ZpLL8m4MPrcrxxVyfGw5k7IfChT3cKr54xadEhXjI7VF6PtHFCjfy41jq6hxjcq69w6cU/UyfCaOnF7Ovk6fXx4F5Wvpe+veMP9g2pzyfGrb3TJq2/Y407lqeYJHDnYjlC2z0QYOkFwiAnmz33vnO8a3u3lzjdjNh8V277WpxmZ/AY=&lt;/diagram&gt;&lt;diagram name=&quot;layer 1&quot; id=&quot;aGRshp2EHKMNtcRc9eTF&quot;&gt;3VjLctsgFP0az7SLdvSwZHUZO047nSRux2keSyywRIOEBiNH6tf3IqFX5cZ1GiVu7YW55wKCcziAPLJnUfZRoCS84JiwkWXgbGSfjizLNA0XfhSSl4jrTUogEBTrSg2wpD+IBg2NphSTTaei5JxJmnRBn8cx8WUHQ0Lwh261NWfdpyYoID1g6SPWR28olmE9L6NJfCI0CPWjPUcnIlRV1sAmRJg/tCB7PrJngnNZlqJsRpgir+LlerO9wt/W0ca5vluMV1+yr2eX78rOzg5pUk9BkFg+b9dayy1iqeZLpLGkEdFTlnnFo+BpjInqyxzZ0zVlbMYZF0XSXq/Xlu8DvpGC35NWBrsr13EhsyVCUpDlhNEghpzkCaD68ZAj2S967ZmsWSsAS5fwiEiRQzvdi2s6ZT961Zq2FvGhWQPWRGNhS/5abaTXXVD33XALBU3vISo6Pa7ny5Mez7DKElX0c0aBcKBxuiqpP18xzf4K+fdBIcgilVCN/EYVR313qeIWH9WCx7KFl58BdZl4RkcXy+jr4u6QxRtMFbenygz2QEAuUJwixtTgbwSVksRDaoUd4uHxLq08a2UXWg3mlYlzZJr0d6Ue9QTDLq9DLmTIAx4jNm/QqZ+Kbb1fNVXOudp4CvA7kTLXJxZKJQeIZFTe6rQq30HZeO/o6FQxZlRBroNybGpAT1AFJsVT4ZPH6nn62EQiII912DqVOjoLwpCk2+7wnl81r6capigQKPpPfWNax7aXffinfAPci/y2HbRaqbBpVkRVu8NPuaEdWi2E/Q61XtOh1TB3ORTu31FCGXjxsIvf8V0x6mtdZUuzb8vaum1fukP5sprY3/nyj634RFs1Or/EoVZRsNcyk1d1jNVT7vNycQnIm0C9Lr8d8mg7Qm+NX+76DmHzal3kWn9Q2POf&lt;/diagram&gt;&lt;diagram name=&quot;layer 2&quot; id=&quot;UahebIe5ObPOA1C7e0kw&quot;&gt;3VnbcpswEP0az7QP9XAxlzwmjtOkkzSd8UzTPMoggxKBqBCOyddXAgHCkNR2g53GfjB7VhJoj452kUfmNFp/pSAJb4gP8cjQ/PXIPB8Zhq5rNv8RSF4ituuUQECRLxs1wBw9QwlqEs2QD9NWQ0YIZihpgx6JY+ixFgYoJU/tZkuC23dNQAA7wNwDuIveIZ+F9by0xnEJURDKW7uWdESgaiyBNAQ+eVIgczYyp5QQVl5F6ynEInhVXB7m0Q/04+r5593F4vIq+23h4PxLOdjFLl3qKVAYs7cd2iiHXgGcyXjRLGYognLKLK/iSEkW+1CMpY/MsyXCeEowoYXTXC6XhudxPGWUPELF49sL27K5ZwUpQ5yWU4yCmPsYSTgqb899cL3B118mq9cM8KULSQQZzXk/OYpdkSZXrV7ZT80aMByrxEKF/pptINddUI/dxJZfyPDuEGqrE1Lo85UqTUJZSAISAzxr0LMm6Bq3mjbXRESvYOIBMpZL2YGMEQ6FLMLSC9eI/RLdx5a07uVg4vp8rRp5ZcR8ukonYd5X4wmj6VZYVb9yfmJSezDJA0My6sFX2smNiAEawNfGM8z+pUEhBgyt2k/35jTbHUUxCuI0QRjSkcG9pi6C9QmmYOynuNgORdi4iVGafN5ReJb49gnPLj6iB4mZgpefgwvS0Z2x1ZKk6XQlqds9ktRPhpJkuVJaZM3mpx0G+MafiEsvx4hTwQN5tihJuV5UQlsA7zEoqLrNGG8G35yvwZhxNrbKky4vttalxR2MlUmHlSkvSxTx3IA4AxjnCnRHEWMwHpI734KuP+njzjUWZsHdYOnMfW8c7ZPNvIyu6o3sH5KZrqayOrH1J7Ohk5KxdVZyj5mVjG5a8hEIKIg+qGL0zQLw6Ipx/hPFNOWfWvwpteAL5d/umW5wbbpbatPU+tfSgbTpvqxN/locdUrHU/FaLPzp4arFoXRqbFQfhtZTFRo9QrUHE+rJHkLdR5t76qz9Tji0hkxt2/x2TAlVT6lI6Nv89rsqmkAcb3X18rFr+8l7qxtNvcPAIU5B9pTa4OIythSXfVRxdQ8J68OLD1k7Wk77pGJSve0cSzVOt0KA60StCXzAAMsTmCrY+CElw74QA+gue099bc+Fi2XxXGlYVyND8bV5gjGZDMYXN5sD/8Kn/G1izv4A&lt;/diagram&gt;&lt;diagram name=&quot;layer 3&quot; id=&quot;97wTBWnFWhrEvEt8tOlR&quot;&gt;7VvRcps4FP0az3QfNgMICfy4drPbhzbtTGY27aMMMmYjECPk2N6vX4GFDYgkZFuM4sGZSdAFydY9OtI998YzsEz2f3Gcbb6wkNCZY4X7Gfg4c+TLduSfwnI4WqDjHg0Rj8OjyT4b7uN/iTJayrqNQ5I3HhSMURFnTWPA0pQEomHDnLNd87E1o813zXBENMN9gKlufYhDsVFW27LONz6RONqot/ahupHg6mFlyDc4ZLuaCdzOwJIzJo5XyX5JaOG8yi9337jFH8TfX5ZRnq/v8h93D/e/Hwf78y1dTlPgJBW/dmiF5ROmW+WvDOe5tFRzFofKkZxt05AUg9kzsAhxvjk1nggXsXT5HzSOUmkTLJPWdUzpklHGy/5gvV47QSDtueDskdTuhGiFIJJ31IeRo5F9C71Xpm6f8JALmbCECH6Q/dQorpqNWsLzCtFdbUHMlW1TWwunjlgtwug09NnR8kL5+g1+B0BzvOA4zbOYEj5zkPSKJBBYfCA5vglzWrJG/iqaNM6z316Bp+17WPx0+R6Vr6IHS0XNfny1gR4KIMeyWxDNoQ6R0wHRfDCEdGpIHKwbyY9Ec77cGrLiMjjQWKIgfbhYHfH4vKLKdyscPEYlSl+3Qj5GuqEKIfFDtwsq31kBNCRNUAsDpNMEdUDgDwYB1CAg+6xOjxALLA6ZPF/OtpIfgyKEib/u3MhQ4JPV+lKksUETL3mkjQ0Y0gBLcLrFtDzfQzIkKqZvcagNFhwbLE+Dg4QydFJNxsWGRSzF9PZsXZxPmYJq52c+s+LILx34DxHioOJAvJWnFlhsRFKhSfax+F67/lEMdQNV6+NejVw2DlUjlfP9Xm/UehXNc7eyVfU7zq+Y1P8AUjqGbXlAXvKgf3xQYB6RlwZ03e6lwQnFIn5qfrxfD7TfFeQltS2TpFHBqzdEfC3yEVseW14X+ebIA3jIQ8ux28SyO6K7rtABDcUsF7wXZg3NENftyxA4JkNcPdaLU0F4QsIYC9IKOAw9xYYiGPB6hBneJU8uV48LlWq1NWyae9huEwtyn+Fy0e44zpoUel+idm6cqnX1+E9qJvuaNRNsC9exRZPraRhMoqmGl2+aaHL18GwSTc+wa3zV5M7fS2xnqmqqEHw1JoTOmDFh9TGvUzUhLR0xumqCevB2AWYNvtqdvqsdjLraHW21TwqoIovvmKaAoF4+UgrIect+ZLrEmZtXuIOdZSHnmiXO3LS6EJzqQi/hZVvGFYbgVBjqTa/xNQ6cKkM/G/X1rQwhq3ttXCjqu+rKkG2bVxqC46QPDKUJ6psKQM8gfRmaID0VMImjE8sc4+pDyO7a1gp1pBdm37E6soF5FSCk5xGkPALXLI9s17QSENKzA5M+qgNmXA0I6VmFSR89x6/xBRKCo0RxVySQEOob+fmjRn563uKaBBI0rwqExsk9mEqTvnkEb9Q8AtLzCJNAOrHMM658hKZ/YvhJYnp9Mxdg1LKup2cuBCekWHqYPhbfNOt/bg3GD18rVwx4Csnm+Rub5b3a917B7X8=&lt;/diagram&gt;&lt;diagram name=&quot;types&quot; id=&quot;MBVU_OYnusstwsUWe-6x&quot;&gt;7VnZctowFP0aHmFsy+tjy9JOQ9p0MtMsLxlhC1uJjFxZBtyvr4xlvBGSQCA06RO+R1frPef6WnRAP1x+YTAKzqmHSEdTvGUHDDqapqqKKX4yJM2RrmqCHPEZ9qRXCVziP0iCikQT7KG45sgpJRxHddClsxlyeQ2DjNFF3W1KSX3WCPqoBVy6kLTRK+zxYL0xpWz4irAfyKltQzaEsHCWQBxAjy4qEBh2QJ9RyvOncNlHJDu94lzCZDied5PR3RlUHBqHA1PH3Xyw0Uu6rLfA0Iy/7tDAkXvjaXFgyBPnJ03KeEB9OoNkWKKfGU1mHsqGVYRV+owpjQSoCvAecZ5KMsCEUwEFPCSyFS0xv8669wxp3cjBsufBsmqk0vBgHKzmzAbIF52ttBHkJ05I+sU0YS7a4qdr6/gKZSAaIs5S0ZEhAjme12eFkqH+2m/d9YJisR5NkXLSLSPvIsXkFCIphuCQ+YjLXmUsPzEG04pblDnEj89jKI15jAY1nlpX3V885CsorMqZlNCKbi+gnq68BfXeA40M9TRp1FrXUWik/qfRjjQCJ0qj5rqOQiMtn3MOSVLQaBmxjibqH6DmLyAOeRqJWqbEegTHUYt/olCIskc3JVjQjAnHSU648aQg0AS6D/6Khj8SLtyQxKeYkD4llK2GAh5E9tQVeMwZfUCVFtO10WS6Zt8cMY6WO/CvTavHXgqWpMeiLKNMCQXVAqrBoioRKzHcGqLbb/2rBRje4gGC5zc4uhmxX903eV8UpYpaLVTWZcsJlCrWYZKDWdTHaVHON+P6StmhNZGqHUHu1m5yv4/p7IPIvQz4EfQ+/TkeXQxC5Y/z/S54WJz99hP739E7jaCLeWYZyjEULz/AcwFuczT3TA3PDd/WZTYkttJUz4vJQXVkINvTN+nI1ibANA+oI1VtJk6trSP7QDraHAj9dISkbVeSOHiWXleNiv4ys+y2sop+B5ec+UzJ7V2q7xdp43Qibb3zSO9dd+0XabOVXLPEWqlVOIOzOMJE5NEmJ8qIb0idSBXJ09qUOh3TAvCQqVMDzRIEtFNnUR7Wcqd5sNxpvaWiPtz9qLPbjcSGmyi9Z9i2IJTm6Kpq2fVhLadXtpm6U58k3/3xL2Gbm3+pv7rXd5Mwy78ycvfyHyEw/As=&lt;/diagram&gt;&lt;diagram name=&quot;ASC Exsmple&quot; id=&quot;85zO9aYcwFrSI-2Ip35K&quot;&gt;7VnLcpswFP0aL+MB8TAsUydNppM2ncmiTncCZFAiIypEAv36SkaYZ5w4jh+ZemXp6OoK6Z57uBYjY7rIrxhMou80QGQEtCAfGRcjAHRds8WPRIoSOdNto0RChgNlVQN3+C9SoKbQDAcobRlySgnHSRv0aRwjn7cwyBh9bpvNKWmvmsAQ9YA7H5I++gsHPFptTKsHrhEOI7W0Y6mBBayMFZBGMKDPDci4HBlTRikvW4t8iog8vepc8HXye2rBb7ehNiPmlUOsWX5WOvu6yZTVFhiK+ce6BmprvKjOCwXi+FSXMh7RkMaQXNboF0azOEDSqyZ6tc0NpYkAdQE+IM4LxQWYcSqgiC+IGkU55jM5fWyp3r1yJtsXebNTqE4A02i5pnRAE+hjLoeA9MBRzm/bULktuZcOC145QmWX0oz5aI2dtYq/yBxEF4izQsxjiECOn9qLQsXgcGW3mvqTYvE4QFPpZk6scopKNrdKosoFhyxEXM2qY33OGCwaZok0SF9ex9I661gd6rz2XG170SifoOo1zqSGlnTcgJrGIaj5X9DM0o+TZr3n2gfNzBPNdkUz40hp1n2ufdBMLfkESVbRLE/YCIjyytDLFxyHvEhEqVRjY4LTpMdPUYcksukXBAsaMmHolYS88SqCedB/DJc0vc24MEMKn2NCppRQtnRlBBA5c1/gKWf0ETVGbN9B3nwDdj4hJsbewc8+715660wUf57rOs5WUNSs4Do0azK1EeTNY2gfsliq2vetwulTFEuTnciLXVXwRfWHoxv4D9KX3kI62INgTN4lGA8pjU+C0WPEoRTD+SyKMRClTuTnjo/8wch7jmVa2h50xC3tyrRe5w9sKThbxdwdTNxlpo6DlOw0Oy3kBOZQjBzgGbZ90OzU9a5eg352OvvMzuqBjiE9wfr8FAfPilmz08hq2a2nLXufKq918MbE3vZ/ynZs0Y+HLZMTW15ny7Zl53ZsAb3XgHwFNGo1zmCcJpgIxe/yqmbNgMi/OQQfL+HA6BZYRl/Cq+q4peH2zjT8INeEpxvsl26K3ffd+QzcBZpjy3EE44Br6vrEabuduON6zDbd9iLl5vd/Td7d/Kb2+h7+V+pmT5iuKBQuzpfR9zJMgpFM4ZVQieafTH7k+lIqmNZUrmpIwFmK47A99W76Q4oDZY8eiv1ojdBJ69UHNn2XGgY6Gga0AQ0zBzTM3VzDRLf+PlhGsP7Malz+Aw==&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 395 67 L 395 47 L 365 47 L 365 13.37" fill="none" stroke="#000000" stroke-opacity="0.25" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 365 8.12 L 368.5 15.12 L 365 13.37 L 361.5 15.12 Z" fill-opacity="0.25" fill="#000000" stroke="#000000" stroke-opacity="0.25" stroke-miterlimit="10" pointer-events="all"/><path d="M 395 67 L 395 47 L 405 47 L 405 13.37" fill="none" stroke="#000000" stroke-opacity="0.25" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 405 8.12 L 408.5 15.12 L 405 13.37 L 401.5 15.12 Z" fill-opacity="0.25" fill="#000000" stroke="#000000" stroke-opacity="0.25" stroke-miterlimit="10" pointer-events="all"/><path d="M 395 67 L 395 47 L 425 47 L 425 13.37" fill="none" stroke="#000000" stroke-opacity="0.25" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 425 8.12 L 428.5 15.12 L 425 13.37 L 421.5 15.12 Z" fill-opacity="0.25" fill="#000000" stroke="#000000" stroke-opacity="0.25" stroke-miterlimit="10" pointer-events="all"/><path d="M 365 83 C 365 61.67 425 61.67 425 83 L 425 131 C 425 152.33 365 152.33 365 131 Z" fill-opacity="0.25" fill="#dae8fc" stroke="#6c8ebf" stroke-opacity="0.25" stroke-miterlimit="10" pointer-events="all"/><path d="M 365 83 C 365 99 425 99 425 83" fill="none" stroke="#6c8ebf" stroke-opacity="0.25" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px" opacity="0.25"><text x="394.5" y="108">expr</text><text x="394.5" y="122">datatypes</text><text x="394.5" y="136">.lisp</text></g><path d="M 425 217 L 490 217 L 490 183.37" fill="none" stroke="#000000" stroke-opacity="0.25" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 490 178.12 L 493.5 185.12 L 490 183.37 L 486.5 185.12 Z" fill-opacity="0.25" fill="#000000" stroke="#000000" stroke-opacity="0.25" stroke-miterlimit="10" pointer-events="all"/><path d="M 365 193 C 365 171.67 425 171.67 425 193 L 425 241 C 425 262.33 365 262.33 365 241 Z" fill-opacity="0.25" fill="#dae8fc" stroke="#6c8ebf" stroke-opacity="0.25" stroke-miterlimit="10" pointer-events="all"/><path d="M 365 193 C 365 209 425 209 425 193" fill="none" stroke="#6c8ebf" stroke-opacity="0.25" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px" opacity="0.25"><text x="394.5" y="218">expr</text><text x="394.5" y="232">datatypes</text><text x="394.5" y="246">.json</text></g><path d="M 80 157 L 118.63 157" fill="none" stroke="#b85450" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 123.88 157 L 116.88 160.5 L 118.63 157 L 116.88 153.5 Z" fill="#b85450" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/><path d="M 0 133 C 0 111.67 80 111.67 80 133 L 80 181 C 80 202.33 0 202.33 0 181 Z" fill-opacity="0.25" fill="#d5e8d4" stroke="#82b366" stroke-opacity="0.25" stroke-miterlimit="10" pointer-events="all"/><path d="M 0 133 C 0 149 80 149 80 133" fill="none" stroke="#82b366" stroke-opacity="0.25" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px" opacity="0.25"><text x="39.5" y="172">exprtypes.dsl</text></g><path d="M 245 142 L 305 142 L 305 107 L 358.63 107" fill="none" stroke="#b85450" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 363.88 107 L 356.88 110.5 L 358.63 107 L 356.88 103.5 Z" fill="#b85450" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/><path d="M 245 172 L 305 172 L 305 217 L 358.63 217" fill="none" stroke="#b85450" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 363.88 217 L 356.88 220.5 L 358.63 217 L 356.88 213.5 Z" fill="#b85450" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/><rect x="125" y="127" width="120" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="184.5" y="153.5">type</text><text x="184.5" y="167.5">transpiler</text></g><path d="M 395 67 L 395 47 L 385 47 L 385 13.37" fill="none" stroke="#000000" stroke-opacity="0.25" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 385 8.12 L 388.5 15.12 L 385 13.37 L 381.5 15.12 Z" fill-opacity="0.25" fill="#000000" stroke="#000000" stroke-opacity="0.25" stroke-miterlimit="10" pointer-events="all"/><rect x="115" y="297" width="140" height="90" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="115" y="297" width="140" height="90" fill="#ffffff" stroke="#000000" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="184.5" y="331.5">Goal: rebuild </text><text x="184.5" y="345.5">"type transpiler" using </text><text x="184.5" y="359.5">SCN workbench</text></g></g></svg>

