<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>PEG for Lisp</title>
  <meta name="CreationTime" content="2020-12-26T08:17:46Z">
  <meta name="ModificationTime" content="2020-12-26T08:17:46Z">
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1894.6">
  <style type="text/css">
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; text-indent: 18.0px; font: 13.0px Palatino; min-height: 18.0px}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Palatino}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: center; text-indent: 18.0px; font: 13.0px Palatino}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Palatino; color: #000000; -webkit-text-stroke: #000000; min-height: 18.0px}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; text-indent: 18.0px; font: 13.0px Palatino; color: #118696; -webkit-text-stroke: #118696}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Palatino; min-height: 18.0px}
    p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #000000; min-height: 14.0px}
    p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; text-indent: 18.0px; font: 13.0px Palatino}
    p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; text-indent: 18.0px; font: 13.0px Palatino; color: #474747; min-height: 18.0px}
    p.p15 {margin: 0.0px 0.0px 0.0px 36.0px; font: 11.0px Menlo}
    p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
    p.p18 {margin: 0.0px 0.0px 0.0px 36.0px; font: 11.0px Menlo; min-height: 13.0px}
    p.p19 {margin: 0.0px 0.0px 0.0px 36.0px; font: 11.0px Menlo; background-color: #fffc80}
    p.p21 {margin: 0.0px 0.0px 0.0px 36.0px; font: 9.0px Menlo}
    p.p22 {margin: 0.0px 0.0px 0.0px 36.0px; font: 9.0px Menlo; min-height: 10.0px}
    p.p23 {margin: 0.0px 0.0px 0.0px 36.0px; font: 9.0px Menlo; background-color: #fffc80}
    p.p24 {margin: 0.0px 0.0px 0.0px 36.0px; font: 9.0px Menlo; background-color: #fffc80; min-height: 10.0px}
    p.p25 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p27 {margin: 0.0px 0.0px 0.0px 36.0px; font: 9.0px Menlo; background-color: #ffffff}
    li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Palatino}
    li.li9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Palatino; min-height: 18.0px}
    li.li12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Palatino; color: #000000}
    span.s1 {font-kerning: none}
    span.s2 {text-decoration: underline ; font-kerning: none}
    span.s3 {color: #474747}
    span.s4 {font-kerning: none; color: #474747}
    span.s5 {font: 13.0px Symbol; font-kerning: none}
    span.s6 {background-color: #fffc80}
    span.Apple-tab-span {white-space:pre}
    table.t1 {border-collapse: collapse}
    td.td1 {border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #000000 #000000 #000000 #000000; padding: 0.0px 5.0px 0.0px 5.0px}
    td.td2 {border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #bfbfbf #bfbfbf #bfbfbf #bfbfbf; padding: 0.0px 5.0px 0.0px 5.0px}
    ul.ul1 {list-style-type: disc}
    ul.ul2 {list-style-type: circle}
  </style>
</head>
<body>
<div style="width: 600px; margin: 0 auto">

<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Introduction - Breakthrough Technology</b></h2>
<h2 style="margin: 13.0px 0.0px 0.0px 0.0px; text-align: center; font: 13.0px Times"><b>PEG is a breakthrough technology.</b></h2>
<p class="p3"><br></p>
<ul class="ul1">
  <li class="li4">In this essay, I explore how to use PEG instead of REGEX.</li>
  <li class="li4">I create examples of PEG in Ohm-JS and ESRAP (Common Lisp). <span class="Apple-converted-space"> </span></li>
  <li class="li4">These ideas should easily port to other version of PEG.</li>
  <li class="li4">PEG stands for Parsing Expression Grammars.</li>
</ul>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>PhD Thesis</b></h2>
<p class="p5">Bryan Ford’s Thesis</p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p7"><span class="s2">http://pdos.csail.mit.edu/~baford/packrat/thesis</span></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>PEG Enables SCLs</b></h2>
<h2 style="margin: 13.0px 0.0px 0.0px 0.0px; text-align: center; font: 13.0px Palatino"><b>PEG Enables SCLs.</b></h2>
<p class="p3"><br></p>
<ul class="ul1">
  <li class="li4">SCL means <i>Solution Centric Language.</i></li>
  <li class="li4">SCL is like DSL (but more focussed).</li>
</ul>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Many SCLs for One Project</b></h2>
<ul class="ul1">
  <li class="li4">We can use many SCLs for one project.</li>
  <li class="li4">We are used to the idea that a <i>programming language</i> is very general.</li>
  <li class="li4">We are used to the idea that one programming language serves many projects.</li>
  <li class="li4">Instead, we can use many little languages within one project. <span class="Apple-converted-space"> </span></li>
  <li class="li9"><br></li>
</ul>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Top Down Parsing</b></h2>
<h2 style="margin: 13.0px 0.0px 0.0px 0.0px; text-align: center; font: 13.0px Arial"><b>Top Down Parsing - Recursive Descent</b></h2>
<p class="p11"><span class="s1"></span><br></p>
<ul class="ul1">
  <li class="li12">Top Down Parsing is familiar to anyone who uses a recursive language</li>
  <li class="li12">Until Ford's thesis, TDPLs (Top Down Parsing Language) were either hand-built or used in lesser-known tools, such as S/SL, TXL, etc.</li>
  <li class="li12">Recursive languages are common, e.g. JavaScript, Python, C, etc.</li>
  <li class="li9"><span class="s1"></span><br></li>
</ul>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Why Management Disliked SCLs</b></h2>
<ul class="ul1">
  <li class="li4">DSLs used to be hard to design</li>
  <li class="li4">DSLs are a “whole language” unto themselves</li>
  <li class="li4">Needed to budget enormous amounts of time for DSL Development</li>
  <li class="li4">Can’t hire replaceable programmers for DSL languages</li>
  <li class="li4">Need to invest time learning DSL</li>
</ul>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Cheating - Using Existing Languages</b></h2>
<ul class="ul1">
  <li class="li4"><span class="s3"></span><span class="s1">What is a “good assembler”?</span>
  <ul class="ul2">
    <li class="li4"><span class="s1">Lisp</span></li>
    <li class="li4"><span class="s1">JavaScript</span></li>
  </ul></li>
</ul>
<p class="p9"><br></p>
<ul class="ul1">
  <li class="li4">A good <span class="s1">base language, i.e. nice to have:</span>
  <ul class="ul2">
    <li class="li4"><span class="s1">does not need declaration-before-use</span></li>
    <li class="li4"><span class="s1">first-class functions</span></li>
    <li class="li4"><span class="s1">closures</span></li>
    <li class="li4">no, or l<span class="s1">ittle, syntactic sugar</span></li>
    <li class="li4"><span class="s1">dynamic typing</span><span class="s4"><br>
</span></li>
    <li class="li9"><span class="s1"></span><br></li>
  </ul></li>
</ul>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>PEGs Are Better Than REGEXPs</b></h2>
<ul class="ul1">
  <li class="li4"><span class="s1">PEGs can parse languages that REGEXPs can’t parse</span></li>
  <li class="li4"><span class="s1">PEGs use a stack </span><span class="s5">→</span><span class="s1"> parsing subroutines</span></li>
  <li class="li9"><span class="s1"></span><br></li>
</ul>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>PEGs Are Better Than YACC</b></h2>
<ul class="ul1">
  <li class="li4"><span class="s1">PEGs define a <i>parser</i> in a “top down” manner</span></li>
  <li class="li4"><span class="s1">YACC (LR) defines a <i>language</i> in a “bottom up” manner</span></li>
  <li class="li4"><span class="s1">LR can be more rigorous but, also, harder to use</span></li>
  <li class="li4"><span class="s1">PEG (and recursive descent) can parse matching parentheses, YACC cannot</span></li>
  <li class="li4"><span class="s1">PEG does (some) backtracking, resulting in a “more natural” feeling for programmers  (PROLOG &amp; TXL do full backtracking, more than PEG)</span></li>
  <li class="li4"><span class="s1">PEG (packrat) memoizes some sequences, making backtracking tractable</span></li>
  <li class="li9"><span class="s1"></span><br></li>
</ul>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Unity Grammar</b></h2>
<ul class="ul1">
  <li class="li4"><span class="s1">PEG (TDPL) makes it possible to easily preserve spaces.</span></li>
  <li class="li4"><span class="s1">YACC does not preserve spaces (easily).</span></li>
  <li class="li4"><span class="s1">Unity Grammar === first step towards cheap and dirty transpilers</span></li>
  <li class="li4"><span class="s1">E.g. HTML </span><span class="s5">→</span><span class="s1"> HTML+</span></li>
  <li class="li9"><span class="s1"></span><br></li>
</ul>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Transpilers</b></h2>
<ul class="ul1">
  <li class="li4"><span class="s1">Source-to-source translation</span></li>
  <li class="li4"><span class="s1">Easy with PEG</span></li>
  <li class="li4"><span class="s1">Hard with YACC</span></li>
  <li class="li4"><span class="s1">example: markdown is a transpiler, e.g. .md syntax </span><span class="s5">→</span><span class="s1"> HTML</span></li>
  <li class="li4"><span class="s1">example: Shopify’s Liquid is a transpiler, e.g. HTML+restricted syntax {{ … }} </span><span class="s5">→</span><span class="s1"> HTML+JavaScript</span></li>
  <li class="li9"><span class="s1"></span><br></li>
</ul>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>PEG Syntax</b></h2>
<p class="p13"><span class="s1">(see section 2.3.1 of thesis)</span></p>
<p class="p3"><span class="s1"></span><br></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td1">
        <p class="p4"><span class="s1">Empty String</span></p>
      </td>
      <td valign="top" class="td1">
        <p class="p4"><span class="s1">''</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td1">
        <p class="p4"><span class="s1">Terminal (fancy word for character)</span></p>
      </td>
      <td valign="top" class="td1">
        <p class="p4"><span class="s1">'a'</span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td2">
        <p class="p4"><span class="s1">Non-Terminal (fancy word for a rule)<span class="Apple-tab-span">	</span></span></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p4"><span class="s1"><i>rule</i></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td2">
        <p class="p4"><span class="s1">Sequence<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p4"><span class="s1">e1 e2 e3 ...</span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td2">
        <p class="p4"><span class="s1">Choice<span class="Apple-tab-span">	</span></span></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p4"><span class="s1">e1 / e2 / e3 / ...</span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td2">
        <p class="p4"><span class="s1">0 or more<span class="Apple-tab-span">	</span></span></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p4"><span class="s1">e*</span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td2">
        <p class="p4"><span class="s1">1 or more<span class="Apple-tab-span">	</span></span></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p4"><span class="s1">e+</span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td2">
        <p class="p4"><span class="s1">Optional<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p4"><span class="s1">e?</span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td2">
        <p class="p4"><span class="s1">Followed-by<span class="Apple-tab-span">	</span></span></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p4"><span class="s1">&amp;e</span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td2">
        <p class="p4"><span class="s1">Not followed-by</span></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p4"><span class="s1">!e</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p14"><span class="s1"></span><br></p>
<p class="p3"><span class="s1"></span><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Example Trivial Arithmetic</b></h2>
<p class="p13"><span class="s1">E.g. trivial arithmetic expressions</span></p>
<p class="p3"><span class="s1"></span><br></p>
<p class="p15">E ← N  /  ‘(‘ E ‘+’ E ‘)’  /  ‘(‘ E ‘)-’ E ‘)’</p>
<p class="p15">N ← D N / D</p>
<p class="p15">D ← ‘0’ / … / ‘9’</p>
<p class="p3"><span class="s1"></span><br></p>
<p class="p13"><span class="s1">(note parsing of nested, matched, parentheses ‘(‘ … ‘)’</span></p>
<p class="p3"><span class="s1"></span><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Example - Match One Character</b></h2>
<p class="p16"><br></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td1">
        <p class="p4">REGEXP</p>
      </td>
      <td valign="top" class="td1">
        <p class="p4">PEG</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td1">
        <p class="p4">/a/</p>
      </td>
      <td valign="top" class="td1">
        <p class="p4">OneA = "a"</p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p3"><br></p>
<p class="p3"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>JavaScript</b></h2>
<h2 style="margin: 13.0px 0.0px 0.0px 0.0px; text-align: center; font: 13.0px Helvetica"><b>JavaScript</b></h2>
<p class="p15">const text = "a";</p>
<p class="p15">const re = /a/;</p>
<p class="p18"><br></p>
<p class="p15">function main () {</p>
<p class="p15"><span class="Apple-converted-space">    </span>if (re.test (text)) {</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>console.log ('Success');</p>
<p class="p15"><span class="Apple-converted-space">    </span>} else {</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>console.log ('Failure');</p>
<p class="p15"><span class="Apple-converted-space">    </span>}</p>
<p class="p15">}</p>
<p class="p15">main ();</p>
<p class="p18"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Common Lisp</b></h2>
<h2 style="margin: 13.0px 0.0px 0.0px 0.0px; text-align: center; font: 13.0px Palatino"><b>Common Lisp (ESRAP)</b></h2>
<p class="p3"><br></p>
<p class="p15">(defparameter text1 "a")</p>
<p class="p18"><br></p>
<p class="p15">(defun example1-esrap ()</p>
<p class="p15"><span class="Apple-converted-space">  </span>(esrap:defrule oneA #\a (:lambda (x) x))</p>
<p class="p15"><span class="Apple-converted-space">  </span>(esrap:parse 'oneA text1))</p>
<p class="p18"><br></p>
<p class="p18"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Ohm-JS</b></h2>
<h2 style="margin: 13.0px 0.0px 0.0px 0.0px; text-align: center; font: 13.0px Palatino"><b>Ohm-JS</b></h2>
<p class="p15">const text = "a";</p>
<p class="p18"><br></p>
<p class="p15">const example1_grammar = '</p>
<p class="p19">Example1 {</p>
<p class="p19"><span class="Apple-converted-space">  </span>OneA = "a"</p>
<p class="p15"><span class="s6">}</span>';</p>
<p class="p18"><br></p>
<p class="p15">const ohm = require ('ohm-js');</p>
<p class="p15">const ohmParser = ohm.grammar (example1_grammar);</p>
<p class="p15">const result = ohmParser.match (text);</p>
<p class="p18"><br></p>
<p class="p15">if (result.succeeded ()) {</p>
<p class="p15"><span class="Apple-converted-space">    </span>console.log ("Success");</p>
<p class="p15">} else {</p>
<p class="p15"><span class="Apple-converted-space">    </span>console.log ("Failure");</p>
<p class="p15">}</p>
<p class="p18"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Example - Match Two Characters</b></h2>
<p class="p16"><br></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td1">
        <p class="p4">REGEXP</p>
      </td>
      <td valign="top" class="td1">
        <p class="p4">PEG (Ohm-JS)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td1">
        <p class="p4">/ab/</p>
      </td>
      <td valign="top" class="td1">
        <p class="p4"><span class="Apple-converted-space">  </span>OneAThenOneB = OneA OneB</p>
        <p class="p4"><span class="Apple-converted-space">  </span>OneA = "a"</p>
        <p class="p4"><span class="Apple-converted-space">  </span>OneB = "b"</p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p3"><br></p>
<p class="p3"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>JavaScript</b></h2>
<h2 style="margin: 13.0px 0.0px 0.0px 0.0px; text-align: center; font: 13.0px Helvetica"><b>JavaScript</b></h2>
<p class="p3"><br></p>
<p class="p15">const text = "ab";</p>
<p class="p15">const re = /ab/;</p>
<p class="p18"><br></p>
<p class="p15">function main () {</p>
<p class="p15"><span class="Apple-converted-space">    </span>if (re.test (text)) {</p>
<p class="p15"><span class="Apple-tab-span">	</span>console.log ('Success');</p>
<p class="p15"><span class="Apple-converted-space">    </span>} else {</p>
<p class="p15"><span class="Apple-tab-span">	</span>console.log ('Failure'ß);</p>
<p class="p15"><span class="Apple-converted-space">    </span>}</p>
<p class="p15">}</p>
<p class="p15">main ();</p>
<p class="p18"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Common Lisp</b></h2>
<h2 style="margin: 13.0px 0.0px 0.0px 0.0px; text-align: center; font: 13.0px Palatino"><b>Common Lisp (ESRAP)</b></h2>
<p class="p3"><br></p>
<p class="p15">(defparameter text2 "ab")</p>
<p class="p18"><br></p>
<p class="p15">(defun example2-esrap ()</p>
<p class="p15"><span class="Apple-converted-space">  </span>(esrap:defrule oneA #\a (:lambda (x) x))</p>
<p class="p15"><span class="Apple-converted-space">  </span>(esrap:defrule oneB #\b (:lambda (x) x))</p>
<p class="p15"><span class="Apple-converted-space">  </span>(esrap:defrule oneAThenOneB (and oneA oneB) (:lambda (x) x))</p>
<p class="p15"><span class="Apple-converted-space">  </span>(esrap:parse 'oneAThenOneB text2))</p>
<p class="p18"><br></p>
<p class="p18"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Ohm-JS</b></h2>
<h1 style="margin: 13.0px 0.0px 0.0px 0.0px; text-align: center; font: 18.0px Palatino"><b>Ohm-JS</b></h1>
<p class="p15">const text = "ab";</p>
<p class="p18"><br></p>
<p class="p15">const example2_grammar = `</p>
<p class="p19">Example2 {</p>
<p class="p19"><span class="Apple-converted-space">  </span>OneAThenOneB = OneA OneB</p>
<p class="p19"><span class="Apple-converted-space">  </span>OneA = "a"</p>
<p class="p19"><span class="Apple-converted-space">  </span>OneB = "b"</p>
<p class="p15"><span class="s6">}</span>`;</p>
<p class="p18"><br></p>
<p class="p15">const ohm = require ('ohm-js');</p>
<p class="p15">const ohmParser = ohm.grammar (example2_grammar);</p>
<p class="p15">const result = ohmParser.match (text);</p>
<p class="p18"><br></p>
<p class="p15">if (result.succeeded ()) {</p>
<p class="p15"><span class="Apple-converted-space">    </span>console.log ("Ohm matching succeeded");</p>
<p class="p15">} else {</p>
<p class="p15"><span class="Apple-converted-space">    </span>console.log ("Ohm matching failed");</p>
<p class="p15">}</p>
<p class="p18"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Example - Groups</b></h2>
<p class="p16"><br></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td1">
        <p class="p4">REGEXP</p>
      </td>
      <td valign="top" class="td1">
        <p class="p4">PEG (Ohm-JS)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td1">
        <p class="p4">/(a)(b)/</p>
      </td>
      <td valign="top" class="td1">
        <p class="p4"><span class="Apple-converted-space">  </span>OneAThenOneB = OneA OneB</p>
        <p class="p4"><span class="Apple-converted-space">  </span>OneA = "a"</p>
        <p class="p4"><span class="Apple-converted-space">  </span>OneB = "b"</p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p3"><br></p>
<p class="p3"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>JavaScript</b></h2>
<h2 style="margin: 13.0px 0.0px 0.0px 0.0px; text-align: center; font: 13.0px Helvetica"><b>JavaScript</b></h2>
<p class="p3"><br></p>
<p class="p15">const text = "ab";</p>
<p class="p15">const re = /(a)(b)/;</p>
<p class="p18"><br></p>
<p class="p15">function main () {</p>
<p class="p15"><span class="Apple-converted-space">    </span>var matchArray = text.match (re);</p>
<p class="p15"><span class="Apple-converted-space">    </span>if (matchArray) {</p>
<p class="p15"><span class="Apple-tab-span">	</span>var first = matchArray[1];</p>
<p class="p15"><span class="Apple-tab-span">	</span>var second = matchArray[2];</p>
<p class="p15"><span class="Apple-tab-span">	</span>console.log (`(javascript) flipped is "${second}${first}"`);</p>
<p class="p15"><span class="Apple-converted-space">    </span>} else {</p>
<p class="p15"><span class="Apple-tab-span">	</span>console.log (`pattern failed`);</p>
<p class="p15"><span class="Apple-converted-space">    </span>}</p>
<p class="p15">}</p>
<p class="p15">main ();</p>
<p class="p18"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Common Lisp</b></h2>
<h2 style="margin: 13.0px 0.0px 0.0px 0.0px; text-align: center; font: 13.0px Palatino"><b>Common Lisp (ESRAP)</b></h2>
<p class="p3"><br></p>
<p class="p15">(defparameter text "ab")</p>
<p class="p18"><br></p>
<p class="p15">(defun example3-esrap ()</p>
<p class="p15"><span class="Apple-converted-space">  </span>(esrap:defrule oneA #\a (:lambda (x) x))</p>
<p class="p15"><span class="Apple-converted-space">  </span>(esrap:defrule oneB #\b (:lambda (x) x))</p>
<p class="p15"><span class="Apple-converted-space">  </span>(esrap:defrule oneAThenOneBAndFlip (and oneA oneB)<span class="Apple-converted-space"> </span></p>
<p class="p15"><span class="Apple-converted-space">     </span>(:destructure (a b) (list b a)))</p>
<p class="p15"><span class="Apple-converted-space">  </span>(esrap:parse 'oneAThenOneBAndFlip text))</p>
<p class="p18"><span class="Apple-converted-space">  </span></p>
<p class="p18"><br></p>
<p class="p18"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Ohm-JS</b></h2>
<h1 style="margin: 13.0px 0.0px 0.0px 0.0px; text-align: center; font: 18.0px Palatino"><b>Ohm-JS</b></h1>
<p class="p21">const text = `</p>
<p class="p21">&lt;svg width="800" height="800"&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id0" x="40" y="120" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id1" x="40" y="320" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id2" x="280" y="120" width="250" height="130"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id3" x="650" y="120" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id4" x="650" y="270" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id5" x="650" y="360" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id6" x="650" y="440" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21">&lt;/svg&gt;</p>
<p class="p21">`;</p>
<p class="p22"><br></p>
<p class="p22"><br></p>
<p class="p21">const example6_grammar = `</p>
<p class="p23">Example1 {</p>
<p class="p23"><span class="Apple-converted-space">  </span>SVGElement = "&lt;svg" SVGAttribute* "&gt;" SVGRect+ "&lt;/svg&gt;"</p>
<p class="p23"><span class="Apple-converted-space">  </span>SVGAttribute = WidthAttribute | HeightAttribute</p>
<p class="p23"><span class="Apple-converted-space">  </span>SVGRect = "&lt;rect" RectContent+ "&gt;" "&lt;/rect&gt;"</p>
<p class="p23"><span class="Apple-converted-space">  </span>RectContent = IDAttribute | XAttribute | YAttribute | WidthAttribute | HeightAttribute</p>
<p class="p24"><br></p>
<p class="p23"><span class="Apple-converted-space">  </span>IDAttribute = "id=" string</p>
<p class="p23"><span class="Apple-converted-space">  </span>XAttribute = "x=" integerString</p>
<p class="p23"><span class="Apple-converted-space">  </span>YAttribute = "y=" integerString</p>
<p class="p23"><span class="Apple-converted-space">  </span>WidthAttribute = "width=" integerString</p>
<p class="p23"><span class="Apple-converted-space">  </span>HeightAttribute = "height=" integerString</p>
<p class="p24"><br></p>
<p class="p23"><span class="Apple-converted-space">  </span>string = "\\"" notDQuote* "\\""</p>
<p class="p23"><span class="Apple-converted-space">  </span>notDQuote = ~"\\"" any</p>
<p class="p23"><span class="Apple-converted-space">  </span>integerString = "\\"" integerDigit+ "\\""</p>
<p class="p23"><span class="Apple-converted-space">  </span>integerDigit = "0" .. "9"</p>
<p class="p21"><span class="s6">}</span>`;</p>
<p class="p22"><br></p>
<p class="p21">const ohm = require ('ohm-js');</p>
<p class="p21">const ohmParser = ohm.grammar (example6_grammar);</p>
<p class="p21">const result = ohmParser.match (text);</p>
<p class="p22"><br></p>
<p class="p21">if (result.succeeded ()) {</p>
<p class="p21"><span class="Apple-converted-space">    </span>var semantics = ohmParser.createSemantics ();</p>
<p class="p21"><span class="Apple-converted-space">    </span>addExample6 (semantics);</p>
<p class="p21"><span class="Apple-converted-space">    </span>addJSON6 (semantics);</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log ('example6 ohm:');</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log (semantics (result).example6 ());</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log ('example6 ohm JSON:');</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log (semantics (result).JSON6 ());</p>
<p class="p21">} else {</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log ("Ohm matching failed");</p>
<p class="p21">}</p>
<p class="p22"><br></p>
<p class="p21">function addExample6 (semantics) {</p>
<p class="p21"><span class="Apple-converted-space">    </span>semantics.addOperation (</p>
<p class="p21"><span class="Apple-converted-space">        </span>'example6',</p>
<p class="p21"><span class="Apple-converted-space">        </span>{</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGElement: function (_svg, attrs, _gt, rects, _end) {</p>
<p class="p21"><span class="Apple-converted-space">                </span>return "&lt;svg" + attrs.example6 ().join ('') + "&gt;\n" + rects.example6 ().join ('\n') + "\n&lt;/svg&gt;"; },</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGAttribute: function (attribute) { return attribute.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGRect: function (_rect, contents, _gt, _end) {</p>
<p class="p21"><span class="Apple-converted-space">                </span>return "&lt;rect" + contents.example6 ().join ('') + "&gt;" + "&lt;/rect&gt;";},</p>
<p class="p21"><span class="Apple-converted-space">            </span>RectContent: function (attribute) { return attribute.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>IDAttribute: function (_id, str) {return "id=" + str.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>XAttribute: function (_x, n) { return "x=" + n.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>YAttribute: function (_y, n) { return "y=" + n.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>WidthAttribute: function (_w, n) { return "width="+ n.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>HeightAttribute: function (_h, n) { return "height=" + n.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>string: function (_q1, characters, _q2) { return '"' + characters.example6 ().join('') + '"'; },</p>
<p class="p21"><span class="Apple-converted-space">            </span>notDQuote: function (c) { return c.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>integerString: function (_q1, digits, _q2) { return '"' + digits.example6 ().join('') + '"'; },</p>
<p class="p21"><span class="Apple-converted-space">            </span>integerDigit: function (d) { return d.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>_terminal: function() { return this.primitiveValue; }</p>
<p class="p21"><span class="Apple-converted-space">        </span>}</p>
<p class="p21"><span class="Apple-converted-space">    </span>);</p>
<p class="p21">}</p>
<p class="p22"><br></p>
<p class="p21">function addJSON6 (semantics) {</p>
<p class="p21"><span class="Apple-converted-space">    </span>semantics.addOperation (</p>
<p class="p21"><span class="Apple-converted-space">        </span>'JSON6',</p>
<p class="p21"><span class="Apple-converted-space">        </span>{</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGElement: function (_svg, attrs, _gt, rects, _end) {</p>
<p class="p21"><span class="Apple-converted-space">                </span>return "svg {\n" + attrs.JSON6 ().join (',\n') + ",\ncontents: [\n<span class="Apple-converted-space">  </span>" + rects.JSON6 ().join (',\n<span class="Apple-converted-space">  </span>') + "\n]}"; },</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGAttribute: function (attribute) { return attribute.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGRect: function (_rect, contents, _gt, _end) {</p>
<p class="p21"><span class="Apple-converted-space">                </span>return "{ kind: 'rect', " + contents.JSON6 ().join (', ') + " }";},</p>
<p class="p21"><span class="Apple-converted-space">            </span>RectContent: function (attribute) { return attribute.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>IDAttribute: function (_id, str) {return "id: " + str.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>XAttribute: function (_x, n) { return "x: " + n.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>YAttribute: function (_y, n) { return "y: " + n.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>WidthAttribute: function (_w, n) { return "w: "+ n.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>HeightAttribute: function (_h, n) { return "h: " + n.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>string: function (_q1, characters, _q2) { return "'" + characters.JSON6 ().join('') + "'"; },</p>
<p class="p21"><span class="Apple-converted-space">            </span>notDQuote: function (c) { return c.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>integerString: function (_q1, digits, _q2) { return digits.JSON6 ().join(''); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>integerDigit: function (d) { return d.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>_terminal: function() { return this.primitiveValue; }</p>
<p class="p21"><span class="Apple-converted-space">        </span>}</p>
<p class="p21"><span class="Apple-converted-space">    </span>);</p>
<p class="p21">}</p>
<p class="p22"><br></p>
<p class="p22"><br></p>
<p class="p22"><br></p>
<p class="p22"><br></p>
<p class="p22"><br></p>
<p class="p22"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Example - Unity Grammar for HTML</b></h2>
<p class="p3"><br></p>
<p class="p21">const text = `</p>
<p class="p21">&lt;html&gt;</p>
<p class="p21"><span class="Apple-converted-space">  </span>&lt;title&gt;Top&lt;/title&gt;</p>
<p class="p21"><span class="Apple-converted-space">  </span>&lt;head&gt;</p>
<p class="p21"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>rect { fill:#DAE8FC }</p>
<p class="p21"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p21"><span class="Apple-converted-space">  </span>&lt;/head&gt;</p>
<p class="p21"><span class="Apple-converted-space">  </span>&lt;body&gt;</p>
<p class="p22"><span class="Apple-converted-space">    </span></p>
<p class="p21"><span class="Apple-converted-space">    </span>&lt;h1&gt;Top Part (Schematic)&lt;/h1&gt;</p>
<p class="p22"><span class="Apple-converted-space">    </span></p>
<p class="p21"><span class="Apple-converted-space">    </span>&lt;svg width="800" height="800"&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id0" x="40" y="120" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id1" x="40" y="320" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id2" x="280" y="120" width="250" height="130"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id3" x="650" y="120" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id4" x="650" y="270" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id5" x="650" y="360" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id6" x="650" y="440" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p22"><span class="Apple-converted-space">      </span></p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;text id="id7" x="50" y="150"&gt;FileSelector&lt;/text&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;text id="id8" x="50" y="350"&gt;TimeoutTimer&lt;/text&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;text id="id9" x="290" y="185"&gt;CallbackLogic&lt;/text&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;text id="id10" x="660" y="150"&gt;Display&lt;/text&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;text id="id11" x="660" y="320"&gt;ErrorHandler&lt;/text&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;text id="id12" x="660" y="410"&gt;AbortHandler&lt;/text&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;text id="id13" x="660" y="490"&gt;NoResponseHandler&lt;/text&gt;</p>
<p class="p22"><br></p>
<p class="p21"><span class="Apple-converted-space">    </span>&lt;/svg&gt;</p>
<p class="p22"><span class="Apple-converted-space">    </span></p>
<p class="p21"><span class="Apple-converted-space">  </span>&lt;/body&gt;</p>
<p class="p21">&lt;/html&gt;</p>
<p class="p21">`;</p>
<p class="p22"><br></p>
<p class="p21">const unityGrammar = `</p>
<p class="p21">htmlUnity {</p>
<p class="p21"><span class="Apple-converted-space">    </span>html = ws* htmlElement headerStuff bodyElement bodyStuff bodyElementEnd htmlEnd</p>
<p class="p21"><span class="Apple-converted-space">    </span>htmlElement = "&lt;html&gt;" ws*</p>
<p class="p21"><span class="Apple-converted-space">    </span>headerStuff = notBody*</p>
<p class="p21"><span class="Apple-converted-space">    </span>bodyElement = "&lt;body&gt;" ws*</p>
<p class="p21"><span class="Apple-converted-space">    </span>bodyStuff = notBodyEnd*<span class="Apple-converted-space">     </span></p>
<p class="p21"><span class="Apple-converted-space">    </span>notBody = ~"&lt;body&gt;" any</p>
<p class="p21"><span class="Apple-converted-space">    </span>notBodyEnd = ~"&lt;/body&gt;" any</p>
<p class="p21"><span class="Apple-converted-space">    </span>bodyElementEnd = "&lt;/body&gt;" ws*</p>
<p class="p21"><span class="Apple-converted-space">    </span>htmlEnd = "&lt;/html&gt;" ws*</p>
<p class="p21"><span class="Apple-converted-space">    </span>ws = " " | "\\t" | "\\n"</p>
<p class="p21">}</p>
<p class="p21">`;</p>
<p class="p22"><br></p>
<p class="p22"><br></p>
<p class="p21">const ohm = require ('ohm-js');</p>
<p class="p21">const ohmParser = ohm.grammar (unityGrammar);</p>
<p class="p21">const result = ohmParser.match (text);</p>
<p class="p22"><br></p>
<p class="p21">if (result.succeeded ()) {</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log ("Ohm matching succeeded");</p>
<p class="p21"><span class="Apple-converted-space">    </span>var semantics = ohmParser.createSemantics ();</p>
<p class="p21"><span class="Apple-converted-space">    </span>addUnity (semantics);</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log ('unity ohm:');</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log (semantics (result).unity ());</p>
<p class="p21">} else {</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log ("Ohm matching failed");</p>
<p class="p21">}</p>
<p class="p22"><br></p>
<p class="p21">function addUnity (semantics) {</p>
<p class="p21"><span class="Apple-converted-space">    </span>semantics.addOperation (</p>
<p class="p21"><span class="Apple-converted-space">        </span>'unity',</p>
<p class="p21"><span class="Apple-converted-space">        </span>{</p>
<p class="p21"><span class="Apple-converted-space">            </span>html: function (ws_plural, htmlElement, headerStuff, bodyElement, bodyStuff, bodyElementEnd, htmlEnd) { return ws_plural.unity ().join ('') + htmlElement.unity () + headerStuff.unity () +</p>
<p class="p21"><span class="Apple-converted-space">                                                                                                                    </span>bodyElement.unity () + bodyStuff.unity () + bodyElementEnd.unity () + htmlEnd.unity (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>htmlElement: function (html, ws_plural) { return html.unity () + ws_plural.unity ().join('');},</p>
<p class="p21"><span class="Apple-converted-space">            </span>headerStuff: function (notBody_plural) { return notBody_plural.unity ().join(''); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>bodyElement: function (body, ws_plural) { return body.unity () + ws_plural.unity ().join (''); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>bodyStuff: function (notBodyEnd_plural) { return notBodyEnd_plural.unity ().join (''); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>notBody: function (any) { return any.unity (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>notBodyEnd: function (any) { return any.unity (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>bodyElementEnd: function (slash_body, ws_plural) { return slash_body.unity () + ws_plural.unity ().join (''); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>htmlEnd: function (slash_html, ws_plural) { return slash_html.unity () + ws_plural.unity ().join (''); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>ws: function (c) { return c.unity (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>_terminal: function() { return this.primitiveValue; }</p>
<p class="p21"><span class="Apple-converted-space">        </span>}</p>
<p class="p21"><span class="Apple-converted-space">    </span>);};</p>
<p class="p22"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Ohm-JS</b></h2>
<p class="p3"><br></p>
<p class="p21">const text = `</p>
<p class="p21">&lt;html&gt;</p>
<p class="p21"><span class="Apple-converted-space">  </span>&lt;title&gt;Top&lt;/title&gt;</p>
<p class="p21"><span class="Apple-converted-space">  </span>&lt;head&gt;</p>
<p class="p21"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>rect { fill:#DAE8FC }</p>
<p class="p21"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p21"><span class="Apple-converted-space">  </span>&lt;/head&gt;</p>
<p class="p21"><span class="Apple-converted-space">  </span>&lt;body&gt;</p>
<p class="p22"><span class="Apple-converted-space">    </span></p>
<p class="p21"><span class="Apple-converted-space">    </span>&lt;h1&gt;Top Part (Schematic)&lt;/h1&gt;</p>
<p class="p22"><span class="Apple-converted-space">    </span></p>
<p class="p21"><span class="Apple-converted-space">    </span>&lt;svg width="800" height="800"&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id0" x="40" y="120" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id1" x="40" y="320" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id2" x="280" y="120" width="250" height="130"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id3" x="650" y="120" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id4" x="650" y="270" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id5" x="650" y="360" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id6" x="650" y="440" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p22"><span class="Apple-converted-space">      </span></p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;text id="id7" x="50" y="150"&gt;FileSelector&lt;/text&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;text id="id8" x="50" y="350"&gt;TimeoutTimer&lt;/text&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;text id="id9" x="290" y="185"&gt;CallbackLogic&lt;/text&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;text id="id10" x="660" y="150"&gt;Display&lt;/text&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;text id="id11" x="660" y="320"&gt;ErrorHandler&lt;/text&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;text id="id12" x="660" y="410"&gt;AbortHandler&lt;/text&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;text id="id13" x="660" y="490"&gt;NoResponseHandler&lt;/text&gt;</p>
<p class="p22"><br></p>
<p class="p21"><span class="Apple-converted-space">    </span>&lt;/svg&gt;</p>
<p class="p22"><span class="Apple-converted-space">    </span></p>
<p class="p21"><span class="Apple-converted-space">  </span>&lt;/body&gt;</p>
<p class="p21">&lt;/html&gt;</p>
<p class="p21">`;</p>
<p class="p22"><br></p>
<p class="p21">const unityGrammar = `</p>
<p class="p23">htmlUnity {</p>
<p class="p23"><span class="Apple-converted-space">    </span>html = ws* htmlElement headerStuff bodyElement bodyStuff bodyElementEnd htmlEnd</p>
<p class="p23"><span class="Apple-converted-space">    </span>htmlElement = "&lt;html&gt;" ws*</p>
<p class="p23"><span class="Apple-converted-space">    </span>headerStuff = notBody*</p>
<p class="p23"><span class="Apple-converted-space">    </span>bodyElement = "&lt;body&gt;" ws*</p>
<p class="p23"><span class="Apple-converted-space">    </span>bodyStuff = notBodyEnd*<span class="Apple-converted-space">     </span></p>
<p class="p23"><span class="Apple-converted-space">    </span>notBody = ~"&lt;body&gt;" any</p>
<p class="p23"><span class="Apple-converted-space">    </span>notBodyEnd = ~"&lt;/body&gt;" any</p>
<p class="p23"><span class="Apple-converted-space">    </span>bodyElementEnd = "&lt;/body&gt;" ws*</p>
<p class="p23"><span class="Apple-converted-space">    </span>htmlEnd = "&lt;/html&gt;" ws*</p>
<p class="p23"><span class="Apple-converted-space">    </span>ws = " " | "\\t" | "\\n"</p>
<p class="p21"><span class="s6">}</span></p>
<p class="p21">`;</p>
<p class="p22"><br></p>
<p class="p22"><br></p>
<p class="p21">const ohm = require ('ohm-js');</p>
<p class="p21">const ohmParser = ohm.grammar (unityGrammar);</p>
<p class="p21">const result = ohmParser.match (text);</p>
<p class="p22"><br></p>
<p class="p21">if (result.succeeded ()) {</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log ("Ohm matching succeeded");</p>
<p class="p21"><span class="Apple-converted-space">    </span>var semantics = ohmParser.createSemantics ();</p>
<p class="p21"><span class="Apple-converted-space">    </span>addUnity (semantics);</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log ('unity ohm:');</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log (semantics (result).unity ());</p>
<p class="p21">} else {</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log ("Ohm matching failed");</p>
<p class="p21">}</p>
<p class="p22"><br></p>
<p class="p21">function addUnity (semantics) {</p>
<p class="p21"><span class="Apple-converted-space">    </span>semantics.addOperation (</p>
<p class="p21"><span class="Apple-converted-space">        </span>'unity',</p>
<p class="p21"><span class="Apple-converted-space">        </span>{</p>
<p class="p21"><span class="Apple-converted-space">            </span>html: function (ws_plural, htmlElement, headerStuff, bodyElement, bodyStuff, bodyElementEnd, htmlEnd) { return ws_plural.unity ().join ('') + htmlElement.unity () + headerStuff.unity () +</p>
<p class="p21"><span class="Apple-converted-space">                                                                                                                    </span>bodyElement.unity () + bodyStuff.unity () + bodyElementEnd.unity () + htmlEnd.unity (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>htmlElement: function (html, ws_plural) { return html.unity () + ws_plural.unity ().join('');},</p>
<p class="p21"><span class="Apple-converted-space">            </span>headerStuff: function (notBody_plural) { return notBody_plural.unity ().join(''); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>bodyElement: function (body, ws_plural) { return body.unity () + ws_plural.unity ().join (''); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>bodyStuff: function (notBodyEnd_plural) { return notBodyEnd_plural.unity ().join (''); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>notBody: function (any) { return any.unity (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>notBodyEnd: function (any) { return any.unity (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>bodyElementEnd: function (slash_body, ws_plural) { return slash_body.unity () + ws_plural.unity ().join (''); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>htmlEnd: function (slash_html, ws_plural) { return slash_html.unity () + ws_plural.unity ().join (''); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>ws: function (c) { return c.unity (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>_terminal: function() { return this.primitiveValue; }</p>
<p class="p21"><span class="Apple-converted-space">        </span>}</p>
<p class="p21"><span class="Apple-converted-space">    </span>);};</p>
<p class="p22"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Example - SVG Parser</b></h2>
<p class="p16"><br></p>
<p class="p25">(can't do this in REGEXP)</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Common Lisp</b></h2>
<h2 style="margin: 13.0px 0.0px 0.0px 0.0px; text-align: center; font: 13.0px Palatino"><b>Common Lisp (ESRAP)</b></h2>
<p class="p18"><br></p>
<p class="p18"><br></p>
<p class="p22"><br></p>
<p class="p21">const text = `</p>
<p class="p21">&lt;svg width="800" height="800"&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id0" x="40" y="120" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id1" x="40" y="320" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id2" x="280" y="120" width="250" height="130"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id3" x="650" y="120" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id4" x="650" y="270" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id5" x="650" y="360" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21"><span class="Apple-converted-space">      </span>&lt;rect id="id6" x="650" y="440" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p21">&lt;/svg&gt;</p>
<p class="p21">`;</p>
<p class="p22"><br></p>
<p class="p22"><br></p>
<p class="p21">const example6_grammar = `</p>
<p class="p21">Example1 {</p>
<p class="p21"><span class="Apple-converted-space">  </span>SVGElement = "&lt;svg" SVGAttribute* "&gt;" SVGRect+ "&lt;/svg&gt;"</p>
<p class="p21"><span class="Apple-converted-space">  </span>SVGAttribute = WidthAttribute | HeightAttribute</p>
<p class="p21"><span class="Apple-converted-space">  </span>SVGRect = "&lt;rect" RectContent+ "&gt;" "&lt;/rect&gt;"</p>
<p class="p21"><span class="Apple-converted-space">  </span>RectContent = IDAttribute | XAttribute | YAttribute | WidthAttribute | HeightAttribute</p>
<p class="p22"><br></p>
<p class="p21"><span class="Apple-converted-space">  </span>IDAttribute = "id=" string</p>
<p class="p21"><span class="Apple-converted-space">  </span>XAttribute = "x=" integerString</p>
<p class="p21"><span class="Apple-converted-space">  </span>YAttribute = "y=" integerString</p>
<p class="p21"><span class="Apple-converted-space">  </span>WidthAttribute = "width=" integerString</p>
<p class="p21"><span class="Apple-converted-space">  </span>HeightAttribute = "height=" integerString</p>
<p class="p22"><br></p>
<p class="p21"><span class="Apple-converted-space">  </span>string = "\\"" notDQuote* "\\""</p>
<p class="p21"><span class="Apple-converted-space">  </span>notDQuote = ~"\\"" any</p>
<p class="p21"><span class="Apple-converted-space">  </span>integerString = "\\"" integerDigit+ "\\""</p>
<p class="p21"><span class="Apple-converted-space">  </span>integerDigit = "0" .. "9"</p>
<p class="p21">}`;</p>
<p class="p22"><br></p>
<p class="p21">const ohm = require ('ohm-js');</p>
<p class="p21">const ohmParser = ohm.grammar (example6_grammar);</p>
<p class="p21">const result = ohmParser.match (text);</p>
<p class="p22"><br></p>
<p class="p21">if (result.succeeded ()) {</p>
<p class="p21"><span class="Apple-converted-space">    </span>var semantics = ohmParser.createSemantics ();</p>
<p class="p21"><span class="Apple-converted-space">    </span>addExample6 (semantics);</p>
<p class="p21"><span class="Apple-converted-space">    </span>addJSON6 (semantics);</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log ('example6 ohm:');</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log (semantics (result).example6 ());</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log ('example6 ohm JSON:');</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log (semantics (result).JSON6 ());</p>
<p class="p21">} else {</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log ("Ohm matching failed");</p>
<p class="p21">}</p>
<p class="p22"><br></p>
<p class="p21">function addExample6 (semantics) {</p>
<p class="p21"><span class="Apple-converted-space">    </span>semantics.addOperation (</p>
<p class="p21"><span class="Apple-converted-space">        </span>'example6',</p>
<p class="p21"><span class="Apple-converted-space">        </span>{</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGElement: function (_svg, attrs, _gt, rects, _end) {</p>
<p class="p21"><span class="Apple-converted-space">                </span>return "&lt;svg" + attrs.example6 ().join ('') + "&gt;\n" + rects.example6 ().join ('\n') + "\n&lt;/svg&gt;"; },</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGAttribute: function (attribute) { return attribute.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGRect: function (_rect, contents, _gt, _end) {</p>
<p class="p21"><span class="Apple-converted-space">                </span>return "&lt;rect" + contents.example6 ().join ('') + "&gt;" + "&lt;/rect&gt;";},</p>
<p class="p21"><span class="Apple-converted-space">            </span>RectContent: function (attribute) { return attribute.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>IDAttribute: function (_id, str) {return "id=" + str.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>XAttribute: function (_x, n) { return "x=" + n.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>YAttribute: function (_y, n) { return "y=" + n.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>WidthAttribute: function (_w, n) { return "width="+ n.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>HeightAttribute: function (_h, n) { return "height=" + n.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>string: function (_q1, characters, _q2) { return '"' + characters.example6 ().join('') + '"'; },</p>
<p class="p21"><span class="Apple-converted-space">            </span>notDQuote: function (c) { return c.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>integerString: function (_q1, digits, _q2) { return '"' + digits.example6 ().join('') + '"'; },</p>
<p class="p21"><span class="Apple-converted-space">            </span>integerDigit: function (d) { return d.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>_terminal: function() { return this.primitiveValue; }</p>
<p class="p21"><span class="Apple-converted-space">        </span>}</p>
<p class="p21"><span class="Apple-converted-space">    </span>);</p>
<p class="p21">}</p>
<p class="p22"><br></p>
<p class="p21">function addJSON6 (semantics) {</p>
<p class="p21"><span class="Apple-converted-space">    </span>semantics.addOperation (</p>
<p class="p21"><span class="Apple-converted-space">        </span>'JSON6',</p>
<p class="p21"><span class="Apple-converted-space">        </span>{</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGElement: function (_svg, attrs, _gt, rects, _end) {</p>
<p class="p21"><span class="Apple-converted-space">                </span>return "svg {\n" + attrs.JSON6 ().join (',\n') + ",\ncontents: [\n<span class="Apple-converted-space">  </span>" + rects.JSON6 ().join (',\n<span class="Apple-converted-space">  </span>') + "\n]}"; },</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGAttribute: function (attribute) { return attribute.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGRect: function (_rect, contents, _gt, _end) {</p>
<p class="p21"><span class="Apple-converted-space">                </span>return "{ kind: 'rect', " + contents.JSON6 ().join (', ') + " }";},</p>
<p class="p21"><span class="Apple-converted-space">            </span>RectContent: function (attribute) { return attribute.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>IDAttribute: function (_id, str) {return "id: " + str.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>XAttribute: function (_x, n) { return "x: " + n.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>YAttribute: function (_y, n) { return "y: " + n.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>WidthAttribute: function (_w, n) { return "w: "+ n.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>HeightAttribute: function (_h, n) { return "h: " + n.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>string: function (_q1, characters, _q2) { return "'" + characters.JSON6 ().join('') + "'"; },</p>
<p class="p21"><span class="Apple-converted-space">            </span>notDQuote: function (c) { return c.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>integerString: function (_q1, digits, _q2) { return digits.JSON6 ().join(''); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>integerDigit: function (d) { return d.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>_terminal: function() { return this.primitiveValue; }</p>
<p class="p21"><span class="Apple-converted-space">        </span>}</p>
<p class="p21"><span class="Apple-converted-space">    </span>);</p>
<p class="p21">}</p>
<p class="p22"><br></p>
<p class="p22"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Ohm-JS</b></h2>
<h1 style="margin: 13.0px 0.0px 0.0px 0.0px; text-align: center; font: 9.0px Palatino"><b>Ohm-JS</b></h1>
<p class="p22"><br></p>
<p class="p21">const text = `</p>
<p class="p27">&lt;svg width="800" height="800"&gt;</p>
<p class="p27"><span class="Apple-converted-space">      </span>&lt;rect id="id0" x="40" y="120" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p27"><span class="Apple-converted-space">      </span>&lt;rect id="id1" x="40" y="320" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p27"><span class="Apple-converted-space">      </span>&lt;rect id="id2" x="280" y="120" width="250" height="130"&gt;&lt;/rect&gt;</p>
<p class="p27"><span class="Apple-converted-space">      </span>&lt;rect id="id3" x="650" y="120" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p27"><span class="Apple-converted-space">      </span>&lt;rect id="id4" x="650" y="270" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p27"><span class="Apple-converted-space">      </span>&lt;rect id="id5" x="650" y="360" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p27"><span class="Apple-converted-space">      </span>&lt;rect id="id6" x="650" y="440" width="150" height="60"&gt;&lt;/rect&gt;</p>
<p class="p27">&lt;/svg&gt;</p>
<p class="p21">`;</p>
<p class="p22"><br></p>
<p class="p22"><br></p>
<p class="p21">const example6_grammar = `</p>
<p class="p23">Example1 {</p>
<p class="p23"><span class="Apple-converted-space">  </span>SVGElement = "&lt;svg" SVGAttribute* "&gt;" SVGRect+ "&lt;/svg&gt;"</p>
<p class="p23"><span class="Apple-converted-space">  </span>SVGAttribute = WidthAttribute | HeightAttribute</p>
<p class="p23"><span class="Apple-converted-space">  </span>SVGRect = "&lt;rect" RectContent+ "&gt;" "&lt;/rect&gt;"</p>
<p class="p23"><span class="Apple-converted-space">  </span>RectContent = IDAttribute | XAttribute | YAttribute | WidthAttribute | HeightAttribute</p>
<p class="p24"><br></p>
<p class="p23"><span class="Apple-converted-space">  </span>IDAttribute = "id=" string</p>
<p class="p23"><span class="Apple-converted-space">  </span>XAttribute = "x=" integerString</p>
<p class="p23"><span class="Apple-converted-space">  </span>YAttribute = "y=" integerString</p>
<p class="p23"><span class="Apple-converted-space">  </span>WidthAttribute = "width=" integerString</p>
<p class="p23"><span class="Apple-converted-space">  </span>HeightAttribute = "height=" integerString</p>
<p class="p24"><br></p>
<p class="p23"><span class="Apple-converted-space">  </span>string = "\\"" notDQuote* "\\""</p>
<p class="p23"><span class="Apple-converted-space">  </span>notDQuote = ~"\\"" any</p>
<p class="p23"><span class="Apple-converted-space">  </span>integerString = "\\"" integerDigit+ "\\""</p>
<p class="p23"><span class="Apple-converted-space">  </span>integerDigit = "0" .. "9"</p>
<p class="p21"><span class="s6">}</span>`;</p>
<p class="p22"><br></p>
<p class="p21">const ohm = require ('ohm-js');</p>
<p class="p21">const ohmParser = ohm.grammar (example6_grammar);</p>
<p class="p21">const result = ohmParser.match (text);</p>
<p class="p22"><br></p>
<p class="p21">if (result.succeeded ()) {</p>
<p class="p21"><span class="Apple-converted-space">    </span>var semantics = ohmParser.createSemantics ();</p>
<p class="p21"><span class="Apple-converted-space">    </span>addExample6 (semantics);</p>
<p class="p21"><span class="Apple-converted-space">    </span>addJSON6 (semantics);</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log ('example6 ohm:');</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log (semantics (result).example6 ());</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log ('example6 ohm JSON:');</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log (semantics (result).JSON6 ());</p>
<p class="p21">} else {</p>
<p class="p21"><span class="Apple-converted-space">    </span>console.log ("Ohm matching failed");</p>
<p class="p21">}</p>
<p class="p22"><br></p>
<p class="p21">function addExample6 (semantics) {</p>
<p class="p21"><span class="Apple-converted-space">    </span>semantics.addOperation (</p>
<p class="p21"><span class="Apple-converted-space">        </span>'example6',</p>
<p class="p21"><span class="Apple-converted-space">        </span>{</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGElement: function (_svg, attrs, _gt, rects, _end) {</p>
<p class="p21"><span class="Apple-converted-space">                </span>return "&lt;svg" + attrs.example6 ().join ('') + "&gt;\n" + rects.example6 ().join ('\n') + "\n&lt;/svg&gt;"; },</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGAttribute: function (attribute) { return attribute.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGRect: function (_rect, contents, _gt, _end) {</p>
<p class="p21"><span class="Apple-converted-space">                </span>return "&lt;rect" + contents.example6 ().join ('') + "&gt;" + "&lt;/rect&gt;";},</p>
<p class="p21"><span class="Apple-converted-space">            </span>RectContent: function (attribute) { return attribute.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>IDAttribute: function (_id, str) {return "id=" + str.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>XAttribute: function (_x, n) { return "x=" + n.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>YAttribute: function (_y, n) { return "y=" + n.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>WidthAttribute: function (_w, n) { return "width="+ n.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>HeightAttribute: function (_h, n) { return "height=" + n.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>string: function (_q1, characters, _q2) { return '"' + characters.example6 ().join('') + '"'; },</p>
<p class="p21"><span class="Apple-converted-space">            </span>notDQuote: function (c) { return c.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>integerString: function (_q1, digits, _q2) { return '"' + digits.example6 ().join('') + '"'; },</p>
<p class="p21"><span class="Apple-converted-space">            </span>integerDigit: function (d) { return d.example6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>_terminal: function() { return this.primitiveValue; }</p>
<p class="p21"><span class="Apple-converted-space">        </span>}</p>
<p class="p21"><span class="Apple-converted-space">    </span>);</p>
<p class="p21">}</p>
<p class="p22"><br></p>
<p class="p21">function addJSON6 (semantics) {</p>
<p class="p21"><span class="Apple-converted-space">    </span>semantics.addOperation (</p>
<p class="p21"><span class="Apple-converted-space">        </span>'JSON6',</p>
<p class="p21"><span class="Apple-converted-space">        </span>{</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGElement: function (_svg, attrs, _gt, rects, _end) {</p>
<p class="p21"><span class="Apple-converted-space">                </span>return "svg {\n" + attrs.JSON6 ().join (',\n') + ",\ncontents: [\n<span class="Apple-converted-space">  </span>" + rects.JSON6 ().join (',\n<span class="Apple-converted-space">  </span>') + "\n]}"; },</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGAttribute: function (attribute) { return attribute.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>SVGRect: function (_rect, contents, _gt, _end) {</p>
<p class="p21"><span class="Apple-converted-space">                </span>return "{ kind: 'rect', " + contents.JSON6 ().join (', ') + " }";},</p>
<p class="p21"><span class="Apple-converted-space">            </span>RectContent: function (attribute) { return attribute.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>IDAttribute: function (_id, str) {return "id: " + str.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>XAttribute: function (_x, n) { return "x: " + n.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>YAttribute: function (_y, n) { return "y: " + n.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>WidthAttribute: function (_w, n) { return "w: "+ n.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>HeightAttribute: function (_h, n) { return "h: " + n.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>string: function (_q1, characters, _q2) { return "'" + characters.JSON6 ().join('') + "'"; },</p>
<p class="p21"><span class="Apple-converted-space">            </span>notDQuote: function (c) { return c.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>integerString: function (_q1, digits, _q2) { return digits.JSON6 ().join(''); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>integerDigit: function (d) { return d.JSON6 (); },</p>
<p class="p21"><span class="Apple-converted-space">            </span>_terminal: function() { return this.primitiveValue; }</p>
<p class="p21"><span class="Apple-converted-space">        </span>}</p>
<p class="p21"><span class="Apple-converted-space">    </span>);</p>
<p class="p21">}</p>
<p class="p22"><br></p>
<p class="p22"><br></p>
<p class="p22"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Ohm-JS Grammar IDE</b></h2>
<p class="p13">(<i>see next instalment</i>)</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Grammar First</b></h2>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Test Cases</b></h2>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Add Support Code Later</b></h2>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Example - Transpile Ohm Grammars to Other Languages</b></h2>
<p class="p13">(<i>see next instalment</i>)</p>
</div>
</body>
</html>
