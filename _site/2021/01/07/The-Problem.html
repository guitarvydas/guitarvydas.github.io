<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>Untitled</title>
  <meta name="CreationTime" content="2021-01-07T09:25:12Z">
  <meta name="ModificationTime" content="2021-01-07T09:25:12Z">
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1894.6">
  <style type="text/css">
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; text-indent: 18.0px; font: 13.0px Palatino}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; text-indent: 18.0px; font: 13.0px Palatino; min-height: 18.0px}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Palatino}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Palatino; min-height: 18.0px}
    p.p6 {margin: 0.0px 0.0px 0.0px 36.0px; text-indent: -36.0px; font: 12.0px Helvetica}
    li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Palatino}
    span.s1 {text-decoration: underline}
    span.s2 {font: 13.0px Palatino}
    ul.ul1 {list-style-type: disc}
  </style>
</head>
<body>
<div style="width: 600px; margin: 0 auto">

<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>THE PROBLEM</b></h2>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>The Bad - Normal People</b></h2>
<p class="p2">I was invited to advise a lawyer friend.</p>
<p class="p3"><br></p>
<p class="p2">He wanted a website built for his company.</p>
<p class="p3"><br></p>
<p class="p2">Two weeks went by and the website project was not yet finished.</p>
<p class="p3"><br></p>
<p class="p2">He brought the software contractor in and expected to run him over the coals, with my assistance.</p>
<p class="p3"><br></p>
<p class="p2">When the contractor described the project and his current status, I ended up agreeing with him.</p>
<p class="p3"><br></p>
<p class="p2">The lawyer was flabbergasted.<span class="Apple-converted-space">  </span>Two weeks, for a simple brochure?<span class="Apple-converted-space">  </span>Two weeks of paying consulting rates?</p>
<p class="p3"><br></p>
<p class="p2">I had to explain to my lawyer friend that software development is not built out of black boxes pulled from a shelf.<span class="Apple-converted-space">  </span>This was a custom job and that he should not expect the job to be finished yet.</p>
<p class="p3"><br></p>
<p class="p2">My lawyer friend did not like my answer.</p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>The Bad - Programmers</b></h2>
<p class="p2">I gave a demo and showed a <i>working</i> version of some software to a client.</p>
<p class="p3"><br></p>
<p class="p2">His techie grilled me on how I used mutexes in my software.<span class="Apple-converted-space">  </span>I told him that I didn’t use mutexes, at which point he declared that the demo was faked. <span class="Apple-converted-space"> </span></p>
<p class="p3"><br></p>
<p class="p2">I was a liar and couldn’t possibly have finished the development work in so short a time.</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>The Bad - Assets</b></h2>
<p class="p2">I have a friend who works in the Film &amp; T.V. industry.</p>
<p class="p3"><br></p>
<p class="p2">He dabbles in software development.</p>
<p class="p3"><br></p>
<p class="p2">I asked him how his company manages projects.</p>
<p class="p3"><br></p>
<p class="p2">His response was “Why do you want to know?<span class="Apple-converted-space">  </span>These ideas can’t be applied to software development.”</p>
<p class="p3"><br></p>
<p class="p2">After more prodding, he told me that Film and T.V. Development was based on a divide and conquer strategy.<span class="Apple-converted-space">  </span>Work is farmed out to contractors and the contractors return results as assets (3D graphical objects, in this case).</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Don't Care</b></h2>
<p class="p2">My friend has created a product for the equestrian world.</p>
<p class="p3"><br></p>
<p class="p2">The product uses some 40 CPUs.</p>
<p class="p3"><br></p>
<p class="p2">Each CPU has only about 16K (K not M) of memory.</p>
<p class="p3"><br></p>
<p class="p2">My friend does not have problems with multitasking.</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Order Matters</b></h2>
<p class="p2">Order of operation should not matter to produce a given result.</p>
<p class="p3"><br></p>
<p class="p2">But, order <i>does</i> matter in software.</p>
<p class="p3"><br></p>
<p class="p2">I show this problem in <a href="https://guitarvydas.github.io/2020/12/09/CALL-RETURN-Spaghetti.html">https://guitarvydas.github.io/2020/12/09/CALL-RETURN-Spaghetti.html</a>.</p>
<p class="p3"><br></p>
<p class="p2">In that essay, I show that we cannot rely on the operation of even a simple 2-box system of software.</p>
<p class="p3"><br></p>
<p class="p2">Real black boxes don’t work that way.<span class="Apple-converted-space">  </span>If we have two black boxes plugged together, then we get the same result every time, regardless of how the innards of the black boxes (and the wiring between them) is implemented.</p>
<p class="p3"><br></p>
<p class="p2">This does not happen in software.</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Black Boxes</b></h2>
<p class="p2">Everyone <i>thinks</i> that software is built using black boxes.</p>
<ul class="ul1">
  <li class="li4">Non-programmers understand the concept of black boxes and think that software is built from black boxes.<span class="Apple-converted-space">  </span>Like Engineering.</li>
  <li class="li4">Software Professionals <i>think</i> that they are using black boxes</li>
  <li class="li4"><i>libraries</i> are not black boxes</li>
  <li class="li4">TDD (Test Driven Development) tries to fit black-box-like thinking onto software, but ultimately fails<a id="fnlink1"></a><a href="#fn1"><sup>[1]</sup></a></li>
  <li class="li4">Functional programming throws the baby out with the bathwater to achieve black-box-like behaviour.<span class="Apple-converted-space">  </span>This only achieves black-box-like behaviour for a narrow range of problems (one-in-one-out problems - filters, calculators)</li>
  <li class="li4"><i>Tells</i> - we see problems at the edges of the software universe - called <i>epicycles</i> in Ptolemaic cosmology - such as the continual churn of fixes applied to <i>threads</i> (e.g. <i>promises</i> are one of the latest fads) and fixes applied to fixes.<span class="Apple-converted-space">  </span><i>Threads</i> are <span class="s1">not</span> essential complexity.<span class="Apple-converted-space">  </span><i>Promises </i>fix threads for only a certain class of problems.<span class="Apple-converted-space"> </span></li>
  <li class="li4">(<i>I discuss more </i>tells<i> for broken software in another essay).</i></li>
</ul>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Mars Pathfinder Disaster</b></h2>
<p class="p2">https://www.rapitasystems.com/blog/what-really-happened-software-mars-pathfinder-spacecraft</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Priority Inversion is Accidental Complexity</b></h2>
<p class="p2">The Mars Pathfinder problem was caused by <i>priority inversion</i>.</p>
<p class="p3"><br></p>
<p class="p2">This problem was caused by the use of an RTOS.</p>
<p class="p3"><br></p>
<p class="p2">An RTOS is a stripped-down operating system.</p>
<p class="p3"><br></p>
<p class="p2">The RTOS was built using “best practices”, but, these best practices led to a hoary, intermittent bug.<span class="Apple-converted-space">  </span>The cause of the bug was not understood at the time of construction of the Pathfinder software, but it was always there.</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Priorities are Epicycles</b></h2>
<p class="p2">Priorities were invented to ameliorate the problems of time-sharing.</p>
<p class="p3"><br></p>
<p class="p2">Time-sharing was invented to ameliorate the problems of CPU expense.</p>
<p class="p3"><br></p>
<p class="p2">Priority inheritance was invented to ameliorate the problems of priorities. <span class="Apple-converted-space"> </span></p>
<p class="p3"><br></p>
<p class="p2">[<i>Q: Why was it possible to enable/disable priority inheritance?<span class="Apple-converted-space">  </span>What niggly problem was that supposed to solve?</i>]</p>
<p class="p3"><br></p>
<p class="p2">Epicycles.</p>
<p class="p3"><br></p>
<p class="p2">To read more about Epicycles, read Arthur Koestler’s “The Sleepwalkers”.<span class="Apple-converted-space">  </span>The book documents the switch from Ptolemaic Cosmology to Copernican Cosmology.<span class="Apple-converted-space">  </span>The Ptolemaic scientists formalized the concept of adding baubles to the existing theory without fixing the root problem.<span class="Apple-converted-space">  </span>They called this formalism <i>Epicycles</i>.</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Avoiding Multitasking Problems</b></h2>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>How To Avoid The Thread Safety Issue</b></h2>
<p class="p2">To avoid thread safety issues, give each thread its own isolated CPU.</p>
<p class="p3"><br></p>
<p class="p2">When CPUs are isolated from one another - they cannot interact, except via very constrained channels.</p>
<p class="p3"><br></p>
<p class="p2">There are no thread safety issues.</p>
<p class="p3"><br></p>
<p class="p2">Problem solved.</p>
<p class="p3"><br></p>
<p class="p2">Thread safety is accidental complexity.</p>
<p class="p3"><br></p>
<p class="p2">Thread safety is not essential complexity.</p>
<p class="p3"><br></p>
<p class="p2">Thread safety is caused by an optimization - the attempt to share memory across many tasks.<span class="Apple-converted-space">  </span>This attempt at premature optimization leads to new problems, i.e. accidental complexity.</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>How to Avoid The Fairness Issue</b></h2>
<p class="p2">To avoid fairness issues, give each thread its own isolated CPU.</p>
<p class="p3"><br></p>
<p class="p2">When CPUs are isolated from one another - they cannot interact, except via very constrained channels - there are no fairness issues.<span class="Apple-converted-space">  </span>Each CPU runs at its own speed.</p>
<p class="p3"><br></p>
<p class="p2">Problem solved.</p>
<p class="p3"><br></p>
<p class="p2">Fairness is accidental complexity caused by an optimization (sharing the CPU for many tasks).</p>
<p class="p3"><br></p>
<p class="p2">Fairness is not essential complexity.</p>
<p class="p3"><br></p>
<p class="p2">The only issue is: are the CPUs <i>fast enough</i> to accomplish the given task?</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>How to Conquer Multitasking</b></h2>
<p class="p2">To conquer multitasking and to make multitasking easy to use, give each thread its own isolated CPU.</p>
<p class="p3"><br></p>
<p class="p2">Problem solved.</p>
<p class="p3"><br></p>
<p class="p2">CPUs cannot share memory.</p>
<p class="p3"><br></p>
<p class="p2">CPUs cannot time-share.</p>
<p class="p3"><br></p>
<p class="p2">Problem solved.</p>
<p class="p3"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Deprecate Recursion and Loop</b></h2>
<p class="p2">Computer Science clings to the notion of using Recursion and Loops.</p>
<p class="p3"><i></i><br></p>
<p class="p2"><i>Threads</i> were invented to accomodate time-sharing.</p>
<p class="p3"><br></p>
<p class="p2">To accomodate deep recursion and loops when using threads, Computer Science invented <i>full preemption</i>.</p>
<p class="p3"><br></p>
<p class="p2">Ironically, loops make no sense on the internet.</p>
<p class="p3"><br></p>
<p class="p2">You cannot “loop” a pair of distributed computers, you can only send messages between them.</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Getting Rid of Full Preemption</b></h2>
<p class="p2">Full Preemption was invented to accommodate loops (and recursion) on <i>threads</i>.</p>
<p class="p3"><br></p>
<p class="p2">Full preemption causes many accidental complexities,<span class="Apple-converted-space"> </span></p>
<ul class="ul1">
  <li class="li4">e.g. allocating a stack (memory) for each thread</li>
  <li class="li4">e.g. thread safety, etc.</li>
</ul>
<p class="p5"><br></p>
<p class="p4">Full preemption is only needed to <i>simulate</i> multiple CPUs on a single computer.</p>
<p class="p5"><br></p>
<p class="p4">To get rid of full preemption, just give each thread its own isolated CPU and its own isolated memory space.</p>
<p class="p5"><br></p>
<p class="p4">Problem solved.</p>
<p class="p5"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Multiple Cores</b></h2>
<p class="p2">We, ultimately, want true distributed computing.</p>
<p class="p3"><br></p>
<p class="p2">We could do anything if CPUs were free.</p>
<p class="p3"><br></p>
<p class="p2">Multi-core CPUs are but a half-measure towards achieving the above goal of truly distributed computing.</p>
<p class="p3"><br></p>
<p class="p2">Multiple cores were invented by hardware designers who were tired of waiting for software to catch up.</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Simulation On Too Few CPUs</b></h2>
<p class="p2">If we don’t have enough CPUs to go around, we end up simulating CPUs by using VMs and Threads, or, better yet, we can simulate <i>isolated</i> CPUs (something software professionals tend <span class="s1">not</span> to do, out of a zeal for premature optimization).</p>
<p class="p3"><br></p>
<p class="p2">CPUs used to be very expensive in the 1950’s. <span class="Apple-converted-space"> </span></p>
<p class="p3"><br></p>
<p class="p2">Simulation of multiple CPUs was invented early to ameliorate this expense. <span class="Apple-converted-space"> </span></p>
<p class="p3"><br></p>
<p class="p2">This kind of simulation - we call it <i>threads</i> - has led to a myriad of accidental complexities. <span class="Apple-converted-space"> </span></p>
<p class="p3"><br></p>
<p class="p2">These complexities <i>only</i> exist in the simulations, and disappear entirely if we allocate enough CPUs to the problem.</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Computer Science</b></h2>
<p class="p2">A large portion of Computer Science consists of the analysis of accidental complexities caused by the imposition of the epicycle we call <i>threads</i>.</p>
<p class="p3"><br></p>
<p class="p2">Early Computer Science, also, tackled the ideas of how to structure data and wrestled that issue to the ground.</p>
<p class="p3"><br></p>
<p class="p2">Yet, the issue of <i>threads</i> continues to wriggle out of Computer Science’s grasp. <span class="Apple-converted-space"> </span></p>
<p class="p3"><br></p>
<p class="p2">This is a <i>tell</i>.</p>
<hr>
<p class="p6"><a id="fn1"></a><a href="#fnlink1"><span class="s2">[1]</span></a><span class="s2"> </span>If TDD had succeeded, then all software professionals would be using TDD exclusively.<span class="Apple-converted-space">  </span>They don’t.</p>
</div>
</body>
</html>
