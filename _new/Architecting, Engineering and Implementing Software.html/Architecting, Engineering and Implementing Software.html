<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>Real Example</title>
  <meta name="CreationTime" content="2021-01-10T10:07:08Z">
  <meta name="ModificationTime" content="2021-01-10T10:07:08Z">
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1894.6">
  <style type="text/css">
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; text-indent: 18.0px; font: 13.0px Palatino}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Palatino}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Palatino; min-height: 18.0px}
    p.p5 {margin: 0.0px 0.0px 0.0px 36.0px; text-indent: -36.0px; font: 13.0px Palatino}
    p.p6 {margin: 0.0px 0.0px 0.0px 36.0px; text-indent: -36.0px; font: 13.0px Palatino; min-height: 18.0px}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; text-indent: 18.0px; font: 13.0px Palatino; min-height: 18.0px}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; text-indent: 18.0px; font: 12.0px Helvetica}
    p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; text-indent: 18.0px; font: 12.0px Helvetica; min-height: 14.0px}
    p.p12 {margin: 0.0px 0.0px 0.0px 36.0px; font: 11.0px Menlo}
    p.p13 {margin: 0.0px 0.0px 0.0px 36.0px; font: 11.0px Menlo; min-height: 13.0px}
    p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 20.0px; font: 12.0px Menlo; color: #1b1f22; -webkit-text-stroke: #1b1f22; min-height: 14.0px}
    p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: right; line-height: 20.0px; font: 12.0px Menlo; color: #1b1f22; -webkit-text-stroke: #1b1f22; min-height: 14.0px}
    p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 20.0px; font: 12.0px Menlo; color: #1b1f22; -webkit-text-stroke: #1b1f22}
    p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 20.0px; font: 12.0px Menlo; -webkit-text-stroke: #1b1f22; min-height: 14.0px}
    li.li3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Palatino}
    li.li8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    span.s1 {font: 13.0px Palatino}
    span.s2 {font: 12.0px Helvetica}
    span.s3 {font: 11.0px Menlo}
    span.s4 {color: #000000}
    span.s5 {text-decoration: underline}
    span.s6 {font: 9.0px Palatino}
    span.s7 {font-kerning: none}
    span.Apple-tab-span {white-space:pre}
    table.t1 {background-color: #ffffff; border-collapse: collapse}
    td.td1 {width: 85.0px; padding: 0.0px 10.0px 0.0px 10.0px}
    td.td2 {width: 85.0px; min-width: 50.0px; padding: 0.0px 10.0px 0.0px 10.0px}
    td.td3 {width: 164.5px; padding: 0.0px 10.0px 0.0px 10.0px}
    td.td4 {width: 99.5px; padding: 0.0px 10.0px 0.0px 10.0px}
    td.td5 {width: 99.5px; min-width: 50.0px; padding: 0.0px 10.0px 0.0px 10.0px}
    td.td6 {width: 200.6px; padding: 0.0px 10.0px 0.0px 10.0px}
    td.td7 {width: 879.7px; padding: 0.0px 10.0px 0.0px 10.0px}
    td.td8 {width: 518.5px; padding: 0.0px 10.0px 0.0px 10.0px}
    td.td9 {width: 612.4px; padding: 0.0px 10.0px 0.0px 10.0px}
    td.td10 {width: 1132.6px; padding: 0.0px 10.0px 0.0px 10.0px}
    td.td11 {width: 1818.9px; padding: 0.0px 10.0px 0.0px 10.0px}
    td.td12 {width: 99.5px; min-width: 50.0px; height: 13.5px; padding: 0.0px 10.0px 0.0px 10.0px}
    td.td13 {width: 1818.9px; height: 13.5px; padding: 0.0px 10.0px 0.0px 10.0px}
    td.td14 {width: 677.5px; padding: 0.0px 10.0px 0.0px 10.0px}
    ol.ol1 {list-style-type: decimal}
    ul.ul1 {list-style-type: disc}
  </style>
</head>
<body>
<div style="width: 600px; margin: 0 auto">

<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Introduction</b></h2>
<p class="p2">In this essay, I walk through the implementation of a simple software project in a sequence of discrete design steps</p>
<ul class="ul1">
  <li class="li3">Software Architecture</li>
  <li class="li3">Software Engineering</li>
  <li class="li3">Software Implementation.</li>
</ul>
<p class="p4"><br></p>
<p class="p5">I intend to show how to apply the principles of <i>divide and conquer</i> and <i>superposition</i> to the design of a system.</p>
<p class="p6"><br></p>
<p class="p5">I use diagrams to design each phase of the project and show how to manually convert the diagrams to code.</p>
<p class="p6"><br></p>
<p class="p5">Background: I use <a href="http://draw.io">draw.io</a> to create the diagrams in this essay.</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Problem</b></h2>
<p class="p2">The Problem that I want to solve is using the Scrivener<a id="fnlink1"></a><a href="#fn1"><sup>[1]</sup></a> writing tool to produce blog posts that are compatible with Github Pages.<span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
<p class="p2">Github Pages uses the Jekyll<a id="fnlink2"></a><a href="#fn2"><sup>[2]</sup></a> tool and the file formats prescribed by Jekyll.</p>
<p class="p7"><br></p>
<p class="p2">I decompose the problem into several parts:</p>
<ol class="ol1">
  <li class="li3">Writing a blog post using the Scrivener tool</li>
  <li class="li3">Magic transformer</li>
  <li class="li3">Using the Jekyll tool to build a blogging website and having Jekyll add the above blog post (written using Scrivener) to the website</li>
  <li class="li3">The "rest" - storing the blog in <i>git, </i>uploading the blog to github pages, etc.</li>
</ol>
<p class="p4"><br></p>
<p class="p3">Parts (1)<span class="Apple-converted-space">  </span>and (3) are handled by the respective tools (Scrivener and Jekyll).<span class="Apple-converted-space">  </span>Part (4) uses standard, available technology.</p>
<p class="p4"><br></p>
<p class="p3">I need to write a program that performs step (2), which transforms the result of Scrivener into something that is acceptable as input to the Jekyll tool.</p>
<p class="p4"><br></p>
<p class="p3">Step (2) has one input and one output:</p>
<ul class="ul1">
  <li class="li3">input: a blog post written, and saved into the file system, using the Scrivener tool</li>
  <li class="li3">output:<span class="Apple-converted-space">  </span>a file(s) saved into the file system that is acceptable to the Jekyll tool.</li>
</ul>
<p class="p4"><br></p>
<p class="p8"><span class="s1">In a very basic form, </span>Fig. 1 shows this top-level breakdown.</p>
<p class="p9"><br></p>
<p class="p2"><img src="Images/project-Top Layer.png" width="400px" height="36px" alt="Image"></p>
<p class="p10">Fig. 1 Basic Architecture</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p8">We can redraw this using parts,<span class="Apple-converted-space">  </span>by adding <i>ports </i>to the processes, and skipping the intermediate files, as in Fig. 2</p>
<p class="p2"><img src="Images/project-Top-Layer-With-Ports.png" width="400px" height="36px" alt="Image"></p>
<p class="p10">Fig. 2 Basic Architecture Redrawn<span class="Apple-converted-space"> </span></p>
<p class="p9"><br></p>
<p class="p8">(I choose, arbitrarily, to color output <i>ports </i>yellow and input <i>ports</i> green,<span class="Apple-converted-space">  </span>Side-effects appear as red <i>ports</i>.).</p>
<p class="p9"><span class="Apple-converted-space"> </span></p>
<p class="p8">Before we do anything else, we need to understand what (1) produces and what (3) consumes.</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Scrivener Output</b></h2>
<p class="p2">The Scrivener tool is like <i>Word®</i>, on steroids.</p>
<p class="p7"><br></p>
<p class="p2">For this example, we are only concerned with the shape of the output created by Scrivener.</p>
<p class="p7"><br></p>
<p class="p2">In particular, we are only interested in the shape of HTML output by Scrivener.</p>
<p class="p7"><br></p>
<p class="p2">To output a document in HTML format, we use the <i>File &gt;&gt; Compile </i>option, and we tell Scrivener to compile to a <i>Web Page (.html).</i></p>
<p class="p7"><i></i><br></p>
<p class="p2">The resulting HTML depends on</p>
<ul class="ul1">
  <li class="li3">whether the document only contains text</li>
  <li class="li3">whether the document contains text and .PNG files.</li>
</ul>
<p class="p4"><br></p>
<p class="p3">[<i>Scrivener has many more options and output formats, but for this project, we only care about HTML output and we are willing to constrain our blog posts to contain only text and .PNG files.<span class="Apple-converted-space">  </span>Computer Science researchers might proceed to generalize and include more options, but, we are interested in only a practical result </i>and<i> we are willing to stick to a few conventions in order to simplify the degrees of freedom in the problem.<span class="Apple-converted-space">  </span>Later, after this works, we can consider new projects and use this one as a starter template for more complicated variations.<span class="Apple-converted-space">  </span>Non-programmers like the idea of pulling an existing project off of the shelf and tweaking it to produce new results.<span class="Apple-converted-space">  </span>(Git shows that projects can be tweaked and that D.R.Y. in-the-large can be handled automatically)</i>].</p>
<p class="p4"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Scrivener Output for Pure Text</b></h2>
<p class="p2">For text-only documents, Scrivener outputs a single .HTML file.</p>
<p class="p7"><br></p>
<p class="p2">This is shown in <span class="s2">Fig. 3</span></p>
<p class="p11"><br></p>
<p class="p10"><img src="Images/project-Scrivener Text Only.png" width="431px" height="81px" alt="Image"></p>
<p class="p11"><br></p>
<p class="p8">Fig. 3 Scrivener Output - Text Only Case</p>
<p class="p9"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Scrivener Output for Text Which Includes Images</b></h2>
<p class="p2">For text documents that contain images (.PNG files), Scrivener outputs a directory containing one .html file and a directory called "Images" (spelled with a capital "I" and lower case "mages").<span class="Apple-converted-space">  </span>The .html file refers to images using an href element which contains a relative reference to the .png file in the Images/ directory.</p>
<p class="p7"><br></p>
<p class="p2">This situation is shown in <span class="s2">Fig. 4.</span></p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p2"><img src="Images/project-Scrivener Text Plus PNG Images.png" width="400px" height="244px" alt="Image"></p>
<p class="p8">Fig. 4 Scrivener Output - Text and Images Case</p>
<p class="p9"><br></p>
<p class="p8">Detail: the name of the directory has the .html extension, for example <span class="s3">abc.scriv</span> is output as <span class="s3">abc.html/</span>, which contains <span class="s3">abc.html/abc.html</span> and <span class="s3">abc.html/Images/</span>. <span class="Apple-converted-space"> </span></p>
<p class="p9"><br></p>
<p class="p8">At first, this seems bizarre, but it is legal.</p>
<p class="p9"><br></p>
<p class="p8">The choice of <i>where</i> the files are saved is made during the <i>Scrivener Compile</i> action.</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Jekyll Input</b></h2>
<p class="p2">Jekyll expect files to be in a subdirectory called <span class="s3">_posts</span> with each file name being prepended with the date, e.g. _posts/2021-01-09-blog.html.<span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
<p class="p2">This situation is shown in <span class="s2">Fig. 5</span></p>
<p class="p2"><img src="Images/architecture-Jekyll Input.png" width="400px" height="70px" alt="Image"></p>
<p class="p7"><br></p>
<p class="p8">Fig. 5 Jekyll Input</p>
<p class="p9"><br></p>
<p class="p8">[<i>Jekyll is usually used to create </i>static html sites<i> from blog posts.<span class="Apple-converted-space">  </span>Blog posts can be raw .html files, or, (the usual case) blog posts can be markdown files, .md, containing </i>front matter<i>.<span class="Apple-converted-space">  </span>When Jekyll processes .md files with front matter, it filters them using the </i>Liquid<a id="fnlink3"></a><a href="#fn3"><span class="s1"><sup>[3]</sup></span></a> <i>tool and puts the result in _site/.<span class="Apple-converted-space">  </span>When processing raw .html (the case we are interested in), Jekyll simply copies the file(s) into the _site/ without processing them.</i>]</p>
<p class="p9"><br></p>
<p class="p8">When a .html file contains images, it is customary to put the images in a directory called "assets" and to have the .html file refer to images in that directory, as in Fig. 6.</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p2"><img src="Images/architecture-Jekyll Input Using Images.png" width="400px" height="174px" alt="Image"></p>
<p class="p8">Fig. 6 Jekyll Input Using Images in Assets/</p>
<p class="p9"><br></p>
<p class="p8">Background:: Jekyll expects a certain directory structure, <a href="https://jekyllrb.com/docs/structure/">https://jekyllrb.com/docs/structure/</a>, and produces a static website in the subdirectory called "_site".</p>
<p class="p9"><br></p>
<p class="p8">Background: Jekyll does not process any files contained in directories the are named "_*".<span class="Apple-converted-space">  </span>The exceptions are "_posts", "_data", "_site", etc.</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Solution</b></h2>
<p class="p2">At this point, we know what the input to step (2) looks like and what output it must produce.</p>
<p class="p7"><br></p>
<p class="p2">We can solve this problem using a layered approach, using any PL (Programming Language).</p>
<p class="p7"><br></p>
<p class="p2">We will call the layers (1) Architecture, (2) Engineering and (3) Implementation.</p>
<p class="p7"><br></p>
<p class="p2">Layers (1) and (2) contain no code.<span class="Apple-converted-space">  </span>All of the code is only written in layer (3).</p>
<p class="p7"><br></p>
<p class="p2">The point of layer (2) (Engineering) is to add enough detail to allow code to be written in the Implementation layer (3).</p>
<p class="p7"><br></p>
<p class="p2">The point of layer (1) is to collect information about the problem and to arrange that information in a way that indicates the preferred solution.</p>
<p class="p7"><br></p>
<p class="p2">We iterate between steps (1) and (2) until we know enough about the problem.<span class="Apple-converted-space">  </span>"Enough" in this case means that Engineers can draw detailed diagrams ("the spec") that can be used by Implementors in step (3).<span class="Apple-converted-space">  </span>[<i>You guessed it - if Implementors (3) don't have complete information, there is an iteration between (2) and (3).<span class="Apple-converted-space">  </span>This iteration might cause new iterations between (1) and (2).<span class="Apple-converted-space">  </span>Experienced Engineers know what questions to ask to keep such bubbling-up at a minimum.<span class="Apple-converted-space">  </span>N.B. Agile encourages iteration between (1) and (3) in 2-week cycles. This can only work if the problem is "simple" or if Implementors are, also, Engineers (in which case their time is being wasted and the customer is over-paying high-priced talent to produce menial work).<span class="Apple-converted-space">  </span>In state-of-the-art practice, all of the above stages are combined and implemented by a single person or a single team.<span class="Apple-converted-space">  </span>This results in a higher cost for the overall project and tends to slow implementation (too much detail at every stage).<span class="Apple-converted-space">  </span>Experienced developers break a project down "in their heads", resulting in uneven implementations that depend on the biases of the developers. Any structuring of projects works "better" than what we have.</i>]<i><span class="Apple-converted-space"> </span></i></p>
<p class="p7"><i></i><br></p>
<p class="p2">The strict separation into multiple layers, like Architecture, Engineering and Implementation makes the whole enterprise work more like business organizations and allows the sub-units of the organization to be completely isolated.<span class="Apple-converted-space">  </span>An organization is broken if it allows information/questions to leak between non-adjacent layers.<span class="Apple-converted-space">  </span>Information that leaks through non-adjacent layers is not isolated.<span class="Apple-converted-space">  </span>Strict separation stops dependencies from working their way through an organization in a spaghetti-like manner.<span class="Apple-converted-space">  </span>Such leakage inhibits scaling.</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Architecture</b></h2>
<p class="p2">It is the Architect's responsibility to make a design clear and understandable to other readers.</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p2">An overview of what we want is in <span class="s2">Fig. 7.</span></p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p2"><img src="Images/architecture-Jekyll Input Using Images1.png" width="400px" height="121px" alt="Image"></p>
<p class="p8">Fig. 7 Overview</p>
<p class="p9"><br></p>
<p class="p8">As stated before, we don't have to worry about the existing tools - Scrivener and Jekyll.<span class="Apple-converted-space">  </span>This project needs only to implement the stuff in the middle.</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p8">Fig. 8 shows the proposed Architecture for the stuff in the middle</p>
<p class="p9"><br></p>
<p class="p2"><img src="Images/architecture-Jekyll Input Using Images2.png" width="400px" height="245px" alt="Image"></p>
<p class="p8">Fig. 8 Architecture</p>
<p class="p9"><br></p>
<p class="p8">We, also, need to say something about the <i>input port</i> (green) and the <i>output port</i> (yellow) and side-effects (red).</p>
<p class="p9"><br></p>
<p class="p8"><span class="s4"><b>input</b></span>: A filename.<span class="Apple-converted-space">  </span>The filename might represent the name of (a) a .html file or (b) a directory.<span class="Apple-converted-space">  </span>In case (b), the directory contains a .html file and another directory called "Images".</p>
<p class="p9"><br></p>
<p class="p8"><b>output</b>: none<a id="fnlink4"></a><a href="#fn4"><span class="s1"><sup>[4]</sup></span></a></p>
<p class="p9"><br></p>
<p class="p8"><b>side effects</b>: A .html file created in the _posts/ directory and image files created in directory "assets" with unique names.<span class="Apple-converted-space">  </span>The arefs in the .html file are fixed up to point to corresponding images in the "assets" directory.</p>
<p class="p9"><br></p>
<p class="p8">[<i>As it stands, the above "description" is written in a </i>hand waving<i> manner.<span class="Apple-converted-space">  </span>Not all terms are defined.<span class="Apple-converted-space">  </span>It is unreasonable to ask the Architect for all of the details.<span class="Apple-converted-space">  </span>It is the job of the Engineer to determine if there are </i>enough<i> details present to allow implementation.<span class="Apple-converted-space">  </span>Some details can be interpolated by the Engineer and some can't.<span class="Apple-converted-space">  </span>In the latter case, the Engineer must iterate with the Architect and, in the former case, the Engineer does not need to iterate with the Architect.<span class="Apple-converted-space">  </span>For example, in a corporation, a CEO steers the ship, but does not micro-manage.<span class="Apple-converted-space">  </span>Cottage industries do not scale because the CEOs (owners) do "everything" and, effectively, micro-manage every aspect of the business.<span class="Apple-converted-space">  </span>Large corporations scale up (to being large corporations) only when micro-management is expunged.<span class="Apple-converted-space">  </span>To ready a small business for scaling, the owner must chop up the work into identifiable layers, then, hire workers to perform work in each layer, allowing the workers to concentrate on the work in his/her layer only (instead of "trying to do everything").</i>]</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Engineering</b></h2>
<p class="p2">Engineers are responsible to produce enough detail to allow implementation. <span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
<p class="p2">Engineers are responsible to display details in a way that is understandable to the implementors.</p>
<p class="p7"><br></p>
<p class="p2">Engineers off-load thinking, about minutiae, from the Architect(s).</p>
<p class="p7"><br></p>
<p class="p2">Engineers try to interpolate details for the design.</p>
<p class="p7"><br></p>
<p class="p2">When interpolation does not work, or requires extrapolation, Engineers interace with Architects to glean further details.</p>
<p class="p7"><br></p>
<p class="p2">Engineers have the experience and training, to think about details without writing code.<span class="Apple-converted-space">  </span>Currently, Universities train Software Professionals to become Implementors.<span class="Apple-converted-space">  </span>Training for Software Architecture and Software Engineering does not exist and is expected to "rub off" through experience and involvement in many projects.</p>
<p class="p7"><br></p>
<p class="p2">In other fields, say Construction, Universities can train Architects and Engineers in only a few years.<span class="Apple-converted-space">  </span>Implementors (construction workers) are trained in vocational schools or through apprenticeship.</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p2">Back to this example.<span class="Apple-converted-space">  </span>In this specific example, the Architect has indicated that two branches need to be considered:</p>
<ul class="ul1">
  <li class="li3">Scrivener documents that contain text only</li>
  <li class="li3">Scrivener documents that contain text and images.</li>
</ul>
<p class="p4"><br></p>
<p class="p3"><i>Abstraction</i> is a form of <i>optimization<a id="fnlink5"></a></i><a href="#fn5"><sup>[5]</sup></a> that is taught in Universities.<span class="Apple-converted-space">  </span>Architects, and Engineers, must concentrate on the problem-at-hand and <span class="s5">strip abstraction away</span> from the instructions given to implementors.</p>
<p class="p4"><br></p>
<p class="p3">For now (maybe forever) we will continue with the sub-divisions - branch A (text only) and branch B (text plus images) - suggested by the Architect.</p>
<p class="p4"><br></p>
<p class="p3">The Architect has suggested a form of Divide and Conquer.</p>
<p class="p4"><br></p>
<p class="p3">Considering only one branch - branch A, text only - we see that two operations need to occur</p>
<ul class="ul1">
  <li class="li3">create a file prefix, where the prefix begins with the date in YYYY-MM-DD- form, and,</li>
  <li class="li3">move the newly-named .html file into the _posts directory.</li>
</ul>
<p class="p4"><br></p>
<p class="p3">Considering only the other branch - branch B, text plus images - we see the following break down:</p>
<ul class="ul1">
  <li class="li3">create a file prefix, in YYYY-MM-DD- format</li>
  <li class="li3">edit the arefs in the .html file to refer to images in the assets/ directory</li>
  <li class="li3">move the<span class="Apple-converted-space">  </span>.html file into the _posts/ directory</li>
  <li class="li3">move the images into assets/.</li>
</ul>
<p class="p4"><br></p>
<p class="p3">Furthermore, at this Engineering layer, we will make the decision that we will keep the Images/ directory intact, but will prepend it with the prefix and move it, whole, into the assets directory.</p>
<p class="p4"><br></p>
<p class="p3">This is interpolation.<span class="Apple-converted-space">  </span>The Architecture is not changed by this decision.<span class="Apple-converted-space">  </span>The Engineer does not need to iterate with the Architect regarding this decision.</p>
<p class="p4"><br></p>
<p class="p3">More interpolation: the Engineer looks at the .html format generated by Scrivener and notices that the file-creation-date is embedded in the file as meta-data.<span class="Apple-converted-space">  </span>The Engineer decides (arbitrarily) that this file-creation-date will be used to generate the required file prefix.<span class="Apple-converted-space">  </span>In the UNIX® file system, it is possible to get the file creation date from the operating system, but the Engineer decides not to use this and decides to use the Scrivener meta-data instead.<span class="Apple-converted-space">  </span>This decision is made by the Engineer on a "gut feel", knowing that various operating systems provide such creation-date information in various forms.<span class="Apple-converted-space">  </span>It is deemed "better" by the Engineer to let Scrivener worry about this aspect.</p>
<p class="p4"><br></p>
<p class="p3">I show diagrams of these branches, below.<span class="Apple-converted-space">  </span>I leave grayed-out portions on the diagram that act as reminders of what the ultimate goal is.<span class="Apple-converted-space">  </span>The grayed-out portions are not required in the Implementation.</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Top Level</b></h2>
<p class="p2"><img src="Images/architecture-Jekyll Input Using Images3.png" width="400px" height="246px" alt="Image"></p>
<p class="p8">Fig. &lt;$n:figure:Engineering Top Level&gt; Engineering Top Level</p>
<p class="p9"><br></p>
<p class="p8">The Engineer has created a top level diagram that contains</p>
<ul class="ul1">
  <li class="li8">one blue box (Leaf) called "isADirectory'</li>
  <li class="li8">one gray box (Schematic) called "pathA"</li>
  <li class="li8">one gray box (Schematic) called "pathB"</li>
  <li class="li8">one gray box that is the composition of the above boxes</li>
  <li class="li8">two Dots (wire splitters) that are used internally to route "filename" and "content".</li>
</ul>
<p class="p9"><br></p>
<p class="p8">In the most extreme case, this implies that six (6) things need to be implemented:</p>
<ul class="ul1">
  <li class="li8">2 x wire splitter</li>
  <li class="li8">1 x "isADirectory"</li>
  <li class="li8">1 x "pathB"</li>
  <li class="li8">1 x "pathA"</li>
  <li class="li8">1 x top level.</li>
</ul>
<p class="p9"><i></i><br></p>
<p class="p8">[<i>N.B in Arrowgrams, dots are so common that we build them into the Arrowgrams notation, whereas in Bash, we will need to build dots explicitly.<span class="Apple-converted-space">  </span>In FBP, dots are not allowed (they can, though, be explicitly implemented as FBP Components). In Electronics, dots are common and are shown as dots on a schematic diagram (whereas cross-overs are shown only as two wires crossing over, without a dot).<span class="Apple-converted-space">  </span>Arrowgrams is based on ideas from Electronics drawings.<span class="Apple-converted-space">  </span>Arrowgrams "borrows" from Electronics.<span class="Apple-converted-space">  </span>This is a high-level form of reuse.</i>]</p>
<p class="p9"><br></p>
<p class="p8">The gray boxes, e.g. pathA and pathB, might be broken down further, later.<span class="Apple-converted-space">  </span>We might add new Parts to the list of things that need to be implemented, later.</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>is A Directory?</b></h2>
<p class="p2">A simple function within the top level is to determine whether a given filename represents a file or a directory.</p>
<p class="p2">The Engineer does not need to break this down any further, since this functionality can be done in <i>bash</i>.<span class="Apple-converted-space">  </span>If the implementation language does not make this easy, the first-cut implementation can just shell-out to a <i>bash</i> script.</p>
<p class="p7"><br></p>
<p class="p2"><img src="Images/project-Engineering Branch B.png" width="150px" height="68px" alt="Image"></p>
<p class="p8">Fig. 9 Part: Is A Directory?</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Branch A - Text Only</b></h2>
<p class="p2"><img src="Images/architecture-Jekyll Input Using Images4.png" width="400px" height="212px" alt="Image"></p>
<p class="p8">Fig. &lt;$n:figure:Engineering Path A&gt; Engineering Path A</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p2">The Engineer refines this diagram further…</p>
<p class="p7"><br></p>
<p class="p2"><img src="Images/architecture-Jekyll Input Using Images5.png" width="400px" height="192px" alt="Image"></p>
<p class="p8">Fig. 10 Engineering Path A Refined</p>
<p class="p9"><br></p>
<p class="p8">"Blue" boxes mean "code".</p>
<p class="p8">"Gray" boxes mean composition of blocks.<span class="Apple-converted-space">  </span>"Gray" boxes are call Schematics.</p>
<p class="p9"><br></p>
<p class="p8">N.B. there are four (4) boxes to be implemented:</p>
<ol class="ol1">
  <li class="li8">"create file prefix" (blue box)</li>
  <li class="li8">"create new name for .html file" (blue box)</li>
  <li class="li8">"rename and move .html file" (blue box)</li>
  <li class="li8">compose the above into a Schematic part (gray box)</li>
</ol>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p8">The Engineer creates a black box from the above:</p>
<p class="p9"><br></p>
<p class="p8"><img src="Images/architecture-Jekyll Input Using Images6.png" width="400px" height="88px" alt="Image"></p>
<p class="p8">Fig. 11 Black Box Engineering Path A</p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Branch B - Text Plus Images</b></h2>
<p class="p7"><br></p>
<p class="p2"><img src="Images/architecture-Jekyll Input Using Images7.png" width="400px" height="339px" alt="Image"></p>
<p class="p8">Fig. 12 Engineering Path B Refined</p>
<p class="p9"><br></p>
<p class="p8"><img src="Images/architecture-Jekyll Input Using Images8.png" width="400px" height="313px" alt="Image"></p>
<p class="p8">Fig. 12 Engineering Path B Refined</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p8"><img src="Images/architecture-Jekyll Input Using Images9.png" width="400px" height="184px" alt="Image"></p>
<p class="p8">Fig. 13 Black Box Engineering Path B Refined</p>
<p class="p9"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Implementation</b></h2>
<p class="p2">At this point, we have enough of a design, and code can be implemented.</p>
<p class="p7"><br></p>
<p class="p2">Q: The Implementor asks the Engineer whether the temporary file, specified in Branch B, needs to be made available.</p>
<p class="p7"><br></p>
<p class="p2">A: In this design, the temporary directory does not need to be visible to the outside world, although it might assist in debugging the logic.<span class="Apple-converted-space">  </span>Intermediate results, stored in human readable form, can help.</p>
<p class="p7"><br></p>
<p class="p2">Given that the temporary file is not actually needed, the Implementor can choose any base language for the implementation.</p>
<p class="p7"><br></p>
<p class="p2">In this particular example, we will use <i>bash</i> and write scripts that represent the Parts.<span class="Apple-converted-space">  </span>Parts must be completely isolated from one another and need to run as asynchronous processes.<span class="Apple-converted-space">  </span>We will implement <i>wires</i> as named pipes.<span class="Apple-converted-space">  </span>We will implement <i>ports</i> using file redirection.</p>
<p class="p7"><br></p>
<p class="p2">It turns out that UNIX® and Bash can create isolated processes, but, running the processes in an asynchronous manner is slightly tricky.<span class="Apple-converted-space">  </span>We will need to use Bash "&amp;" in many places.</p>
<p class="p7"><br></p>
<p class="p2">Bash scripts use a <i>rendezvous</i> protocol for starting up pipes - both ends must exist before the script can proceed.<span class="Apple-converted-space">  </span>This means that Bash scripts will appear to "hang" if both ends of a pipe are not attached to processes.<span class="Apple-converted-space">  </span>This will drive us towards needing an "&amp;" on just about every line of the Bash scripts.</p>
<p class="p7"><br></p>
<p class="p2">Background: in modern forms of UNIX®, e.g. Linux and MacOS, file descriptors (FDs) can be accessed like files, e.g. <span class="s3">/dev/fd/3</span> refers to FD 3, <span class="s3">/dev/fd/4</span> refers to FD 4, and so on.<span class="Apple-converted-space">  </span>Pipes can be bolted on to FDs using Bash file redirection syntax.</p>
<p class="p7"><br></p>
<p class="p2">Background: Bash provides a <span class="s3">read </span>builtin command, and assigns the incoming data to a Bash variable, for example:</p>
<p class="p7"><br></p>
<p class="p12">read -u 3 xxx</p>
<p class="p7"><br></p>
<p class="p2">Reads from FD 3 and assigns the data to Bash variable ${xxx}.</p>
<p class="p7"><br></p>
<p class="p2">This same action can be performed by referencing the FD with file redirection, e.g.</p>
<p class="p7"><br></p>
<p class="p12">read xxx &lt;/dev/fd/3</p>
<p class="p7"><br></p>
<p class="p2">Both methods<a id="fnlink6"></a><a href="#fn6"><sup>[6]</sup></a> will be used, depending on our mood on a given day.</p>
<p class="p7"><br></p>
<p class="p2">Parts will be built as bash scrips and FDs will be assigned using redirection.<span class="Apple-converted-space">  </span>For example:</p>
<p class="p7"><br></p>
<p class="p12">./create-file-prefix 3&lt;${wire1a} 4&lt;${wire2a} 5&gt;${wire3} &amp;</p>
<p class="p7"><br></p>
<p class="p2">This says that Part "create-file-prefix" has two inputs and one output.<span class="Apple-converted-space">  </span>The inputs come from FD[3] ad FD[4] whereas the output is sent to FD[5].<span class="Apple-converted-space">  </span>We use bash variable ${wire1a}, ${wire2a} and ${wire3} to represent the named pipes.</p>
<p class="p7"><br></p>
<p class="p2">Background: to implemented Arrograms semantics - a Part is not "done" until all of its children are "done" - we use bash <span class="s3">wait.</span></p>
<p class="p7"><br></p>
<p class="p2">We will avoid using FD[0], FD[1] and FD[2], since these have special meaning to UNIX® commands.</p>
<p class="p7"><br></p>
<p class="p2">The above invocation of Part "create-file-prefix" demonstrates a vital property of the Arrowgrams way of thinking.<span class="Apple-converted-space">  </span>The part, itself, can not know where it is getting input from and where it is outputting to.<span class="Apple-converted-space">  </span>Every Part can only refer to its own array of file descriptors (FDs).<span class="Apple-converted-space">  </span>A Part cannot call other parts by name. <span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
<p class="p2">Let the previous statement "sink in". <span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
<p class="p2">Most PLs currently bake the callee's name into the code, e.g. xyz(…), and this inhibits flexible Architecting.<a id="fnlink7"></a><a href="#fn7"><sup>[7]</sup></a> <span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
<p class="p2">All Parts get inputs from FDs and send their outputs to FDs<a id="fnlink8"></a><a href="#fn8"><sup>[8]</sup></a>.<span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
<p class="p2">For debugging, we call scripts on entry and exit in each part.<span class="Apple-converted-space">  </span>The on-the-fly data used for debugging is supplied by a string passed in as $1.<span class="Apple-converted-space">  </span>Concatenation of debug information is done by using $0 (the command's name) in addition to the string given in $1.<span class="Apple-converted-space">  </span>For example, the above code is written as:</p>
<p class="p7"><br></p>
<p class="p12">./create-file-prefix "[$1] $0" 3&lt;${wire1a} 4&lt;${wire2a} 5&gt;${wire3} &amp;</p>
<p class="p13"><br></p>
<p class="p2">No Connection - NC - must be handled explicitly in bash.<span class="Apple-converted-space">  </span>We implement a Part called nc as a (simple) bash script that reads its input port and does nothing with the data.<span class="Apple-converted-space">  </span>(Redirecting to /dev/null works only for output NCs, not input NCs, so we implement a Part to perform the no-op action).</p>
<p class="p7"><br></p>
<p class="p2">Wire-splitters - dots - need to implemented as explicit Parts. <span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
<p class="p2">Normally, dots would be implemented by the Arrowgrams IDE and wouldn't need to be explicitly implemented. <span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
<p class="p2">We stick to the strategy of avoiding generalization, so we build two kinds of wire-splitters, one that splits<a id="fnlink9"></a><a href="#fn9"><sup>[9]</sup></a> an incoming <i>event </i>onto two output wires and another that splits the <i>event </i>to three output wires.</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p2">In both cases, Branch A and Branch B, the Implementation of creating a new filename is trivial and the 2<span class="s6"><sup>nd</sup></span> box is dropped.<a id="fnlink10"></a><a href="#fn10"><sup>[10]</sup></a> <span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Annotated Diagrams</b></h2>
<p class="p2">Annotations - the Implementor puts a name on every wire and an FD number on every pin.</p>
<p class="p7"><br></p>
<p class="p2"><img src="Images/architecture-Jekyll Input Using Images10.png" width="400px" height="242px" alt="Image"></p>
<p class="p8">Fig. 14 Annotated Top Level Diagram</p>
<p class="p7"><br></p>
<p class="p2"><img src="Images/architecture-Jekyll Input Using Images11.png" width="400px" height="304px" alt="Image"></p>
<p class="p7"><br></p>
<p class="p8">Fig. 15 Annotated Diagram for Branch A</p>
<p class="p9"><br></p>
<p class="p4"><br></p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p2"><img src="Images/architecture-Jekyll Input Using Images12.png" width="400px" height="304px" alt="Image"></p>
<p class="p8">Fig. 16 Annotated Diagram for Branch B</p>
<p class="p9"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>BOM</b></h2>
<p class="p2">In <i>electronics</i> design, one creates a "bill of materials", called a BOM.</p>
<p class="p7"><br></p>
<p class="p2">The BOM for this project consists of 9 Parts:</p>
<ul class="ul1">
  <li class="li3">nc</li>
  <li class="li3">wire-splitter2</li>
  <li class="li3">wire-splitter3</li>
  <li class="li3">create-file-prefix</li>
  <li class="li3">move-to-posts</li>
  <li class="li3">create-file-prefix-from-subdir</li>
  <li class="li3">edit-and-move-with-images</li>
  <li class="li3">pathA</li>
  <li class="li3">pathB.</li>
</ul>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Code</b></h2>
<p class="p2">The parts, implemented as bash scripts can be found in<span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
<p class="p2">NC <a href="https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/nc">https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/nc</a></p>
<p class="p2">wire-splitter2 <a href="https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/wire-splitter2">https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/wire-splitter2</a></p>
<p class="p2">wire-splitter3 <a href="https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/wire-splitter3">https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/wire-splitter3</a></p>
<p class="p2">create-file-prefix <a href="https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/create-file-prefix">https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/create-file-prefix</a></p>
<p class="p2">move-to-posts <a href="https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/move-to-posts">https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/move-to-posts</a></p>
<p class="p2">pathA <a href="https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/pathA">https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/pathA</a></p>
<p class="p2">create-file-prefix-from-subdir <a href="https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/create-file-prefix-from-subdir">https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/create-file-prefix-from-subdir</a></p>
<p class="p2">edit-and-move-with-images <a href="https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/edit-and-move-with-images">https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/edit-and-move-with-images</a></p>
<p class="p2">pathB <a href="https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/pathB">https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/pathB</a></p>
<p class="p7"><br></p>
<p class="p2">I include the code, for the parts, below.<span class="Apple-converted-space">  </span>The code is in branch AEI of <a href="https://github.com/guitarvydas/scrivener-to-jekyll"><span class="s3">https://github.com/guitarvydas/scrivener-to-jekyll</span></a><span class="s3">.</span></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>nc</b></h2>
<table width="100%" cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td1">
        <p class="p14"><span class="s7"></span><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td2">
        <p class="p15"><span class="s7"></span><br></p>
      </td>
      <td valign="top" class="td3">
        <p class="p16"><span class="s7">#~/bin/sh</span></p>
        <p class="p16"><span class="s7">read junk &lt;/dev/fd/3</span></p>
        <p class="p17"><span class="s7"></span><br></p>
      </td>
    </tr>
  </tbody>
</table>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>wire-splitter2</b></h2>
<table width="100%" cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td4">
        <p class="p14"><span class="s7"><span class="Apple-converted-space">     </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p15"><span class="s7"></span><br></p>
      </td>
      <td valign="top" class="td6">
        <p class="p16"><span class="s7">#!/bin/bash</span></p>
        <p class="p16"><span class="s7">./debug-entry "[$1] $0"</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p15"><span class="s7"></span><br></p>
      </td>
      <td valign="top" class="td6">
        <p class="p16"><span class="s7">read data &lt;/dev/fd/3</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p15"><span class="s7"></span><br></p>
      </td>
      <td valign="top" class="td6">
        <p class="p16"><span class="s7">echo "${data}" &gt;/dev/fd/5</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p15"><span class="s7"></span><br></p>
      </td>
      <td valign="top" class="td6">
        <p class="p16"><span class="s7">echo "${data}" &gt;/dev/fd/4</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p15"><span class="s7"></span><br></p>
      </td>
      <td valign="top" class="td6">
        <p class="p16"><span class="s7">./debug-exit "[$1] $0"</span></p>
        <p class="p17"><span class="s7"></span><br></p>
      </td>
    </tr>
  </tbody>
</table>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>wire-splitter3</b></h2>
<table width="100%" cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td5">
        <p class="p15"><span class="s7"></span><br></p>
      </td>
      <td valign="top" class="td6">
        <p class="p16"><span class="s7">#!/bin/bash</span></p>
        <p class="p16"><span class="s7">./debug-entry "[$1] $0"</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p15"><span class="s7"></span><br></p>
      </td>
      <td valign="top" class="td6">
        <p class="p16"><span class="s7">read data &lt;/dev/fd/3</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p15"><span class="s7"></span><br></p>
      </td>
      <td valign="top" class="td6">
        <p class="p16"><span class="s7">echo "${data}" &gt;/dev/fd/4</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p15"><span class="s7"></span><br></p>
      </td>
      <td valign="top" class="td6">
        <p class="p16"><span class="s7">echo "${data}" &gt;/dev/fd/5</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p15"><span class="s7"></span><br></p>
      </td>
      <td valign="top" class="td6">
        <p class="p16"><span class="s7">echo "${data}" &gt;/dev/fd/6</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p15"><span class="s7"></span><br></p>
      </td>
      <td valign="top" class="td6">
        <p class="p16"><span class="s7">./debug-exit "[$1] $0"</span></p>
        <p class="p17"><span class="s7"></span><br></p>
      </td>
    </tr>
  </tbody>
</table>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>create-file-prefix</b></h2>
<p class="p7"><br></p>
<table width="100%" cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2">#!/bin/bash</p>
        <p class="p2">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2">## inputs:</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2">## filename (fd 3)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2">## go (fd 4)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2">## outputs:</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2">## prefix (fd 5) (YYYY-MM-DD)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2">./debug-entry "[$1] $0"</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td7">
        <p class="p7"><br></p>
        <p class="p7"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2">read filename &lt;/dev/fd/3</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2">read go &lt;/dev/fd/4</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td7">
        <p class="p7"><br></p>
        <p class="p7"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2">if [ "go" == "${go}" ]</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2">then</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2"><span class="Apple-converted-space">    </span>prefix=`date "+%Y-%m-%d"`</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2"><span class="Apple-converted-space">    </span># error check needed here - filename should not be "" at this point</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2"><span class="Apple-converted-space">    </span>creation_time=`grep "&lt;meta name=\"CreationTime\"" "${filename}"`</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2"><span class="Apple-converted-space">    </span>if [ ! -z "${creation_time}" ]</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2"><span class="Apple-converted-space">    </span>then</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2"><span class="Apple-tab-span">	</span>prefix=`echo "${creation_time}" | sed -e 's/&lt;meta name="CreationTime" content="\(202.-..-..\)T..:..:..Z"&gt;/\1/'`</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2"><span class="Apple-converted-space">    </span>fi</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2"><span class="Apple-converted-space">    </span>echo "${prefix}" &gt;/dev/fd/5</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2">else</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2"><span class="Apple-converted-space">    </span>echo "???" &gt;/dev/fd/5</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2">fi</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td7">
        <p class="p2">./debug-exit "[$1] $0"</p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p7"><br></p>
<p class="p7"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>move-to-posts</b></h2>
<p class="p7"><br></p>
<table width="100%" cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">#!/bin/bash</p>
        <p class="p2">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">## inputs:</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">## filename (fd 3)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">## prefix (fd 4)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">## go (fd 5)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">## outputs:</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">## &lt;none&gt; - causes side-effect of mv'ing prefix/filename to ./_posts/</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">./debug-entry "[$1] $0"</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">read filename &lt;/dev/fd/3</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">read prefix &lt;/dev/fd/4</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">read go &lt;/dev/fd/5</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">if [ "${go}" == "go" ]</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">then</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2"><span class="Apple-converted-space">    </span>basename=`basename "${filename}"`</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">echo mv "${filename}" "../_posts/${prefix}-${basename}"</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2"><span class="Apple-converted-space">    </span>mv "${filename}" "../_posts/${prefix}-${basename}"</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">fi</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p7"><br></p>
      </td>
      <td valign="top" class="td8">
        <p class="p2">./debug-exit "[$1] $0"</p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p7"><br></p>
<p class="p7"><br></p>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>pathA</b></h2>
<p class="p13"><br></p>
<p class="p2"><img src="Images/project-Engineering Branch B1.png" width="400px" height="304px" alt="Image"></p>
<p class="p8">Fig. 17 Implementation Branch A</p>
<p class="p7"><br></p>
<table width="100%" cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td4">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">#!/bin/bash</p>
        <p class="p12">./debug-entry "[$1] $0"</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td9">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">## inputs:</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">## filename (fd 3)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">## content (fd 4) N/C</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">## go (fd 5)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">## outputs:</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">## &lt;none&gt; - side-effect - file.html moved to ./_posts/&lt;prefix&gt;_filename.html</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td9">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">wire1=wire_pA_1</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">wire1a=wire_pA_1a</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">wire1b=wire_pA_1b</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">wire2=wire_pA_2</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">wire2a=wire_pA_2a</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">wire2b=wire_pA_2b</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">wire3=wire_pA_3</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">wire4=wire_pA_4</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">mkfifo ${wire1} ${wire1a} ${wire1b} ${wire2} ${wire2a} ${wire2b} ${wire3} ${wire4}</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td9">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">./wire-splitter2 "[$1] $0" 3&lt;${wire1} 4&gt;${wire1a} 5&gt;${wire1b} &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">./wire-splitter2 "[$1] $0" 3&lt;${wire2} 4&gt;${wire2a} 5&gt;${wire2b} &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">./create-file-prefix "[$1] $0" 3&lt;${wire1a} 4&lt;${wire2a} 5&gt;${wire3} &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">./move-to-posts "[$1] $0" 3&lt;${wire1b} 4&lt;${wire3} 5&lt;${wire2b} &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td9">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">read filename &lt;/dev/fd/3</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">echo "${filename}" &gt; ${wire1} &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td9">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">read content &lt;/dev/fd/4</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">echo "${content}" &gt; ${wire4} &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">./nc 3&lt;${wire4} &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td9">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">read pin_go &lt;/dev/fd/5</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">echo "${pin_go}" &gt; ${wire2} &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td9">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">./debug-exit "[$1] $0"</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td9">
        <p class="p12">wait</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td9">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
  </tbody>
</table>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>create-file-prefix-from-subdir</b></h2>
<p class="p13"><br></p>
<table width="100%" cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td4">
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12">#!/bin/bash</p>
        <p class="p12">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12">## inputs:</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12">## filename (fd 3)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12">## go (fd 4)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12">## outputs:</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12">## prefix (fd 5) (YYYY-MM-DD)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12">## fullprefix (fd 6) (YYYY-MM-DD-HH-MM-SS)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12">./debug-entry "[$1] $0"</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td10">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12">read filename &lt;/dev/fd/3</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12">read go &lt;/dev/fd/4</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td10">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12">if [ "go" == "${go}" ]</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12">then</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span>prefix=`date "+%Y-%m-%d"`</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span>base=`basename "${filename}"`</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span># error check needed here - filename should not be "" at this point</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span>creation_time=`grep "&lt;meta name=\"CreationTime\"" "${filename}/${base}"`</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span>if [ ! -z "${creation_time}" ]</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span>then</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-tab-span">	</span>prefix=`echo "${creation_time}" | sed -e 's/&lt;meta name="CreationTime" content="\(2020-..-..\)T..:..:..Z"&gt;/\1/'`</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-tab-span">	</span>fullprefix=`echo "${creation_time}" | sed -e 's/&lt;meta name="CreationTime" content="\(2020-..-..\)T\(..\):\(..\):\(..\)Z"&gt;/\1-\2-\3-\4/'`</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span>fi</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span>echo "${prefix}" &gt;/dev/fd/5 &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span>echo "${fullprefix}" &gt;/dev/fd/6 &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12">else</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span># this is required because bash does not actually support concurrency<span class="Apple-converted-space"> </span></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span># bash imposes a rendezvous regimen on named pipes and blocks processes until all pipes have 2 ends</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span># this causes deep dependency chains</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span># (in true concurrency, we would be allowed to create pipes even when one end has not yet been created, and we would not need these two lines of code)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span># (rendezvous causes dependencies, which causes accidental complexity, which causes lots of head-scratching)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span># (rendezvous can be implemented using an ACK/NAK protocol)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span># (at the least, this pertains to bash under MacOSX Catalina, probably elsewhere, too)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span>echo "???" &gt;/dev/fd/5 &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12"><span class="Apple-converted-space">    </span>echo "???" &gt;/dev/fd/6 &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12">fi</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td10">
        <p class="p12">./debug-exit "[$1] $0"</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
  </tbody>
</table>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>edit-and-move-with-images</b></h2>
<table width="100%" cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td4">
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">#!/bin/bash</p>
        <p class="p12">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">## inputs:</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">## filename (fd 3)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">## prefix (fd 4) YYYY-MM-DD</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">## go (fd 5)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">## fullprefix (fd 6) YYYY-MM-DD-HH-MM-SS</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">## outputs:</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">## &lt;none&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">## <span class="Apple-converted-space">  </span>- edit _new/filename/basename change all occurences of Images to ../assets/prefix-Images --&gt; /tmp/basename</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">## <span class="Apple-converted-space">  </span>- moves /tmp/basename to ../_posts/filename/prefix-basename</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">## <span class="Apple-converted-space">  </span>- moves _new/filename/Images <span class="Apple-converted-space">  </span>to ../assets/prefix-Images</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">## specific to Scrivener: Compile the document as a Web Page (.html) and leave it in ../_new</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">## specific to Scrivener: if a .scriv file contains images, a directory will be created - it contains the .html file plus a sub-directory Images/, for example, abc.sriv --&gt; abc.html/abc.html and abc.html/Images (yes, the directory is named abc.html)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">./debug-entry "[$1] $0"</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">read filename &lt;/dev/fd/3</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">read prefix &lt;/dev/fd/4</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">read go &lt;/dev/fd/5</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td12">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td13">
        <p class="p12">read fullprefix &lt;/dev/fd/6</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">if [ "${go}" == "go" ]</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">then</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12"><span class="Apple-converted-space">    </span>base=`basename "${filename}"`</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12"><span class="Apple-converted-space">    </span># edit to new file and move it to _posts</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12"><span class="Apple-converted-space">    </span>sed -e "s@&lt;img src=\"Images@&lt;img src=\"/assets/${fullprefix}-Images@g" &lt;"${filename}/${base}" &gt;"../_posts/${prefix}-${base}"</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12"><span class="Apple-converted-space">    </span># move Images folder to ../assets/prefix-Images</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12"><span class="Apple-converted-space">    </span>mv "${filename}/Images" "../assets/${fullprefix}-Images"</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12"><span class="Apple-converted-space">    </span># delete source(s), completing the mv (mv is not cp)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12"><span class="Apple-converted-space">    </span>rm -rf "${filename}"</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">fi</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td11">
        <p class="p12">./debug-exit "[$1] $0"</p>
        <p class="p13"><br></p>
      </td>
    </tr>
  </tbody>
</table>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>pathB</b></h2>
<p class="p7"><br></p>
<p class="p2"><img src="Images/project-Engineering Branch B2.png" width="400px" height="304px" alt="Image"></p>
<p class="p8">Fig. 18 Implementation Branch B</p>
<table width="100%" cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="top" class="td4">
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
        <p class="p12">#!/bin/bash</p>
        <p class="p12">./debug-entry "[$1] $0"</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td14">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">## inputs:</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">## filename (fd 3)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">## content (fd 4) N/C</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">## go (fd 5)</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">## outputs:</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">## &lt;none&gt; - side-effect - file.html moved to ./_posts/&lt;prefix&gt;_filename.html</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">#</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td14">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">wire1=wire_pB_1</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">wire1a=wire_pB_1a</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">wire1b=wire_pB_1b</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">wire2=wire_pB_2</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">wire2a=wire_pB_2a</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">wire2b=wire_pB_2b</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">wire3=wire_pB_3</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">wire4=wire_pB_4</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">wire5=wire_pB_5</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">mkfifo ${wire1} ${wire1a} ${wire1b} ${wire2} ${wire2a} ${wire2b} ${wire3} ${wire4} ${wire5}</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td14">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">./wire-splitter2 "x [$1] $0" 3&lt;${wire1} 4&gt;${wire1a} 5&gt;${wire1b} &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">./wire-splitter2 "y [$1] $0" 3&lt;${wire2} 4&gt;${wire2a} 5&gt;${wire2b} &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">./create-file-prefix-from-subdir "[$1] $0" 3&lt;${wire1a} 4&lt;${wire2a} 5&gt;${wire3} 6&gt;${wire5}&amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">./edit-and-move-with-images "[$1] $0" 3&lt;${wire1b} 4&lt;${wire3} 5&lt;${wire2b} 6&lt;${wire5} &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td14">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">read filename &lt;/dev/fd/3</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">echo "${filename}" &gt; ${wire1} &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td14">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">read content &lt;/dev/fd/4</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">echo "${content}" &gt; ${wire4} &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">./nc 3&lt;${wire4} &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td14">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">read pin_go &lt;/dev/fd/5</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">echo "${pin_go}" &gt; ${wire2} &amp;</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td14">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">./debug-exit "[$1] $0"</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
      </td>
      <td valign="top" class="td14">
        <p class="p12">wait</p>
      </td>
    </tr>
    <tr>
      <td valign="top" class="td5">
        <p class="p13"><br></p>
        <p class="p13"><br></p>
      </td>
    </tr>
  </tbody>
</table>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>Extra Marks - Transpiling Diagrams</b></h2>
<p class="p2">Some clues about how to transpile diagrams to code:</p>
<p class="p7"><br></p>
<ul class="ul1">
  <li class="li3">Convert the diagram into XML form.<span class="Apple-converted-space">  </span>I drew the diagrams in <a href="http://draw.io">draw.io</a>.<span class="Apple-converted-space">  </span>It outputs a compressed XML file.<span class="Apple-converted-space">  </span>Each tab on the diagram is contained in its own element delimited by &lt;diagram&gt; … &lt;/diagram&gt;</li>
  <li class="li3">Copy/Paste the compressed data into the tool <a href="https://jgraph.github.io/drawio-tools/tools/convert.html">https://jgraph.github.io/drawio-tools/tools/convert.html</a> and press the <i>decode</i> button.<span class="Apple-converted-space">  </span>This should result in human-readable XML of an mxGraph structure.</li>
  <li class="li3">The structure contains graphical information about every item in the drawing.</li>
  <li class="li3">Weed out the syntactic sugar.</li>
  <li class="li3">Normalize the data - I like factbases (see another one of my essays).</li>
  <li class="li3">Use code to transform the data into some very convenient form, e.g. JSON.<span class="Apple-converted-space">  </span>I like using PEG-based parsers (Ohm-js for Javascript, ESRAP for Common Lisp).</li>
  <li class="li3">N.B. the graphical data can be considered to be a textual programming language, where details like X, Y, Width and Height have been added.</li>
  <li class="li3">Convert the 2D graphical information into 1D textual information.<span class="Apple-converted-space">  </span>E.g. find all boxes, then, find all boxes that intersect boxes (high school math).<span class="Apple-converted-space">  </span>Small boxes that sit on the edges of larger boxes are "ports".</li>
  <li class="li3">Use standard text-compilation technique from that point on.</li>
</ul>
<p class="p7"><br></p>
<p class="p2">Some clues on how to draw diagrams that can be transpiled:</p>
<p class="p7"><br></p>
<ul class="ul1">
  <li class="li3">Ensure that all boxes are <i>concurrent</i>.<span class="Apple-converted-space">  </span>The sequential paradigm (call/return) does not work for diagrams.</li>
  <li class="li3">Allow text to be included in the diagram (text is better than diagrams for a certain class of programs, e.g. "a = b + c" should be written and not drawn).</li>
  <li class="li3">Use an editor that allows drawing any shape and does not need to know details about what is being drawn.</li>
  <li class="li3">Imagine Emacs (vim, vscode, etc.) for diagrams.<span class="Apple-converted-space">  </span>Emacs knows only how to edit characters, in general.<span class="Apple-converted-space">  </span>Emacs doesn't check that the code is consistent - that's the job of the compiler in later stages.<span class="Apple-converted-space">  </span>Emacs allows you to save inconsistent programs - for example, it doesn't check for consistency and stop one from saving an inconsistent program.<span class="Apple-converted-space">  </span>The compiler will raise error messages, later.</li>
  <li class="li3">Imagine that diagrams are the same as text code.</li>
  <li class="li3">Think box/arrow/ellipse/text instead of pixels.</li>
  <li class="li3">Programmers' editors edit a grid of cells.<span class="Apple-converted-space">  </span>Cells may not overlap.<span class="Apple-converted-space">  </span>Cells are also called "characters".</li>
  <li class="li3">Programmers' editors are not-quite-2D.<span class="Apple-converted-space">  </span>They allow 2D layout of text, but insist on arranging cells in lines and columns.</li>
  <li class="li3">Diagram editors, OTOH, allow cells to overlap.<span class="Apple-converted-space">  </span>No strict grid structure is imposed.</li>
  <li class="li3">Don't think in terms of pixels, think about larger constructs, like boxes.<span class="Apple-converted-space">  </span>One doesn't need pixel/raster recognition algorithms to effectively use diagrams as syntax (DaS).</li>
</ul>
<h2 style="margin: 24.0px 0.0px 12.0px 0.0px; font: 20.0px Helvetica"><b>White Box Testing</b></h2>
<p class="p2">During development, most parts were tested using white-box testers.</p>
<p class="p7"><br></p>
<p class="p2">The topmost white-box tester is<span class="Apple-converted-space"> </span></p>
<p class="p7"><br></p>
<p class="p2"><a href="https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/whitebox-testall">https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/whitebox-testall</a>.</p>
<p class="p7"><br></p>
<p class="p2">The remaining white-box testers can be viewed at:</p>
<p class="p7"><br></p>
<p class="p2"><a href="https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/whitebox-test-create-file-prefix">https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/whitebox-test-create-file-prefix</a></p>
<p class="p2"><a href="https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/whitebox-test-isADirectory">https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/whitebox-test-isADirectory</a></p>
<p class="p2"><a href="https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/whitebox-test-move-to-posts">https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/whitebox-test-move-to-posts</a></p>
<p class="p2"><a href="https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/whitebox-test-pathA">https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/whitebox-test-pathA</a></p>
<p class="p2"><a href="https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/whitebox-test-pathA-fail">https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/whitebox-test-pathA-fail</a></p>
<p class="p2"><a href="https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/whitebox-test-scrivener-to-jekyll">https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/whitebox-test-scrivener-to-jekyll</a></p>
<p class="p2"><a href="https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/whitebox-test-wire-splitter2">https://github.com/guitarvydas/scrivener-to-jekyll/blob/main/_bin/whitebox-test-wire-splitter2</a></p>
<p class="p9"><br></p>
<hr>
<p class="p8"><a id="fn1"></a><a href="#fnlink1"><span class="s1">[1]</span></a><span class="s1"> </span>Scrivener is a tool for writing books, etc.<span class="Apple-converted-space">  </span>It goes well beyond what can be done with WYSIWYG editors, such as Word®.<span class="Apple-converted-space">  </span>Scrivener can produce output in many formats.<span class="Apple-converted-space">  </span>We will stick with .html (web page) output, for this project.</p>
<p class="p8"><a id="fn2"></a><a href="#fnlink2"><span class="s1">[2]</span></a><span class="s1"> </span>Jekyll is a "static site generator", in other words, it produces a website containing only pure .html files and requires no access to "dynamic" technologies like databases.<span class="Apple-converted-space">  </span>Jekyll is used to produce blogs for github pages.<span class="Apple-converted-space">  </span>Github pages is a website generator that runs Jekyll whenever a new post is pushed to the appropriate repo.<span class="Apple-converted-space">  </span>My blog, as an example, can be seen at guitarvydas.github.io and the corresponding repo is at https://github.com/guitarvydas/guitarvydas.github.io.</p>
<p class="p8"><a id="fn3"></a><a href="#fnlink3"><span class="s1">[3]</span></a><span class="s1"> </span>Liquid was developed by Shopify.<span class="Apple-converted-space">  </span>https://shopify.dev/docs/themes/liquid/reference</p>
<p class="p8"><a id="fn4"></a><a href="#fnlink4"><span class="s1">[4]</span></a><span class="s1"> </span>Earlier, I said that this project had one output.<span class="Apple-converted-space">  </span>I was simplifying.</p>
<p class="p8"><a id="fn5"></a><a href="#fnlink5"><span class="s1">[5]</span></a><span class="s1"> </span>One form of this optimization is often called D.R.Y. (abbreviated as DRY).<span class="Apple-converted-space">  </span>DRY is appropriate for Maintenance Engineering, Test Engineering and Implementation and Maintenance, etc., but, DRY is <i>not</i> appropriate for Architecture and Realization Engineering.<span class="Apple-converted-space">  </span>As an example, Architects and Engineers need to indicate that a <i>solution</i> is <i>like</i> some other solution with changes (see Paul Bennett's Framing Software Reuse).<span class="Apple-converted-space">  </span>Inheritance, as currently implemented, does not capture this kind of relationship in an easy-to-understand manner.</p>
<p class="p8"><a id="fn6"></a><a href="#fnlink6"><span class="s1">[6]</span></a><span class="s1"> </span>More methods of doing this in bash exist.<span class="Apple-converted-space">  </span>For example, we could use backtick syntax.</p>
<p class="p3"><span class="s2"><a id="fn7"></a><a href="#fnlink7"><span class="s1">[7]</span></a></span> Even worse, the return address is baked into the code using a <span class="s5">dynamic</span> call-chain, called the <i>Stack</i>. <span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p3">DLLs try to solve this direct-call problem using indirection, but still allow the <i>Stack</i> to determine returns.</p>
<p class="p4"><br></p>
<p class="p3">Current functional PLs are attacking this problem by disassociating definition from implementation.<span class="Apple-converted-space">  </span>UNIX® was capable of doing this in the 1970's.</p>
<p class="p4"><br></p>
<p class="p3">FP ignores practical issues like <span class="s5">divide and conquer</span>.<span class="Apple-converted-space">  </span>Peter Lee showed how to apply divide and conquer to Denotational Semantics, in 1989.<span class="Apple-converted-space">  </span><a href="https://www.amazon.ca/Realistic-Compiler-Generation-Peter-Lee/dp/0262121417">https://www.amazon.ca/Realistic-Compiler-Generation-Peter-Lee/dp/0262121417</a></p>
<p class="p3"><a href="https://www.amazon.ca/Realistic-Compiler-Generation-Peter-Lee/dp/0262121417"><a id="fn8"></a></a><a href="#fnlink8">[8]</a><a href="https://www.amazon.ca/Realistic-Compiler-Generation-Peter-Lee/dp/0262121417"> </a>Schematic Parts work the same way as Leaf Parts.<span class="Apple-converted-space">  </span>One cannot tell how a Part is implemented - as a Leaf or as a Schematic - when using a Part.</p>
<p class="p8"><span class="s1"><a id="fn9"></a><a href="#fnlink9">[9]</a> </span>In electronics, splitting signals involves only the calculation of <i>impedances.</i><span class="Apple-converted-space">  </span>In software, splitting signals involves copying.<span class="Apple-converted-space">  </span>In this project, we use bash and get copying "for free".<span class="Apple-converted-space">  </span>If we were to implement Parts in C, though, we would have to worry about the implications of copying (shallow copy, deep copy, pass-by-reference, etc).</p>
<p class="p3"><span class="s2"><a id="fn10"></a><a href="#fnlink10"><span class="s1">[10]</span></a></span> In fact, this might be a case of premature and unnecessary optimization on my part.<span class="Apple-converted-space">  </span>The bash code for Branch A and Branch B was written early in the project, before all of the diagram-to-bash kinks had been worked out.<span class="Apple-converted-space">  </span>This kind of change should have been iterated with the Engineer.<span class="Apple-converted-space">  </span>In this case, the project was so small that I executed all tasks in this project.<span class="Apple-converted-space">  </span>I was the Architect, Engineer and Implementor.<span class="Apple-converted-space">  </span>I cut corners in Engineering because I Implemented the bash scripts.<span class="Apple-converted-space">  </span>Had I exercised more discipline, this optimization might not have occurred.<span class="Apple-converted-space">  </span>In a larger project, different people would fill the roles of Architecting, Engineering and Implementation - which would have put a damper on such egregious changes.</p>
<p class="p4"><br></p>
<p class="p3">In a full IDE, which converted diagrams to code, this optimization would not have occurred (it is possible to transpile diagrams to code, but this will be the subject of another essay.<span class="Apple-converted-space">  </span>See the section "Extra Marks" for clues on how transpilation from diagrams to code might be accomplished.</p>
</div>
</body>
</html>
